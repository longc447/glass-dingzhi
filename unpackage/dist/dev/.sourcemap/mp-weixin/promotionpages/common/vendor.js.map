{"version":3,"sources":["uni-app:///promotionpages/components/l-time/time.js","uni-app:///promotionpages/combo/public/js/payment.js","uni-app:///promotionpages/topics/public/js/detail.js","uni-app:///promotionpages/topics/public/js/payment.js","uni-app:///promotionpages/seckill/public/js/list.js","uni-app:///promotionpages/seckill/public/js/detail.js","uni-app:///promotionpages/seckill/public/js/payment.js","uni-app:///promotionpages/pintuan/public/js/detail.js","uni-app:///promotionpages/pintuan/public/js/payment.js","uni-app:///promotionpages/bargain/public/js/detail.js","uni-app:///promotionpages/bargain/public/js/payment.js","uni-app:///promotionpages/groupbuy/public/js/detail.js","uni-app:///promotionpages/groupbuy/public/js/payment.js","uni-app:///promotionpages/point/public/js/payment.js","uni-app:///promotionpages/wholesale/public/js/detail.js","uni-app:///promotionpages/wholesale/public/js/payment.js"],"names":["Function","prototype","asyAfter","afterfn","_self","ret","apply","arguments","Date","pattern","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","week","test","replace","RegExp","$1","getFullYear","substr","length","getDay","k","isType","type","exec","Object","toString","call","Time","timeProto","getUnix","getTime","getTodayUnix","date","myDate","getYearUnix","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","getLastDate","constTime","month","day","resDateStr","timer","_just","_mm","_hh","today","_time_","_dd","ceil","_dlast","dateFilter","reg","getFormatTime","max","now","year","_t","data","isIphoneX","orderCreateData","is_balance","pay_password","platform_coupon_id","orderPaymentData","member_account","balance","is_pay_password","shop_goods_list","site_name","express_type","coupon_list","invoice_config","invoice_status","platform_coupon_list","bunding_info","bl_name","orderInvoice","is_invoice","invoice_type","invoice_title","invoice_title_type","invoice_full_address","is_tax_invoice","invoice_email","invoice_content","taxpayer_number","isSub","tempData","sitePromotion","siteDelivery","site_id","selectCouponId","selectCouponMoney","selectPlatCouponId","selectPlatCouponMoney","methods","openPopup","ref","platform_coupon_money","$refs","open","closePopup","assign","$forceUpdate","close","selectAddress","params","back","local","$util","redirectTo","getOrderPaymentData","uni","getStorageSync","pay_flag","removeStorageSync","showToast","title","setTimeout","location","buyer_message","$api","sendRequest","url","success","res","code","timestamp","handlePaymentData","loadingCover","hide","fail","delivery","invoice","coupon","h","m","nowTime","weeks","index_weeks","curr_week","undefined","delivery_type","name","delivery_type_name","store_id","store_list","is_virtual","local_config","info","time_is_open","showTimeBar","buyer_ask_delivery_time","time_week","indexOf","canLocalDelicery","time_type","deliveryWeek","showTime","timeWeek","is_interval","i","difference","temp","push","join","start_time","getTimeStr","end_time","current_time","timeStampTurnTime","hour","minute","start_hour","parseInt","split","start_minute","end_hour","end_minute","goods_list","forEach","v","sku_spec_format","JSON","parse","coupon_id","coupon_money","money","platformcoupon_id","orderCalculate","val","siteId","deliveryObj","couponObj","messageObj","Array","isArray","deepClone","stringify","member_address","delivery_money","invoice_money","invoice_delivery_money","promotion_money","order_money","balance_money","pay_money","goods_money","message","orderCreate","verify","hideLoading","choosePaymentPopup","getPayInfo","error_code","showModal","content","confirmText","confirm","expressTypeVerify","key","openPromotion","PromotionPopup","openSitePromotion","sitePromotionPopup","openSiteDelivery","deliveryPopup","selectDeliveryType","selectPickupPoint","openSiteCoupon","couponPopup","selectCoupon","item","selectPlatCoupon","popupConfirm","useBalance","imgError","goodsIndex","sku_image","getDefaultImage","default_goods_img","openInvoicePopup","changeIsInvoice","changeInvoiceType","changeInvoiceTitleType","changeInvoiceContent","closeInvoicePopup","invoicePopup","invoiceVerify","saveInvoice","bindTimeChange","e","time","target","value","currentTarget","dataset","siteid","toShopDetail","navigateTo","sku_id","openChoosePayment","setStorageSync","onShow","$langConfig","refresh","uniappIsIPhoneX","onHide","show","computed","balanceDeduct","balance_total","parseFloat","toFixed","promotionMoney","bl_price","filters","moneyFormat","promotion","keys","promotionInfo","topics_id","skuId","goodsSkuDetail","goods_id","goods_service","shopInfo","logo","shop_baozh","shop_qtian","shop_zhping","shop_erxiaoshi","shop_tuihuo","shop_shiyong","shop_shiti","shop_xiaoxie","cartCount","whetherCollection","swiperInterval","swiperAutoplay","swiperCurrent","switchMedia","poster","posterMsg","posterHeight","goodsEvaluate","member_headimg","member_name","images","create_time","sku_name","memberId","contactData","path","img","detailTab","service","showKefu","goodsCircle","evaluateConfig","evaluate_audit","evaluate_show","evaluate_status","onLoad","id","source_member","scene","sceneParams","decodeURIComponent","$store","dispatch","then","topic","mask","getCartCount","getMemberId","canGoConnect","getKekuConfig","getGoodsSkuDetail","modifyGoodsInfo","getEvaluateConfig","servicer","goConnect","login","async","topic_id","goods_sku_detail","shop_info","service_name","desc","discountTimeMachine","countDown","show_price","topic_price","video_url","sku_images","goods_spec_format","goods_image","concat","unit","save_price","price","goods_attr_format","unique","j","attr_id","attr_value_id","attr_value_name","goods_name","size","getWhetherCollection","setWechatShare","getGoodScircleConfig","refreshGoodsSkuDetail","goHome","goCart","goodsSku","swiperChange","detail","current","openMerchantsServicePopup","merchantsServicePopup","closeMerchantsServicePopup","openAttributePopup","attributePopup","closeAttributePopup","getGoodsEvaluate","is_anonymous","substring","previewEvaluate","index","field","paths","previewImage","urls","editCollection","openSharePopup","sharePopup","closeSharePopup","openPosterPopup","getGoodsPoster","posterPopup","view","createSelectorQuery","in","select","fields","posterWhith","width","ratio","closePosterPopup","qrcode_param","page","previewMedia","swiperImgError","saveGoodsPoster","downloadFile","statusCode","saveImageToPhotosAlbum","filePath","tempFilePath","getService","htmlParser","is_use","goodsSyncToGoodsCircle","openBusinessView","wx","businessType","extraData","product","item_code","image_list","map","ele","console","log","copyUrl","text","$config","h5Domain","copy","kefuConfig","toEvaluateDetail","navigate","href","link","encodeURIComponent","openVideo","video_img","errorShopLogo","avatar","default_shop_img","topic_info","mobile","mescroll","timeList","seckillId","seckillIndex","dataList","noStartList","showEmpty","watch","newName","oldName","resetUpScroll","goodsImg","imgStr","imgs","transformSeckillTime","second","isEnd","isShow","getTimeList","newTimes","tempList","values","list","seckill_start_time","seckill_end_time","isNow","round","start","toLocaleDateString","autoEvent","self","setInterval","getExpirationTime","getData","page_size","num","seckill_id","newArr","msg","endSuccess","endErr","timeListData","currDate","dateStr","expirationTime","obj","ident","endSeconds","s","next","ontabtap","f","toGoodsDetail","splice","clearInterval","goodsTag","recommend_way","onShareAppMessage","seckill","type_id","currentTime","seckill_price","seckill_info","groupId","pintuan_id","pintuanList","currentPintuan","headimg","timeMachine","newList","group_id","pintuan","getPintuanGroupList","promotion_price","pintuan_price","isPromotion","resetPrice","buyNow","filter","openPinTuan","pintuan_num","pintuanPopup","closePinTuanPopup","joinPintuan","pintuanImgError","default_headimg","pintuan_info","pintuan_group_info","bargain_id","bargain","stock","bargain_stock","floor_price","bargainPrice","bargain_info","Number","curr_price","groupbuy_id","groupbuy","groupbuy_price","groupbuy_info","exchange_info","pay_type","imageUrl","image","goodsId","wholesale","wholesaleJoinCart","wholesaleBuyNow","siteItem","deliveryVerify","deliveryData","siteIndex"],"mappings":"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","file":"promotionpages/common/vendor.js","sourcesContent":["Function.prototype.asyAfter = function(afterfn) {\r\n\tvar _self = this;\r\n\treturn function() {\r\n\t\tvar ret = _self.apply(this, arguments);\r\n\t\tif (ret === 'next') {\r\n\t\t\treturn afterfn.apply(this, arguments);\r\n\t\t}\r\n\t\treturn ret;\r\n\t}\r\n}\r\n\r\nDate.prototype.pattern = function(fmt) {\r\n\tvar o = {\r\n\t\t\"M+\": this.getMonth() + 1, //月份         \r\n\t\t\"d+\": this.getDate(), //日         \r\n\t\t\"h+\": this.getHours() % 12 == 0 ? 12 : this.getHours() % 12, //小时         \r\n\t\t\"H+\": this.getHours(), //小时         \r\n\t\t\"m+\": this.getMinutes(), //分         \r\n\t\t\"s+\": this.getSeconds(), //秒         \r\n\t\t\"q+\": Math.floor((this.getMonth() + 3) / 3), //季度         \r\n\t\t\"S\": this.getMilliseconds() //毫秒         \r\n\t};\r\n\tvar week = {\r\n\t\t\"0\": \"\\u65e5\",\r\n\t\t\"1\": \"\\u4e00\",\r\n\t\t\"2\": \"\\u4e8c\",\r\n\t\t\"3\": \"\\u4e09\",\r\n\t\t\"4\": \"\\u56db\",\r\n\t\t\"5\": \"\\u4e94\",\r\n\t\t\"6\": \"\\u516d\"\r\n\t};\r\n\tif (/(y+)/.test(fmt)) {\r\n\t\tfmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n\t}\r\n\tif (/(E+)/.test(fmt)) {\r\n\t\tfmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? \"\\u661f\\u671f\" : \"\\u5468\") : \"\") +\r\n\t\t\tweek[this.getDay() + \"\"]);\r\n\t}\r\n\tfor (var k in o) {\r\n\t\tif (new RegExp(\"(\" + k + \")\").test(fmt)) {\r\n\t\t\tfmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n\t\t}\r\n\t}\r\n\treturn fmt;\r\n}\r\n\r\nconst isType = type => (/^\\[object\\s(.*)\\]$/.exec(Object.prototype.toString.call(type)))[1];\r\nlet Time = function() {};\r\nlet timeProto = Time.prototype;\r\n\r\n//获取当前时间戳\r\ntimeProto.getUnix = function() {\r\n\treturn new Date().getTime();\r\n}\r\n\r\n//获取当天0点0分0秒时间戳\r\ntimeProto.getTodayUnix = function() {\r\n\tlet date = new Date();\r\n\tlet myDate = `${date.getFullYear()}/${(date.getMonth() + 1)}/${date.getDate()} 00:00:00`;\r\n\treturn new Date(myDate).getTime();\r\n}\r\n\r\n//获取今年1月1日0点0分0秒时间戳\r\ntimeProto.getYearUnix = function() {\r\n\tlet date = new Date();\r\n\tdate.setMonth(0);\r\n\tdate.setDate(1);\r\n\tdate.setHours(0);\r\n\tdate.setMinutes(0);\r\n\tdate.setSeconds(0);\r\n\tdate.setMilliseconds(0);\r\n\treturn date.getTime();\r\n}\r\n\r\n//获取当前时间标准年月日\r\ntimeProto.getLastDate = function(constTime) {\r\n\tif (!constTime) {\r\n\t\treturn;\r\n\t}\r\n\tlet date = new Date(constTime);\r\n\tif (date.pattern) {\r\n\t\treturn date.pattern(\"yyyy-MM-dd\");\r\n\t}\r\n\r\n\tlet month = date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n\tlet day = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n\treturn date.getFullYear() + '-' + month + '-' + day;\r\n}\r\n\r\nconst resDateStr = function(timer, constTime) {\r\n\tlet _just = function(timer) {\r\n\r\n\t\tif (timer <= 0 || Math.floor(timer / 60) <= 0) {\r\n\t\t\treturn \"刚刚\"\r\n\t\t} else return 'next';\r\n\t}\r\n\r\n\tlet _mm = function(timer) {\r\n\t\tif (timer < 3600) {\r\n\t\t\treturn Math.floor(timer / 60) + \"分钟前\"\r\n\t\t} else return 'next';\r\n\t}\r\n\tlet _hh = function(timer, constTime) {\r\n\t\tlet today = _time_.getTodayUnix();\r\n\t\tif (timer >= 3600 && (constTime - today >= 0)) {\r\n\t\t\t//可切换显示模式\r\n\t\t\t// return \"今天 \" + new Date(constTime).pattern(\"HH:mm\");\r\n\t\t\treturn Math.floor(timer / 60 / 60) + \"小时前\";\r\n\t\t} else {\r\n\t\t\treturn 'next'\r\n\t\t};\r\n\t}\r\n\tlet _dd = function(timer, constTime) {\r\n\t\tlet today = _time_.getTodayUnix();\r\n\t\ttimer = (today - constTime) / 1000;\r\n\t\tif (timer / 86400 <= 31) {\r\n\t\t\treturn Math.ceil(timer / 86400) + \"天前\"\r\n\t\t} else return 'next';\r\n\t}\r\n\tlet _dlast = function(timer, constTime) {\r\n\t\treturn _time_.getLastDate(constTime);\r\n\t}\r\n\r\n\tlet dateFilter = _just.asyAfter(_mm).asyAfter(_hh).asyAfter(_dd).asyAfter(_dlast);\r\n\treturn dateFilter(timer, constTime);\r\n}\r\n\r\n\r\n//转换时间\r\nconst reg = new RegExp(\"-\", \"g\");\r\ntimeProto.getFormatTime = function(constTime, max) {\r\n\tif (!constTime) {\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tswitch (isType(constTime)) {\r\n\t\tcase 'Date':\r\n\t\t\tconstTime = constTime.getTime();\r\n\t\t\tbreak;\r\n\t\tcase 'String':\r\n\t\t\tconstTime = constTime.replace(reg, \"/\");\r\n\t\tdefault:\r\n\t\t\tconstTime = new Date(constTime).getTime();\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tlet now = this.getUnix();\r\n\tlet year = this.getYearUnix();\r\n\tlet timer = (now - constTime) / 1000;\r\n\tif (constTime > now && max) {\r\n\t\treturn this.getLastDate(constTime);\r\n\t}\r\n\r\n\tlet _t = this;\r\n\treturn resDateStr(timer, constTime);\r\n}\r\n\r\nconst _time_ = new Time();\r\nexport default _time_;\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {\r\n\t\t\t\tis_balance: 0,\r\n\t\t\t\tpay_password: '',\r\n\t\t\t\tplatform_coupon_id: 0,\r\n\t\t\t},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\tmember_account: {\r\n\t\t\t\t\tbalance: 0,\r\n\t\t\t\t\tis_pay_password: 0\r\n\t\t\t\t},\r\n\t\t\t\tshop_goods_list: {\r\n\t\t\t\t\tsite_name: '',\r\n\t\t\t\t\texpress_type: [],\r\n\t\t\t\t\tcoupon_list: [],\r\n\t\t\t\t\tinvoice_config: {\r\n\t\t\t\t\t\tinvoice_status: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tplatform_coupon_list: [],\r\n\t\t\t\tbunding_info: {\r\n\t\t\t\t\tbl_name: ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\torderInvoice: {\r\n\t\t\t\tis_invoice: 0, //是否需要发票\r\n\t\t\t\tinvoice_type: 1, //发票类型电子、纸质\r\n\t\t\t\tinvoice_title: '', //发票抬头\r\n\t\t\t\tinvoice_title_type: 1, // 抬头类型\r\n\t\t\t\tinvoice_full_address: '', //邮寄地址\r\n\t\t\t\tis_tax_invoice: 0, //是否需要增值税发票\r\n\t\t\t\tinvoice_email: '', // 邮箱\r\n\t\t\t\tinvoice_content: '', //发票内容\r\n\t\t\t\ttaxpayer_number: '' //纳税人识别号\r\n\t\t\t},\r\n\t\t\tisSub: false,\r\n\t\t\ttempData: null,\r\n\t\t\tsitePromotion: [],\r\n\t\t\tsiteDelivery: {\r\n\t\t\t\tsite_id: 0,\r\n\t\t\t\tdata: []\r\n\t\t\t},\r\n\r\n\t\t\tselectCouponId: 0,\r\n\t\t\tselectCouponMoney: '0.00',\r\n\r\n\t\t\tselectPlatCouponId: 0,\r\n\t\t\tselectPlatCouponMoney: '0.00'\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tif (ref == 'PlatcouponPopup') {\r\n\t\t\t\tthis.selectPlatCouponId = this.orderPaymentData.platform_coupon_id;\r\n\t\t\t\tthis.selectPlatCouponMoney = this.orderPaymentData.platform_coupon_money;\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tif (this.tempData) {\r\n\t\t\t\tObject.assign(this.orderCreateData, this.tempData);\r\n\t\t\t\tObject.assign(this.orderPaymentData, this.tempData);\r\n\t\t\t\tthis.tempData = null;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/combo/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('comboOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 获取经纬度\r\n\t\t\tlet location = uni.getStorageSync('location');\r\n\t\t\tif (location) {\r\n\t\t\t\tthis.orderCreateData = Object.assign(this.orderCreateData, location);\r\n\t\t\t}\r\n\r\n\t\t\tthis.orderCreateData.buyer_message = '';\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/bundling/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tthis.handlePaymentData();\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 处理结算订单数据\r\n\t\thandlePaymentData() {\r\n\t\t\tthis.orderCreateData.delivery = {};\r\n\t\t\tthis.orderCreateData.invoice = {};\r\n\t\t\tthis.orderCreateData.coupon = {};\r\n\t\t\tthis.orderCreateData.is_balance = 0;\r\n\t\t\tthis.orderCreateData.pay_password = '';\r\n\r\n\t\t\tvar data = this.orderPaymentData;\r\n\r\n\t\t\tlet h = new Date().getHours().toString();\r\n\t\t\tlet m = new Date().getMinutes().toString();\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tlet nowTime = h + ':' + m;\r\n\t\t\tvar weeks = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n\r\n\t\t\t// 获取时间，必须是字符串,跟后端一致\r\n\t\t\tlet index_weeks = ['0', '1', '2', '3', '4', '5', '6'];\r\n\t\t\tlet curr_week = index_weeks[new Date().getDay()];\r\n\r\n\t\t\tif (data.shop_goods_list.express_type != undefined && data.shop_goods_list.express_type[0] != undefined) {\r\n\t\t\t\tvar express_type = data.shop_goods_list.express_type;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type = express_type[0].name;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type_name = express_type[0].title;\r\n\t\t\t\tthis.orderCreateData.delivery.store_id = 0;\r\n\r\n\t\t\t\t// 如果默认配送方式是门店配送\r\n\t\t\t\tif (express_type[0].name == 'store') {\r\n\t\t\t\t\tif (express_type[0].store_list[0] != undefined) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.store_id = express_type[0].store_list[0].store_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.is_virtual == 0 && data.shop_goods_list.local_config) {\r\n\r\n\t\t\t\t// 是否显示时间选择\r\n\t\t\t\tif (data.shop_goods_list.local_config.info && data.shop_goods_list.local_config.info.time_is_open == 1) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = true;\r\n\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = nowTime;\r\n\t\t\t\t\t// 当日是否支持配送\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 0 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.length == 7 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.indexOf(curr_week) > -1) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_type == 0) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t} else if (data.shop_goods_list.local_config.info.time_week.length > 0) {\r\n\t\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 7) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = true;\r\n\t\t\t\t\t\t\t// 判断配送时间是连续还是间隔\r\n\t\t\t\t\t\t\tvar timeWeek = data.shop_goods_list.local_config.info.time_week;\r\n\t\t\t\t\t\t\tvar is_interval = false; // 是否间隔\r\n\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((i + 1) < timeWeek.length) {\r\n\t\t\t\t\t\t\t\t\tvar difference = timeWeek[i + 1] - timeWeek[i];\r\n\t\t\t\t\t\t\t\t\tif (difference > 1) {\r\n\t\t\t\t\t\t\t\t\t\tis_interval = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (is_interval) {\r\n\t\t\t\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttemp.push(weeks[timeWeek[i]]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = temp.join(\"、\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = weeks[timeWeek[0]] + \"至\" + weeks[timeWeek[timeWeek.length -\r\n\t\t\t\t\t\t\t\t\t1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未设置配送时间\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// picker组件时间起始\r\n\t\t\t\t\tlet start_time = data.shop_goods_list.local_config.info.start_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.start_time = this.getTimeStr(start_time);\r\n\r\n\t\t\t\t\tlet end_time = data.shop_goods_list.local_config.info.end_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.end_time = this.getTimeStr(end_time);\r\n\r\n\t\t\t\t\tvar current_time = new Date(this.$util.timeStampTurnTime(data.timestamp));\r\n\t\t\t\t\tvar hour = current_time.getHours();\r\n\t\t\t\t\tvar minute = current_time.getMinutes();\r\n\r\n\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t// 检测当天是否能够配送，然后判断送达时间。不在配送时间当日不能下单，例：配送时间是周一到周五，那么周末不能下单，周一到周五可以下单\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif ((hour < start_hour) || (hour == start_hour && minute < start_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = (start_hour.toString().length == 1 ? \"0\" + start_hour :\r\n\t\t\t\t\t\t\t\t\t\tstart_hour) + ':' +\r\n\t\t\t\t\t\t\t\t\t(start_minute.toString().length == 1 ? \"0\" + start_minute : start_minute);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if (((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t// \t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// 当前时间晚于配送时间，送达时间隐藏，不能下单\r\n\t\t\t\t\t\t\tif ((hour > end_hour) || (hour == end_hour && minute > end_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = false;\r\n\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未开启配送时间\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.shop_goods_list.goods_list.forEach((v) => {\r\n\t\t\t\tif (typeof(v.sku_spec_format) == 'string') {\r\n\t\t\t\t\tif (v.sku_spec_format) {\r\n\t\t\t\t\t\tv.sku_spec_format = JSON.parse(v.sku_spec_format);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tv.sku_spec_format = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 店铺优惠券\r\n\t\t\tif (data.shop_goods_list.coupon_list != undefined && data.shop_goods_list.coupon_list[0] != undefined) {\r\n\t\t\t\tvar coupon_list = data.shop_goods_list.coupon_list;\r\n\t\t\t\tthis.orderCreateData.coupon.coupon_id = coupon_list[0].coupon_id;\r\n\t\t\t\tthis.orderCreateData.coupon.coupon_money = coupon_list[0].money;\r\n\r\n\t\t\t\tthis.selectCouponId = coupon_list[0].coupon_id;\r\n\t\t\t\tthis.selectCouponMoney = coupon_list[0].coupon_id;\r\n\t\t\t}\r\n\r\n\t\t\t// 平台优惠券\r\n\t\t\tif (data.platform_coupon_list.length > 0) {\r\n\t\t\t\tdata.platform_coupon_id = data.platform_coupon_list[0].platformcoupon_id;\r\n\t\t\t\tdata.platform_coupon_money = data.platform_coupon_list[0].money;\r\n\r\n\t\t\t\tthis.orderCreateData.platform_coupon_id = data.platform_coupon_list[0].platformcoupon_id;\r\n\t\t\t\tthis.orderCreateData.platform_coupon_money = data.platform_coupon_list[0].money;\r\n\r\n\t\t\t\tthis.selectPlatCouponId = data.platform_coupon_list[0].platformcoupon_id;\r\n\t\t\t\tthis.selectPlatCouponMoney = data.platform_coupon_list[0].money;\r\n\t\t\t}\r\n\r\n\t\t\tObject.assign(data, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t},\r\n\t\t// 转化时间字符串\r\n\t\tgetTimeStr(val) {\r\n\t\t\tvar h = parseInt(val / 3600).toString();\r\n\t\t\tvar m = parseInt((val % 3600) / 60).toString();\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\treturn h + ':' + m;\r\n\t\t},\r\n\t\t// 订单计算\r\n\t\torderCalculate() {\r\n\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\tvar deliveryObj = {};\r\n\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\tvar couponObj = {};\r\n\t\t\tcouponObj[siteId] = this.orderCreateData.coupon;\r\n\r\n\t\t\tvar messageObj = {};\r\n\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t//店铺发票\r\n\t\t\tif (this.orderPaymentData.shop_goods_list.is_invoice) {\r\n\t\t\t\tthis.orderCreateData.invoice[siteId] = {};\r\n\t\t\t\tif (!Array.isArray(this.orderPaymentData.shop_goods_list.invoice_config)) {\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_invoice = this.orderPaymentData.shop_goods_list.is_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_type = this.orderPaymentData.shop_goods_list.invoice_type;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title = this.orderPaymentData.shop_goods_list.invoice_title;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].taxpayer_number = this.orderPaymentData.shop_goods_list.taxpayer_number;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_content = this.orderPaymentData.shop_goods_list.invoice_content;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_full_address = this.orderPaymentData.shop_goods_list.invoice_full_address;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_tax_invoice = this.orderPaymentData.shop_goods_list.is_tax_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_email = this.orderPaymentData.shop_goods_list.invoice_email;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title_type = this.orderPaymentData.shop_goods_list.invoice_title_type;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\tdata.coupon = JSON.stringify(couponObj);\r\n\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/bundling/api/ordercreate/calculate',\r\n\t\t\t\tdata,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData.member_address = res.data.member_address;\r\n\t\t\t\t\t\tthis.orderPaymentData.delivery_money = res.data.delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.coupon_money = res.data.coupon_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_money = res.data.invoice_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_delivery_money = res.data.invoice_delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.promotion_money = res.data.promotion_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.order_money = res.data.order_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.balance_money = res.data.balance_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.pay_money = res.data.pay_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.goods_money = res.data.goods_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.platform_coupon_money = res.data.platform_coupon_money;\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订单创建\r\n\t\t * @param {String} pay_password 支付密码\r\n\t\t */\r\n\t\torderCreate(pay_password) {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tif (pay_password) this.orderCreateData.pay_password = pay_password;\r\n\r\n\t\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\t\tvar deliveryObj = {};\r\n\t\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\t\tvar couponObj = {};\r\n\t\t\t\tcouponObj[siteId] = this.orderCreateData.coupon;\r\n\r\n\t\t\t\tvar messageObj = {};\r\n\t\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\t\tdata.coupon = JSON.stringify(couponObj);\r\n\t\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/bundling/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.pay_money == 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/pay/result/result', {\r\n\t\t\t\t\t\t\t\t\tcode: res.data\r\n\t\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'comboOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tlet expressTypeVerify = true;\r\n\r\n\t\t\tfor (let key in this.orderPaymentData.shop_goods_list) {\r\n\t\t\t\tif (this.orderPaymentData.shop_goods_list.express_type.length == 0) {\r\n\t\t\t\t\texpressTypeVerify = false;\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!expressTypeVerify) return false;\r\n\r\n\t\t\tif (JSON.stringify(this.orderCreateData.delivery) == \"{}\") {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderCreateData.delivery.delivery_type == 'store' && this.orderCreateData.delivery.store_id == 0) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】没有可提货的门店,请选择其他配送方式'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderCreateData.delivery.delivery_type == 'local') {\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\tvar hour = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[0]);\r\n\t\t\t\t\tvar minute = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t// 当前时间早于配送时间\r\n\t\t\t\t\t\tif (((hour < start_hour) || (hour == start_hour && minute < start_minute))) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间不能小于配送开始时间'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 当前时间在配送时间内，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\tif (!((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间范围：开始时间~结束时间'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】已休息'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 显示活动优惠信息\r\n\t\topenPromotion() {\r\n\t\t\tthis.$refs.PromotionPopup.open();\r\n\t\t},\r\n\t\t// 显示店铺优惠信息\r\n\t\topenSitePromotion(data) {\r\n\t\t\tthis.sitePromotion = data;\r\n\t\t\tthis.$refs.sitePromotionPopup.open();\r\n\t\t},\r\n\t\t// 显示店铺配送信息\r\n\t\topenSiteDelivery() {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\tthis.$refs.deliveryPopup.open();\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tselectDeliveryType(data) {\r\n\t\t\tthis.orderCreateData.delivery.delivery_type = data.name;\r\n\t\t\tthis.orderCreateData.delivery.delivery_type_name = data.title;\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\t// 如果是门店配送\r\n\t\t\tif (data.name == 'store') {\r\n\t\t\t\tif (data.store_list[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t\tthis.tempData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择自提点\r\n\t\tselectPickupPoint(store_id) {\r\n\t\t\tthis.orderCreateData.delivery.store_id = store_id;\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs['deliveryPopup'].close();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示店铺优惠券信息\r\n\t\t * @param {Object} siteId\r\n\t\t * @param {Object} couponData\r\n\t\t */\r\n\t\topenSiteCoupon() {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tcoupon: this.$util.deepClone(this.orderPaymentData.coupon)\r\n\t\t\t};\r\n\t\t\tthis.selectCouponId = this.orderCreateData.coupon.coupon_id;\r\n\t\t\tthis.selectCouponMoney = this.orderCreateData.coupon.coupon_money;\r\n\t\t\tthis.$refs.couponPopup.open();\r\n\t\t},\r\n\t\t// 选择优惠券\r\n\t\tselectCoupon(item) {\r\n\t\t\tif (this.selectCouponId != item.coupon_id) {\r\n\t\t\t\tthis.selectCouponId = item.coupon_id;\r\n\t\t\t\tthis.selectCouponMoney = item.money;\r\n\t\t\t} else {\r\n\t\t\t\tthis.selectCouponId = 0;\r\n\t\t\t\tthis.selectCouponMoney = '0.00';\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择平台优惠券\r\n\t\tselectPlatCoupon(item) {\r\n\t\t\tif (this.selectPlatCouponId != item.platformcoupon_id) {\r\n\t\t\t\tthis.selectPlatCouponId = item.platformcoupon_id;\r\n\t\t\t\tthis.selectPlatCouponMoney = item.money;\r\n\t\t\t} else {\r\n\t\t\t\tthis.selectPlatCouponId = 0;\r\n\t\t\t\tthis.selectPlatCouponMoney = '0.00';\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\tpopupConfirm(ref) {\r\n\t\t\tif (ref == 'couponPopup') {\r\n\t\t\t\tthis.orderCreateData.coupon.coupon_id = this.selectCouponId;\r\n\t\t\t\tthis.orderCreateData.coupon.coupon_money = this.selectCouponMoney;\r\n\t\t\t}\r\n\t\t\tif (ref == 'PlatcouponPopup') {\r\n\t\t\t\tthis.orderPaymentData.platform_coupon_id = this.selectPlatCouponId;\r\n\t\t\t\tthis.orderPaymentData.platform_coupon_money = this.selectPlatCouponMoney;\r\n\t\t\t\tthis.orderCreateData.platform_coupon_id = this.selectPlatCouponId;\r\n\t\t\t\tthis.orderCreateData.platform_coupon_money = this.selectPlatCouponMoney;\r\n\t\t\t}\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.tempData = null;\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 使用余额\r\n\t\tuseBalance() {\r\n\t\t\tif (this.orderCreateData.is_balance) this.orderCreateData.is_balance = 0;\r\n\t\t\telse this.orderCreateData.is_balance = 1;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\timgError(goodsIndex) {\r\n\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[goodsIndex].sku_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//打开发票弹窗\r\n\t\topenInvoicePopup(val) {\r\n\t\t\tthis.orderInvoice = this.$util.deepClone(val);\r\n\t\t\tthis.orderInvoice.invoice_type = this.orderInvoice.invoice_type == undefined ? 1 : this.orderInvoice.invoice_type;\r\n\t\t\tthis.orderInvoice.invoice_title_type = this.orderInvoice.invoice_title_type == undefined ? 1 : this.orderInvoice.invoice_title_type;\r\n\t\t\tthis.orderInvoice.invoice_content = this.orderInvoice.invoice_content ? this.orderInvoice.invoice_content : '';\r\n\t\t\tthis.orderInvoice.invoice_title = this.orderInvoice.invoice_title ? this.orderInvoice.invoice_title : '';\r\n\t\t\tthis.orderInvoice.invoice_full_address = this.orderInvoice.invoice_full_address ? this.orderInvoice.invoice_full_address :\r\n\t\t\t\t''; //邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = this.orderInvoice.is_tax_invoice ? this.orderInvoice.is_tax_invoice : 0; //是否需要增值税发票\r\n\t\t\tthis.orderInvoice.invoice_email = this.orderInvoice.invoice_email ? this.orderInvoice.invoice_email : ''; // 邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = this.orderInvoice.taxpayer_number ? this.orderInvoice.taxpayer_number : ''; //纳税人识别号\r\n\t\t\tthis.openPopup('invoicePopup');\r\n\t\t},\r\n\t\t// 切换发票开关\r\n\t\tchangeIsInvoice() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 0) {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 0;\r\n\t\t\t}\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票类型\r\n\t\tchangeInvoiceType(invoice_type) {\r\n\t\t\tthis.orderInvoice.invoice_type = invoice_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票个人还是企业\r\n\t\tchangeInvoiceTitleType(invoice_title_type) {\r\n\t\t\tthis.orderInvoice.invoice_title_type = invoice_title_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择发票内容\r\n\t\tchangeInvoiceContent(invoice_content) {\r\n\t\t\tthis.orderInvoice.invoice_content = invoice_content;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//关闭发票弹窗\r\n\t\tcloseInvoicePopup() {\r\n\t\t\tthis.orderInvoice.invoice_type = 1; // 发票类型  1 纸质 2 电子\r\n\t\t\tthis.orderInvoice.invoice_title_type = 1; // 抬头类型  1 个人 2 企业\r\n\t\t\tthis.orderInvoice.invoice_content = ''; // 发票内容\r\n\t\t\tthis.orderInvoice.invoice_title = ''; // 发票抬头\r\n\t\t\tthis.orderInvoice.invoice_full_address = ''; // 发票邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = 0; // 是否需要增值税专用发票  0 不需要 1 需要\r\n\t\t\tthis.orderInvoice.invoice_email = ''; //发票邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = ''; //纳税人识别号\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs.invoicePopup.close();\r\n\t\t},\r\n\t\t// 发票验证\r\n\t\tinvoiceVerify() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 1) {\r\n\t\t\t\tif (this.orderInvoice.invoice_title == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票抬头\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_title_type == 2 && this.orderInvoice.taxpayer_number == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写纳税人识别号\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 1 && this.orderInvoice.invoice_full_address == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票邮寄地址\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写邮箱\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email != '') {\r\n\t\t\t\t\tvar reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n\t\t\t\t\tif (!reg.test(this.orderInvoice.invoice_email)) {\r\n\t\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请填写正确的邮箱地址\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_content == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择发票内容\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 保存发票信息\r\n\t\tsaveInvoice() {\r\n\t\t\tif (this.invoiceVerify()) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list = this.orderInvoice;\r\n\t\t\t\tthis.orderCalculate();\r\n\t\t\t\tthis.closePopup('invoicePopup');\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindTimeChange(e) {\r\n\t\t\tlet time = e.target.value;\r\n\t\t\tthis.orderCreateData.delivery[e.currentTarget.dataset.siteid].buyer_ask_delivery_time = time;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\ttoShopDetail(e) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: e\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigateTo(sku_id) {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\tsku_id\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tuni.setStorageSync('paySource', '');\r\n\t\t\tif (this.verify()) this.$refs.choosePaymentPopup.open();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tonHide() {\r\n\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.show();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 余额抵扣\r\n\t\tbalanceDeduct() {\r\n\t\t\tif (this.orderPaymentData.member_account.balance_total <= parseFloat(this.orderPaymentData.order_money).toFixed(2)) {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.member_account.balance_total).toFixed(2);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.order_money).toFixed(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tpromotionMoney() {\r\n\t\t\treturn this.orderPaymentData.bunding_info.goods_money - this.orderPaymentData.bunding_info.bl_price;\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t},\r\n\t\t// 店铺优惠摘取\r\n\t\tpromotion(data) {\r\n\t\t\tlet promotion = [];\r\n\t\t\tif (data) {\r\n\t\t\t\tObject.keys(data).forEach((key) => {\r\n\t\t\t\t\tlet promotionInfo = data[key];\r\n\t\t\t\t\tswitch (key) {\r\n\t\t\t\t\t\tcase 'manjian':\r\n\t\t\t\t\t\t\tpromotion.push('满减送');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'freeshipping':\r\n\t\t\t\t\t\t\tpromotion.push('满额包邮');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn promotion.join(\" \");\r\n\t\t}\r\n\t}\r\n}\r\n","import htmlParser from '@/common/js/html-parser';\r\nimport {\r\n\tWeixin\r\n} from '@/common/js/wx-jssdk.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttopics_id: 0,\r\n\t\t\tskuId: 0,\r\n\r\n\t\t\t// 商品详情\r\n\t\t\tgoodsSkuDetail: {\r\n\t\t\t\tgoods_id: 0,\r\n\t\t\t\tgoods_service: []\r\n\t\t\t},\r\n\t\t\t// 店铺详情\r\n\t\t\tshopInfo: {\r\n\t\t\t\tlogo: '',\r\n\t\t\t\tshop_baozh: 0,\r\n\t\t\t\tshop_qtian: 0,\r\n\t\t\t\tshop_zhping: 0,\r\n\t\t\t\tshop_erxiaoshi: 0,\r\n\t\t\t\tshop_tuihuo: 0,\r\n\t\t\t\tshop_shiyong: 0,\r\n\t\t\t\tshop_shiti: 0,\r\n\t\t\t\tshop_xiaoxie: 0\r\n\t\t\t},\r\n\r\n\t\t\tcartCount: 0, // 购物车商品数量\r\n\t\t\twhetherCollection: 0,\r\n\r\n\t\t\t// 媒体,图片,视频\r\n\r\n\t\t\t// 解决每个商品SKU图片数量不同时，无法切换到第一个，导致轮播图显示不出来\r\n\t\t\tswiperInterval: 1,\r\n\t\t\tswiperAutoplay: false,\r\n\t\t\tswiperCurrent: 1,\r\n\t\t\tswitchMedia: 'img',\r\n\r\n\t\t\tisIphoneX: false, //判断手机是否是iphoneX以上\r\n\r\n\t\t\tposter: \"-1\", //海报\r\n\t\t\tposterMsg: \"\", //海报错误信息\r\n\t\t\tposterHeight: 0,\r\n\r\n\t\t\t//评价\r\n\t\t\tgoodsEvaluate: {\r\n\t\t\t\tmember_headimg: '',\r\n\t\t\t\tmember_name: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tcreate_time: 0,\r\n\t\t\t\tsku_name: ''\r\n\t\t\t},\r\n\t\t\tmemberId: 0,\r\n\t\t\tcontactData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tpath: '',\r\n\t\t\t\timg: ''\r\n\t\t\t},\r\n\t\t\tdetailTab: 0,\r\n\t\t\tservice: null,\r\n\t\t\tshowKefu: 0,\r\n\t\t\t// 是否可分享到好物圈\r\n\t\t\tgoodsCircle: false,\r\n\t\t\tevaluateConfig: {\r\n\t\t\t\tevaluate_audit: 1,\r\n\t\t\t\tevaluate_show: 0,\r\n\t\t\t\tevaluate_status: 1\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(data) {\r\n\t\tthis.topics_id = data.id || 0;\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t\tif (data.source_member) uni.setStorageSync('source_member', data.source_member);\r\n\t\t// 小程序扫码进入\r\n\t\tif (data.scene) {\r\n\t\t\tvar sceneParams = decodeURIComponent(data.scene);\r\n\t\t\tsceneParams = sceneParams.split('&');\r\n\t\t\tif (sceneParams.length) {\r\n\t\t\t\tsceneParams.forEach(item => {\r\n\t\t\t\t\tif (item.indexOf('id') != -1) this.topics_id = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('source_member') != -1) uni.setStorageSync('source_member', item.split('-')[1]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t// this.getService();\r\n\t},\r\n\tasync onShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\t\tthis.$store.dispatch('getAddonIsexit').then(async (data) => {\r\n\t\t\tif (!data.topic) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '专题活动未开启',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getCartCount();\r\n\t\t\t\t\tthis.getMemberId();\r\n\t\t\t\t}\r\n\t\t\t\tthis.canGoConnect();\r\n\t\t\t\tthis.getKekuConfig();\r\n\t\t\t\t//同步获取商品详情\r\n\t\t\t\tawait this.getGoodsSkuDetail();\r\n\r\n\t\t\t\t//修改商品信息\r\n\t\t\t\tthis.modifyGoodsInfo();\r\n\r\n\t\t\t\t// 评价设置\r\n\t\t\t\tthis.getEvaluateConfig();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t},\r\n\tmethods: {\r\n\t\tcanGoConnect() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/addon/addonisexit\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tthis.showKefu = res.data.servicer;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//联系客服\r\n\t\tgoConnect() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tsite_id: this.shopInfo.site_id,\r\n\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.redirectTo('/otherpages/chat/room/room', data)\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/pages/goods/detail/detail?sku_id=' + this.goodsSkuDetail.sku_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取专题活动商品详情\r\n\t\tasync getGoodsSkuDetail() {\r\n\t\t\tlet res = await this.$api.sendRequest({\r\n\t\t\t\turl: '/topic/api/topicgoods/detail',\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttopic_id: this.topics_id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tlet data = res.data;\r\n\t\t\tif (data.goods_sku_detail != null) {\r\n\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\tthis.shopInfo = data.shop_info;\r\n\r\n\t\t\t\tthis.skuId = this.goodsSkuDetail.sku_id;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.goods_service = [];\r\n\t\t\t\tif (this.shopInfo.shop_baozh == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '保证服务',\r\n\t\t\t\t\t\tdesc: '保证服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_qtian == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '7天退换',\r\n\t\t\t\t\t\tdesc: '满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_zhping == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '正品保障',\r\n\t\t\t\t\t\tdesc: '商品支持正品保障服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_erxiaoshi == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '两小时发货',\r\n\t\t\t\t\t\tdesc: '付款后2小时内发货'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_tuihuo == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '退货承诺',\r\n\t\t\t\t\t\tdesc: '退货承诺'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiyong == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '试用中心',\r\n\t\t\t\t\t\tdesc: '试用中心'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiti == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '实体验证',\r\n\t\t\t\t\t\tdesc: '实体验证'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_xiaoxie == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '消协保证',\r\n\t\t\t\t\t\tdesc: '如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (res.timestamp > this.goodsSkuDetail.end_time) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"专题活动已结束\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.goodsSkuDetail.discountTimeMachine = this.$util.countDown(this.goodsSkuDetail.end_time - res.timestamp);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsSkuDetail.topic_price;\r\n\r\n\t\t\t\t//媒体\r\n\t\t\t\tif (this.goodsSkuDetail.video_url) this.switchMedia = \"video\";\r\n\r\n\t\t\t\tif (this.goodsSkuDetail.sku_images) this.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.split(\",\");\r\n\t\t\t\telse this.goodsSkuDetail.sku_images = [];\r\n\r\n\t\t\t\t// 多规格时合并主图\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format && this.goodsSkuDetail.goods_image) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_image = this.goodsSkuDetail.goods_image.split(\",\");\r\n\t\t\t\t\tthis.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.concat(this.goodsSkuDetail.goods_image);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\r\n\t\t\t\tthis.goodsSkuDetail.save_price = (this.goodsSkuDetail.price - this.goodsSkuDetail.show_price) > 0 ? (this.goodsSkuDetail\r\n\t\t\t\t\t.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t// 当前商品SKU规格\r\n\t\t\t\tif (this.goodsSkuDetail.sku_spec_format) this.goodsSkuDetail.sku_spec_format = JSON.parse(this.goodsSkuDetail.sku_spec_format);\r\n\r\n\t\t\t\t// 商品属性\r\n\t\t\t\tif (this.goodsSkuDetail.goods_attr_format) {\r\n\t\t\t\t\tlet goods_attr_format = JSON.parse(this.goodsSkuDetail.goods_attr_format);\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format = this.$util.unique(goods_attr_format, \"attr_id\");\r\n\t\t\t\t\tfor (var i = 0; i < this.goodsSkuDetail.goods_attr_format.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < goods_attr_format.length; j++) {\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.goods_attr_format[i].attr_id == goods_attr_format[j].attr_id && this.goodsSkuDetail.goods_attr_format[\r\n\t\t\t\t\t\t\t\t\ti].attr_value_id != goods_attr_format[j].attr_value_id) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format[i].attr_value_name += \"、\" + goods_attr_format[j].attr_value_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 商品SKU格式\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format) this.goodsSkuDetail.goods_spec_format = JSON.parse(this.goodsSkuDetail.goods_spec_format);\r\n\r\n\t\t\t\tthis.$langConfig.title(this.goodsSkuDetail.goods_name);\r\n\r\n\t\t\t\t// 商品详情\r\n\t\t\t\t// if (this.goodsSkuDetail.goods_content) this.goodsSkuDetail.goods_content = htmlParser(this.goodsSkuDetail.goods_content);\r\n\r\n\t\t\t\tthis.contactData = {\r\n\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\tpath: '/promotionpages/topic/detail/detail?id=' + this.topics_id,\r\n\t\t\t\t\timg: this.$util.img(this.goodsSkuDetail.sku_image, {\r\n\t\t\t\t\t\tsize: 'big'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getWhetherCollection();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setWechatShare();\r\n\r\n\t\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\r\n\r\n\t\t\t\tthis.getGoodScircleConfig();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 刷新商品详情数据\r\n\t\t * @param {Object} goodsSkuDetail\r\n\t\t */\r\n\t\trefreshGoodsSkuDetail(goodsSkuDetail) {\r\n\t\t\tObject.assign(this.goodsSkuDetail, goodsSkuDetail);\r\n\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t// 解决轮播图数量不一致时，切换到第一个\r\n\t\t\tif (this.swiperCurrent > this.goodsSkuDetail.sku_images.length) {\r\n\t\t\t\tthis.swiperAutoplay = true;\r\n\t\t\t\tthis.swiperCurrent = 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.swiperAutoplay = false;\r\n\t\t\t\t}, 40);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoHome() {\r\n\t\t\t// this.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: this.shopInfo.site_id\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoCart() {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/cart/cart', {}, 'reLaunch');\r\n\t\t},\r\n\t\t// 立即购买\r\n\t\ttopic() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/topics/goods_detail/goods_detail?id=' + this.topics_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$refs.goodsSku.show(\"topic\", () => {});\r\n\t\t},\r\n\t\tswiperChange(e) {\r\n\t\t\tthis.swiperCurrent = e.detail.current + 1;\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------服务-------------------------------------\r\n\r\n\t\topenMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.open();\r\n\t\t},\r\n\t\tcloseMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.close();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\t\topenAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.open();\r\n\t\t},\r\n\t\tcloseAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.close();\r\n\t\t},\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\r\n\r\n\t\t//-------------------------------------评价-------------------------------------\r\n\t\t//商品评论列表\r\n\t\tgetGoodsEvaluate() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsevaluate/firstinfo\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.goodsEvaluate = data;\r\n\t\t\t\t\t\tif (this.goodsEvaluate.images) this.goodsEvaluate.images = this.goodsEvaluate.images.split(\",\");\r\n\t\t\t\t\t\tif (this.goodsEvaluate.is_anonymous == 1) this.goodsEvaluate.member_name = this.goodsEvaluate.member_name.replace(\r\n\t\t\t\t\t\t\tthis.goodsEvaluate.member_name.substring(1, this.goodsEvaluate.member_name.length - 1), '***')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 预览评价图片\r\n\t\tpreviewEvaluate(index, field) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsEvaluate[field].length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsEvaluate[field][i]));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------关注-------------------------------------\r\n\r\n\t\t//获取用户是否关注\r\n\t\tgetWhetherCollection() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodscollect/iscollect\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.whetherCollection = res.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teditCollection() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\r\n\t\t\t\t//未关注添加关注\r\n\t\t\t\tif (this.whetherCollection == 0) {\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/add\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//已关注取消关注\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/delete\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/topics/goods_detail/goods_detail?id=' + this.topics_id);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//获取购物车数量\r\n\t\tgetCartCount() {\r\n\t\t\tthis.$store.dispatch('getCartNumber').then((e) => {\r\n\t\t\t\tthis.cartCount = e;\r\n\t\t\t});\r\n\t\t},\r\n\t\t//更新商品信息\r\n\t\tmodifyGoodsInfo() {\r\n\t\t\t//更新商品点击量\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goods/modifyclicks\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tsite_id: this.goodsSkuDetail.site_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\r\n\t\t\t//添加足迹\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsbrowse/add\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------分享-------------------------------------\r\n\t\t// 打开分享弹出层\r\n\t\topenSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.open();\r\n\t\t},\r\n\t\t// 关闭分享弹出层\r\n\t\tcloseSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t},\r\n\t\t//-------------------------------------海报-------------------------------------\r\n\r\n\t\t// 打开海报弹出层\r\n\t\topenPosterPopup() {\r\n\t\t\tthis.getGoodsPoster();\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t\tthis.$refs.posterPopup.open();\r\n\t\t\tif (this.poster != '-1') {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().in(this).select(\".poster-layer .image-wrap\");\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true,\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\tlet posterWhith = data.width;\r\n\t\t\t\t\t\tlet ratio = parseFloat((740 / posterWhith).toFixed(2));\r\n\t\t\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1240 / ratio);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1100 / ratio);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭海报弹出层\r\n\t\tclosePosterPopup() {\r\n\t\t\tthis.$refs.posterPopup.close();\r\n\t\t},\r\n\t\t//生成海报\r\n\t\tgetGoodsPoster() {\r\n\t\t\t//活动海报信息\r\n\t\t\tlet qrcode_param = {\r\n\t\t\t\tid: this.topics_id\r\n\t\t\t};\r\n\t\t\tif (this.memberId) qrcode_param.source_member = this.memberId;\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/topic/api/topicgoods/poster\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage: '/promotionpages/topics/goods_detail/goods_detail',\r\n\t\t\t\t\tqrcode_param: JSON.stringify(qrcode_param)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.poster = res.data.path + \"?time=\" + new Date().getTime();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.posterMsg = res.message;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tpreviewMedia(index) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsSkuDetail.sku_images.length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsSkuDetail.sku_images[i], {\r\n\t\t\t\t\tsize: 'big'\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\t\tswiperImgError(index) {\r\n\t\t\tthis.goodsSkuDetail.sku_images[index] = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\r\n\t\t//小程序中保存海报\r\n\t\tsaveGoodsPoster() {\r\n\t\t\tlet url = this.$util.img(this.poster);\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存成功\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存失败，请稍后重试\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetMemberId() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/member/id\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.memberId = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//售后保障查询\r\n\t\tgetService() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goods/aftersale',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tlet data = res.data.content;\r\n\t\t\t\t\t\tif (res.data.content) this.service = htmlParser(res.data.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置微信公众号分享\r\n\t\t */\r\n\t\tsetWechatShare() {\r\n\t\t\t// 微信公众号分享\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\t获取是否开启微信圈子 \r\n\t\t */\r\n\t\tgetGoodScircleConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/config/info',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tif (res.data.is_use) {\r\n\t\t\t\t\t\t\tthis.goodsSyncToGoodsCircle()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\t将商品同步到微信圈子 \r\n\t\t */\r\n\t\tgoodsSyncToGoodsCircle() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/goods/sync',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.goodsCircle = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将商品推荐到微信圈子\r\n\t\t */\r\n\t\topenBusinessView() {\r\n\t\t\tif (wx.openBusinessView) {\r\n\t\t\t\twx.openBusinessView({\r\n\t\t\t\t\tbusinessType: 'friendGoodsRecommend',\r\n\t\t\t\t\textraData: {\r\n\t\t\t\t\t\tproduct: {\r\n\t\t\t\t\t\t\titem_code: this.goodsSkuDetail.goods_id,\r\n\t\t\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\t\t\timage_list: this.goodsSkuDetail.sku_images.map((ele) => {\r\n\t\t\t\t\t\t\t\treturn this.$util.img(ele);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('success', res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log('fail', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetEvaluateConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goodsevaluate/config',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tthis.evaluateConfig = data;\r\n\t\t\t\t\t\tif (this.evaluateConfig.evaluate_show == 1) {\r\n\t\t\t\t\t\t\t//商品评论\r\n\t\t\t\t\t\t\tthis.getGoodsEvaluate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcopyUrl() {\r\n\t\t\tlet text = this.$config.h5Domain + '/promotionpages/topic/goods_detail/goods_detail?id=' + this.topics_id;\r\n\t\t\tif (this.memberId) text += '&source_member=' + this.memberId;\r\n\t\t\tthis.$util.copy(text, () => {\r\n\t\t\t\tthis.closeSharePopup();\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetKekuConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/config/servicer',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.kefuConfig = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttoEvaluateDetail(id) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/evaluate/evaluate', {\r\n\t\t\t\tgoods_id: id\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigate(href, e) {\r\n\t\t\t//比如点击a标签，打开某个webview并传输url\r\n\t\t\tthis.$util.redirectTo('/otherpages/webview/webview', {\r\n\t\t\t\tlink: encodeURIComponent(href)\r\n\t\t\t});\r\n\t\t},\r\n\t\t//h5播放视频\r\n\t\topenVideo(url, video_img) {\r\n\t\t\t// this.$refs.videoPopup.open();\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/preview-video', {\r\n\t\t\t\tvideo_url: url,\r\n\t\t\t\tvideo_img: video_img\r\n\t\t\t})\r\n\t\t},\r\n\t\terrorShopLogo() {\r\n\t\t\tthis.shopInfo.avatar = this.$util.getDefaultImage().default_shop_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {\r\n\t\t\t\tis_balance: 0,\r\n\t\t\t\tpay_password: ''\r\n\t\t\t},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\tmember_account: {\r\n\t\t\t\t\tbalance: 0,\r\n\t\t\t\t\tis_pay_password: 0\r\n\t\t\t\t},\r\n\t\t\t\tshop_goods_list: {\r\n\t\t\t\t\tsite_name: '',\r\n\t\t\t\t\texpress_type: [],\r\n\t\t\t\t\tinvoice_config: {\r\n\t\t\t\t\t\tinvoice_status: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttopic_info: {}\r\n\t\t\t},\r\n\t\t\torderInvoice: {\r\n\t\t\t\tis_invoice: 0, //是否需要发票\r\n\t\t\t\tinvoice_type: 1, //发票类型电子、纸质\r\n\t\t\t\tinvoice_title: '', //发票抬头\r\n\t\t\t\tinvoice_title_type: 1, // 抬头类型\r\n\t\t\t\tinvoice_full_address: '', //邮寄地址\r\n\t\t\t\tis_tax_invoice: 0, //是否需要增值税发票\r\n\t\t\t\tinvoice_email: '', // 邮箱\r\n\t\t\t\tinvoice_content: '', //发票内容\r\n\t\t\t\ttaxpayer_number: '' //纳税人识别号\r\n\t\t\t},\r\n\t\t\tisSub: false,\r\n\t\t\ttempData: null,\r\n\t\t\tsiteDelivery: {\r\n\t\t\t\tsite_id: 0,\r\n\t\t\t\tdata: []\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tif (this.tempData) {\r\n\t\t\t\tObject.assign(this.orderCreateData, this.tempData);\r\n\t\t\t\tObject.assign(this.orderPaymentData, this.tempData);\r\n\t\t\t\tthis.tempData = null;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/topics/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('topicOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 获取经纬度\r\n\t\t\tlet location = uni.getStorageSync('location');\r\n\t\t\tif (location) {\r\n\t\t\t\tthis.orderCreateData = Object.assign(this.orderCreateData, location);\r\n\t\t\t}\r\n\r\n\t\t\tthis.orderCreateData.buyer_message = '';\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/topic/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tthis.handlePaymentData();\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 处理结算订单数据\r\n\t\thandlePaymentData() {\r\n\t\t\tthis.orderCreateData.delivery = {};\r\n\t\t\tthis.orderCreateData.invoice = {};\r\n\t\t\tthis.orderCreateData.is_balance = 0;\r\n\t\t\tthis.orderCreateData.pay_password = '';\r\n\r\n\t\t\tvar data = this.orderPaymentData;\r\n\r\n\t\t\tlet h = new Date().getHours().toString();\r\n\t\t\tlet m = new Date().getMinutes().toString();\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tlet nowTime = h + ':' + m;\r\n\t\t\tvar weeks = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n\r\n\t\t\t// 获取时间，必须是字符串,跟后端一致\r\n\t\t\tlet index_weeks = ['0', '1', '2', '3', '4', '5', '6'];\r\n\t\t\tlet curr_week = index_weeks[new Date().getDay()];\r\n\r\n\t\t\tif (data.shop_goods_list.express_type != undefined && data.shop_goods_list.express_type[0] != undefined) {\r\n\t\t\t\tvar express_type = data.shop_goods_list.express_type;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type = express_type[0].name;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type_name = express_type[0].title;\r\n\t\t\t\tthis.orderCreateData.delivery.store_id = 0;\r\n\r\n\t\t\t\t// 如果默认配送方式是门店配送\r\n\t\t\t\tif (express_type[0].name == 'store') {\r\n\t\t\t\t\tif (express_type[0].store_list[0] != undefined) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.store_id = express_type[0].store_list[0].store_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.is_virtual == 0 && data.shop_goods_list.local_config) {\r\n\r\n\t\t\t\t// 是否显示时间选择\r\n\t\t\t\tif (data.shop_goods_list.local_config.info && data.shop_goods_list.local_config.info.time_is_open == 1) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = true;\r\n\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = nowTime;\r\n\t\t\t\t\t// 当日是否支持配送\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 0 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.length == 7 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.indexOf(curr_week) > -1) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_type == 0) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t} else if (data.shop_goods_list.local_config.info.time_week.length > 0) {\r\n\t\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 7) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = true;\r\n\t\t\t\t\t\t\t// 判断配送时间是连续还是间隔\r\n\t\t\t\t\t\t\tvar timeWeek = data.shop_goods_list.local_config.info.time_week;\r\n\t\t\t\t\t\t\tvar is_interval = false; // 是否间隔\r\n\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((i + 1) < timeWeek.length) {\r\n\t\t\t\t\t\t\t\t\tvar difference = timeWeek[i + 1] - timeWeek[i];\r\n\t\t\t\t\t\t\t\t\tif (difference > 1) {\r\n\t\t\t\t\t\t\t\t\t\tis_interval = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (is_interval) {\r\n\t\t\t\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttemp.push(weeks[timeWeek[i]]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = temp.join(\"、\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = weeks[timeWeek[0]] + \"至\" + weeks[timeWeek[timeWeek.length -\r\n\t\t\t\t\t\t\t\t\t1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未设置配送时间\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// picker组件时间起始\r\n\t\t\t\t\tlet start_time = data.shop_goods_list.local_config.info.start_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.start_time = this.getTimeStr(start_time);\r\n\r\n\t\t\t\t\tlet end_time = data.shop_goods_list.local_config.info.end_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.end_time = this.getTimeStr(end_time);\r\n\r\n\t\t\t\t\tvar current_time = new Date(this.$util.timeStampTurnTime(data.timestamp));\r\n\t\t\t\t\tvar hour = current_time.getHours();\r\n\t\t\t\t\tvar minute = current_time.getMinutes();\r\n\r\n\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t// 检测当天是否能够配送，然后判断送达时间。不在配送时间当日不能下单，例：配送时间是周一到周五，那么周末不能下单，周一到周五可以下单\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif ((hour < start_hour) || (hour == start_hour && minute < start_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = (start_hour.toString().length == 1 ? \"0\" + start_hour :\r\n\t\t\t\t\t\t\t\t\t\tstart_hour) + ':' +\r\n\t\t\t\t\t\t\t\t\t(start_minute.toString().length == 1 ? \"0\" + start_minute : start_minute);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if (((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t// \t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// 当前时间晚于配送时间，送达时间隐藏，不能下单\r\n\t\t\t\t\t\t\tif ((hour > end_hour) || (hour == end_hour && minute > end_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = false;\r\n\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未开启配送时间\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.shop_goods_list.goods_list.forEach((v) => {\r\n\t\t\t\tif (typeof(v.sku_spec_format) == 'string') {\r\n\t\t\t\t\tif (v.sku_spec_format) {\r\n\t\t\t\t\t\tv.sku_spec_format = JSON.parse(v.sku_spec_format);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tv.sku_spec_format = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual) this.orderCreateData.member_address = {\r\n\t\t\t\tmobile: ''\r\n\t\t\t};\r\n\r\n\t\t\tObject.assign(data, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t},\r\n\t\t// 转化时间字符串\r\n\t\tgetTimeStr(val) {\r\n\t\t\tvar h = parseInt(val / 3600).toString();\r\n\t\t\tvar m = parseInt((val % 3600) / 60).toString();\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\treturn h + ':' + m;\r\n\t\t},\r\n\t\t// 订单计算\r\n\t\torderCalculate() {\r\n\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\tvar deliveryObj = {};\r\n\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\tvar messageObj = {};\r\n\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t//店铺发票\r\n\t\t\tif (this.orderPaymentData.shop_goods_list.is_invoice) {\r\n\t\t\t\tthis.orderCreateData.invoice[siteId] = {};\r\n\t\t\t\tif (!Array.isArray(this.orderPaymentData.shop_goods_list.invoice_config)) {\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_invoice = this.orderPaymentData.shop_goods_list.is_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_type = this.orderPaymentData.shop_goods_list.invoice_type;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title = this.orderPaymentData.shop_goods_list.invoice_title;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].taxpayer_number = this.orderPaymentData.shop_goods_list.taxpayer_number;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_content = this.orderPaymentData.shop_goods_list.invoice_content;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_full_address = this.orderPaymentData.shop_goods_list.invoice_full_address;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_tax_invoice = this.orderPaymentData.shop_goods_list.is_tax_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_email = this.orderPaymentData.shop_goods_list.invoice_email;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title_type = this.orderPaymentData.shop_goods_list.invoice_title_type;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/topic/api/ordercreate/calculate',\r\n\t\t\t\tdata,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData.member_address = res.data.member_address;\r\n\t\t\t\t\t\tthis.orderPaymentData.delivery_money = res.data.delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_money = res.data.invoice_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_delivery_money = res.data.invoice_delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.promotion_money = res.data.promotion_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.order_money = res.data.order_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.balance_money = res.data.balance_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.pay_money = res.data.pay_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.goods_money = res.data.goods_money;\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订单创建\r\n\t\t * @param {String} pay_password 支付密码\r\n\t\t */\r\n\t\torderCreate(pay_password) {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tif (pay_password) this.orderCreateData.pay_password = pay_password;\r\n\r\n\t\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\t\tvar deliveryObj = {};\r\n\t\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\t\tvar messageObj = {};\r\n\t\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/topic/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.pay_money == 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/pay/result/result', {\r\n\t\t\t\t\t\t\t\t\tcode: res.data\r\n\t\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'topicOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (this.orderPaymentData.is_virtual == 1) {\r\n\t\t\t\tif (!this.orderCreateData.member_address.mobile.length) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入您的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar reg = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;\r\n\t\t\t\tif (!reg.test(this.orderCreateData.member_address.mobile)) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入正确的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual == 0) {\r\n\r\n\t\t\t\tlet expressTypeVerify = true;\r\n\r\n\t\t\t\tfor (let key in this.orderPaymentData.shop_goods_list) {\r\n\t\t\t\t\tif (this.orderPaymentData.shop_goods_list.express_type.length == 0) {\r\n\t\t\t\t\t\texpressTypeVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!expressTypeVerify) return false;\r\n\r\n\t\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (JSON.stringify(this.orderCreateData.delivery) == \"{}\") {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'store' && this.orderCreateData.delivery.store_id == 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】没有可提货的门店,请选择其他配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'local') {\r\n\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\tvar hour = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar minute = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间\r\n\t\t\t\t\t\t\tif (((hour < start_hour) || (hour == start_hour && minute < start_minute))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间不能小于配送开始时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 当前时间在配送时间内，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif (!((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间范围：开始时间~结束时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】已休息'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 显示店铺优惠信息\r\n\t\topenSitePromotion() {\r\n\t\t\tthis.$refs.sitePromotionPopup.open();\r\n\t\t},\r\n\t\t// 显示店铺配送信息\r\n\t\topenSiteDelivery() {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\tthis.$refs.deliveryPopup.open();\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tselectDeliveryType(data) {\r\n\t\t\tthis.orderCreateData.delivery.delivery_type = data.name;\r\n\t\t\tthis.orderCreateData.delivery.delivery_type_name = data.title;\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\t// 如果是门店配送\r\n\t\t\tif (data.name == 'store') {\r\n\t\t\t\tif (data.store_list[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t\tthis.tempData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择自提点\r\n\t\tselectPickupPoint(store_id) {\r\n\t\t\tthis.orderCreateData.delivery.store_id = store_id;\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs['deliveryPopup'].close();\r\n\t\t},\r\n\t\t// 使用余额\r\n\t\tuseBalance() {\r\n\t\t\tif (this.orderCreateData.is_balance) this.orderCreateData.is_balance = 0;\r\n\t\t\telse this.orderCreateData.is_balance = 1;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\timgError(goodsIndex) {\r\n\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[goodsIndex].sku_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//打开发票弹窗\r\n\t\topenInvoicePopup(val) {\r\n\t\t\tthis.orderInvoice = this.$util.deepClone(val);\r\n\t\t\tthis.orderInvoice.invoice_type = this.orderInvoice.invoice_type == undefined ? 1 : this.orderInvoice.invoice_type;\r\n\t\t\tthis.orderInvoice.invoice_title_type = this.orderInvoice.invoice_title_type == undefined ? 1 : this.orderInvoice.invoice_title_type;\r\n\t\t\tthis.orderInvoice.invoice_content = this.orderInvoice.invoice_content ? this.orderInvoice.invoice_content : '';\r\n\t\t\tthis.orderInvoice.invoice_title = this.orderInvoice.invoice_title ? this.orderInvoice.invoice_title : '';\r\n\t\t\tthis.orderInvoice.invoice_full_address = this.orderInvoice.invoice_full_address ? this.orderInvoice.invoice_full_address :\r\n\t\t\t\t''; //邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = this.orderInvoice.is_tax_invoice ? this.orderInvoice.is_tax_invoice : 0; //是否需要增值税发票\r\n\t\t\tthis.orderInvoice.invoice_email = this.orderInvoice.invoice_email ? this.orderInvoice.invoice_email : ''; // 邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = this.orderInvoice.taxpayer_number ? this.orderInvoice.taxpayer_number : ''; //纳税人识别号\r\n\t\t\tthis.openPopup('invoicePopup');\r\n\t\t},\r\n\t\t// 切换发票开关\r\n\t\tchangeIsInvoice() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 0) {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 0;\r\n\t\t\t}\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票类型\r\n\t\tchangeInvoiceType(invoice_type) {\r\n\t\t\tthis.orderInvoice.invoice_type = invoice_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票个人还是企业\r\n\t\tchangeInvoiceTitleType(invoice_title_type) {\r\n\t\t\tthis.orderInvoice.invoice_title_type = invoice_title_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择发票内容\r\n\t\tchangeInvoiceContent(invoice_content) {\r\n\t\t\tthis.orderInvoice.invoice_content = invoice_content;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//关闭发票弹窗\r\n\t\tcloseInvoicePopup() {\r\n\t\t\tthis.orderInvoice.invoice_type = 1; // 发票类型  1 纸质 2 电子\r\n\t\t\tthis.orderInvoice.invoice_title_type = 1; // 抬头类型  1 个人 2 企业\r\n\t\t\tthis.orderInvoice.invoice_content = ''; // 发票内容\r\n\t\t\tthis.orderInvoice.invoice_title = ''; // 发票抬头\r\n\t\t\tthis.orderInvoice.invoice_full_address = ''; // 发票邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = 0; // 是否需要增值税专用发票  0 不需要 1 需要\r\n\t\t\tthis.orderInvoice.invoice_email = ''; //发票邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = ''; //纳税人识别号\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs.invoicePopup.close();\r\n\t\t},\r\n\t\t// 发票验证\r\n\t\tinvoiceVerify() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 1) {\r\n\t\t\t\tif (this.orderInvoice.invoice_title == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票抬头\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_title_type == 2 && this.orderInvoice.taxpayer_number == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写纳税人识别号\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 1 && this.orderInvoice.invoice_full_address == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票邮寄地址\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写邮箱\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email != '') {\r\n\t\t\t\t\tvar reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n\t\t\t\t\tif (!reg.test(this.orderInvoice.invoice_email)) {\r\n\t\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请填写正确的邮箱地址\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_content == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择发票内容\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 保存发票信息\r\n\t\tsaveInvoice() {\r\n\t\t\tif (this.invoiceVerify()) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list = this.orderInvoice;\r\n\t\t\t\tthis.orderCalculate();\r\n\t\t\t\tthis.closePopup('invoicePopup');\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindTimeChange(e) {\r\n\t\t\tlet time = e.target.value;\r\n\t\t\tthis.orderCreateData.delivery[e.currentTarget.dataset.siteid].buyer_ask_delivery_time = time;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\ttoShopDetail(e) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: e\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigateTo(sku_id) {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\tsku_id\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tuni.setStorageSync('paySource', '');\r\n\t\t\tif (this.verify()) this.$refs.choosePaymentPopup.open();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tonHide() {\r\n\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.show();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 余额抵扣\r\n\t\tbalanceDeduct() {\r\n\t\t\tif (this.orderPaymentData.member_account.balance_total <= parseFloat(this.orderPaymentData.order_money).toFixed(2)) {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.member_account.balance_total).toFixed(2);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.order_money).toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t}\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmescroll: null,\r\n\t\t\ttimeList: [], //时间列表\r\n\t\t\tseckillId: null, //选中的时间块\r\n\t\t\tseckillIndex: null, //选中时间块的index\r\n\t\t\tdataList: [], //选中时间块的商品列表\r\n\t\t\tindex: null, //当前正在抢购的index,\r\n\t\t\tsiteId: 0,\r\n\t\t\ttimer: null,\r\n\t\t\tnoStartList: [],\r\n\t\t\tshowEmpty: false\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tseckillId(newName, oldName) {\r\n\t\t\tif (newName && oldName && newName != oldName) {\r\n\t\t\t\tthis.mescroll.resetUpScroll(false);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tshow() {\r\n\t\t\treturn this.timeList.length > 0\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tgoodsImg(imgStr) {\r\n\t\t\tlet imgs = imgStr.split(',');\r\n\t\t\treturn imgs[0] ? this.$util.img(imgs[0], {\r\n\t\t\t\tsize: 'mid'\r\n\t\t\t}) : this.$util.getDefaultImage().default_goods_img;\r\n\t\t},\r\n\t\t//时间转换\r\n\t\ttransformSeckillTime(time) {\r\n\t\t\ttime = parseFloat(time);\r\n\t\t\tvar hour = parseInt(time / 3600);\r\n\t\t\tvar minute = parseInt((time % 3600) / 60);\r\n\t\t\tvar second = parseInt(time % 60);\r\n\r\n\t\t\tif (hour < 10) hour = '0' + hour;\r\n\t\t\tif (minute < 10) minute = '0' + minute;\r\n\t\t\tif (second < 10) second = '0' + second;\r\n\r\n\t\t\treturn hour + ':' + minute;\r\n\t\t},\r\n\t\tisEnd(isShow) {\r\n\t\t\tif (!isShow) return;\r\n\t\t\tthis.$util.showToast({\r\n\t\t\t\ttitle: \"限时秒杀活动已结束\",\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetTimeList() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/seckill/api/seckill/lists',\r\n\t\t\t\tdata: {site_id: this.siteId},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (!data) return;\r\n\t\t\t\t\tlet time = new Date(res.timestamp * 1000);\r\n\t\t\t\t\tlet newTimes = time.getHours() * 60 * 60 + time.getMinutes() * 60 + time.getSeconds();\r\n\t\t\t\t\tvar tempList = Object.values(data.list);\r\n\t\t\t\t\ttempList.forEach((v, k) => {\r\n\t\t\t\t\t\tif (v.seckill_start_time <= newTimes && newTimes < v.seckill_end_time) {\r\n\t\t\t\t\t\t\tv.isNow = true;\r\n\t\t\t\t\t\t\tthis.seckillId = v.id;\r\n\t\t\t\t\t\t\tthis.index = k;\r\n\t\t\t\t\t\t\tthis.seckillIndex = k;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv.isNow = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.timeList = data.list;\r\n\r\n\t\t\t\t\tif (tempList.length) {\r\n\t\t\t\t\t\tlet now = Math.round(new Date() / 1000), // 当前时间戳\r\n\t\t\t\t\t\t\tstart = Math.round(new Date(new Date().toLocaleDateString()).getTime() / 1000), // 当天0点时间戳\r\n\t\t\t\t\t\t\tsecond = now - start;\r\n\t\t\t\t\t\tfor (let i = 0; i < data.list.length; i++) {\r\n\t\t\t\t\t\t\tif (newTimes < data.list[i].seckill_start_time && i == 0) {\r\n\t\t\t\t\t\t\t\tthis.seckillId = data.list[i].id;\r\n\t\t\t\t\t\t\t\tthis.index = i;\r\n\t\t\t\t\t\t\t\tthis.seckillIndex = i;\r\n\t\t\t\t\t\t\t} else if (newTimes < data.list[i].seckill_start_time && newTimes > data.list[i - 1].seckill_end_time && i !=\r\n\t\t\t\t\t\t\t\t0) {\r\n\t\t\t\t\t\t\t\tthis.seckillId = data.list[i].id;\r\n\t\t\t\t\t\t\t\tthis.index = i;\r\n\t\t\t\t\t\t\t\tthis.seckillIndex = i;\r\n\t\t\t\t\t\t\t} else if (i == data.list.length - 1 && newTimes > data.list[i].seckill_end_time) {\r\n\t\t\t\t\t\t\t\tthis.seckillId = data.list[i].id;\r\n\t\t\t\t\t\t\t\tthis.index = i;\r\n\t\t\t\t\t\t\t\tthis.seckillIndex = i;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (second < tempList[i].seckill_start_time) {\r\n\t\t\t\t\t\t\t\tlet temp = tempList[i];\r\n\t\t\t\t\t\t\t\ttemp.index = i;\r\n\t\t\t\t\t\t\t\tthis.noStartList.push(temp);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this.noStartList.length) {\r\n\t\t\t\t\t\t\tthis.autoEvent();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\tsetInterval(res => {\r\n\t\t\t\t\t\tself.getExpirationTime();\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetData(mescroll) {\r\n\t\t\tthis.mescroll = mescroll;\r\n\t\t\tif (mescroll.size == 1) {\r\n\t\t\t\tthis.dataList = [];\r\n\t\t\t}\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/seckill/api/seckillgoods/page',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage_size: mescroll.size,\r\n\t\t\t\t\tpage: mescroll.num,\r\n\t\t\t\t\tseckill_id: this.seckillId,\r\n\t\t\t\t\tsite_id: this.siteId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.showEmpty = true;\r\n\t\t\t\t\tlet newArr = []\r\n\t\t\t\t\tlet msg = res.message;\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tnewArr = res.data.list;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: msg\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmescroll.endSuccess(newArr.length);\r\n\t\t\t\t\t//设置列表数据\r\n\t\t\t\t\tif (mescroll.num == 1) this.dataList = []; //如果是第一页需手动制空列表\r\n\t\t\t\t\tthis.dataList = this.dataList.concat(newArr); //追加新数据\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\t//联网失败的回调\r\n\t\t\t\t\tmescroll.endErr();\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetExpirationTime() {\r\n\t\t\tvar timeListData = this.timeList,\r\n\t\t\t\tcurrDate = new Date(),\r\n\t\t\t\tdateStr = currDate.toLocaleDateString(),\r\n\t\t\t\texpirationTime,\r\n\t\t\t\tnowTime,\r\n\t\t\t\tobj;\r\n\r\n\t\t\tfor (var i in timeListData) {\r\n\t\t\t\tif (timeListData[i].isNow) {\r\n\t\t\t\t\tthis.ident = true;\r\n\t\t\t\t\tnowTime = Date.parse(currDate);\r\n\t\t\t\t\texpirationTime = Date.parse(dateStr) + parseInt(timeListData[i].seckill_end_time) * 1000;\r\n\t\t\t\t\tlet endSeconds = (expirationTime - nowTime) / 1000;\r\n\t\t\t\t\tobj = this.$util.countDown(endSeconds);\r\n\t\t\t\t\tthis.hour = obj.h;\r\n\t\t\t\t\tthis.minute = obj.i;\r\n\t\t\t\t\tthis.second = obj.s;\r\n\t\t\t\t\tif (endSeconds == 0) {\r\n\t\t\t\t\t\tlet next = parseInt(i) + 1;\r\n\t\t\t\t\t\tif (next < timeListData.length) this.index = next;\r\n\t\t\t\t\t\tthis.timeList[i].isNow = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.ident = false;\r\n\t\t},\r\n\t\tontabtap(e, f) {\r\n\t\t\tthis.seckillId = e;\r\n\t\t\tthis.seckillIndex = f;\r\n\t\t},\r\n\t\t//跳转到详情页\r\n\t\ttoGoodsDetail(id, index) {\r\n\t\t\tif (this.seckillIndex < this.index) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: \"秒杀活动已结束！\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.seckillIndex > this.index) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: \"秒杀活动还未开启，敬请期待！\",\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/config/time',\r\n\t\t\t\tdata: {},\r\n\t\t\t\tsuccess: res => {\r\n\r\n\t\t\t\t\tlet time = new Date(res.timestamp * 1000);\r\n\t\t\t\t\tlet newTimes = time.getHours() * 60 * 60 + time.getMinutes() * 60 + time.getSeconds();\r\n\t\t\t\t\tif (this.timeList[index].seckill_start_time <= newTimes && newTimes < this.timeList[index].seckill_end_time) {\r\n\t\t\t\t\t\tthis.timeList[index].isNow = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.timeList[index].isNow = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.$forceUpdate();\r\n\r\n\t\t\t\t\tif (!this.timeList[index].isNow) {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"秒杀活动即将开启，敬请期待！\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$util.redirectTo('/promotionpages/seckill/detail/detail', {\r\n\t\t\t\t\t\tseckill_id: id\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\timgError(index) {\r\n\t\t\tthis.dataList[index].goods_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\tautoEvent() {\r\n\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\tlet now = Math.round(new Date() / 1000), // 当前时间戳\r\n\t\t\t\t\tstart = Math.round(new Date(new Date().toLocaleDateString()).getTime() / 1000), // 当天0点时间戳\r\n\t\t\t\t\tsecond = now - start;\r\n\t\t\t\tfor (let i = 0; i < this.noStartList.length; i++) {\r\n\t\t\t\t\tlet item = this.noStartList[i];\r\n\t\t\t\t\tif (second > item.seckill_start_time && !item.isNow) {\r\n\t\t\t\t\t\tthis.seckillId = item.seckill_id;\r\n\t\t\t\t\t\tthis.index = item.index;\r\n\t\t\t\t\t\tthis.timeList[item.index].isNow = true;\r\n\t\t\t\t\t\tif (this.timeList[item.index - 1] != undefined) {\r\n\t\t\t\t\t\t\tthis.timeList[item.index - 1].isNow = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.noStartList.splice(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.noStartList.length == 0) {\r\n\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t}\r\n\t\t\t}, 1000)\r\n\t\t},\r\n\t\tgoodsTag(data) {\r\n\t\t\tswitch (data.recommend_way) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\treturn '新品';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\treturn '精品';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\treturn '推荐';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonShareAppMessage(res) {\r\n\t\tvar title = '一大波的秒杀福利就要开始了，真的不来看看嘛';\r\n\t\tvar path = '/promotionpages/seckill/list/list';\r\n\t\treturn {\r\n\t\t\ttitle: title,\r\n\t\t\tpath: path,\r\n\t\t\tsuccess: res => {},\r\n\t\t\tfail: res => {}\r\n\t\t};\r\n\t},\r\n\tonHide() {\r\n\t\tclearInterval(this.timer);\r\n\t}\r\n};\r\n","import htmlParser from '@/common/js/html-parser';\r\nimport {\r\n\tWeixin\r\n} from '@/common/js/wx-jssdk.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tseckill_id: 0,\r\n\t\t\tskuId: 0,\r\n\r\n\t\t\t// 商品详情\r\n\t\t\tgoodsSkuDetail: {\r\n\t\t\t\tgoods_id: 0,\r\n\t\t\t\tgoods_service: []\r\n\t\t\t},\r\n\t\t\t// 店铺详情\r\n\t\t\tshopInfo: {\r\n\t\t\t\tlogo: '',\r\n\t\t\t\tshop_baozh: 0,\r\n\t\t\t\tshop_qtian: 0,\r\n\t\t\t\tshop_zhping: 0,\r\n\t\t\t\tshop_erxiaoshi: 0,\r\n\t\t\t\tshop_tuihuo: 0,\r\n\t\t\t\tshop_shiyong: 0,\r\n\t\t\t\tshop_shiti: 0,\r\n\t\t\t\tshop_xiaoxie: 0\r\n\t\t\t},\r\n\r\n\t\t\tcartCount: 0, // 购物车商品数量\r\n\t\t\twhetherCollection: 0,\r\n\r\n\t\t\t// 媒体,图片,视频\r\n\r\n\t\t\t// 解决每个商品SKU图片数量不同时，无法切换到第一个，导致轮播图显示不出来\r\n\t\t\tswiperInterval: 1,\r\n\t\t\tswiperAutoplay: false,\r\n\t\t\tswiperCurrent: 1,\r\n\t\t\tswitchMedia: 'img',\r\n\r\n\t\t\tisIphoneX: false, //判断手机是否是iphoneX以上\r\n\r\n\t\t\tposter: \"-1\", //海报\r\n\t\t\tposterMsg: \"\", //海报错误信息\r\n\t\t\tposterHeight: 0,\r\n\r\n\t\t\t//评价\r\n\t\t\tgoodsEvaluate: {\r\n\t\t\t\tmember_headimg: '',\r\n\t\t\t\tmember_name: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tcreate_time: 0,\r\n\t\t\t\tsku_name: ''\r\n\t\t\t},\r\n\t\t\tmemberId: 0,\r\n\t\t\tcontactData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tpath: '',\r\n\t\t\t\timg: ''\r\n\t\t\t},\r\n\t\t\tdetailTab: 0,\r\n\t\t\tservice: null,\r\n\t\t\tshowKefu: 0,\r\n\t\t\t// 是否可分享到好物圈\r\n\t\t\tgoodsCircle: false,\r\n\t\t\tevaluateConfig: {\r\n\t\t\t\tevaluate_audit: 1,\r\n\t\t\t\tevaluate_show: 0,\r\n\t\t\t\tevaluate_status: 1\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(data) {\r\n\t\tthis.seckill_id = data.seckill_id || 0;\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX()\r\n\t\tif (data.source_member) uni.setStorageSync('source_member', data.source_member);\r\n\t\t// 小程序扫码进入\r\n\t\tif (data.scene) {\r\n\t\t\tvar sceneParams = decodeURIComponent(data.scene);\r\n\t\t\tsceneParams = sceneParams.split('&');\r\n\t\t\tif (sceneParams.length) {\r\n\t\t\t\tsceneParams.forEach(item => {\r\n\t\t\t\t\tif (item.indexOf('seckill_id') != -1) this.seckill_id = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('source_member') != -1) uni.setStorageSync('source_member', item.split('-')[1]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t// this.getService();\r\n\t},\r\n\tasync onShow() {\r\n\t\tthis.$store.dispatch('getAddonIsexit').then(async (data) => {\r\n\t\t\tif (!data.seckill) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '秒杀未开启',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\t// 刷新多语言\r\n\t\t\t\tthis.$langConfig.refresh();\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getCartCount();\r\n\t\t\t\t\tthis.getMemberId();\r\n\t\t\t\t}\r\n\t\t\t\tthis.canGoConnect()\r\n\t\t\t\tthis.getKekuConfig();\r\n\t\t\t\t//同步获取商品详情\r\n\t\t\t\tawait this.getGoodsSkuDetail();\r\n\r\n\t\t\t\t//修改商品信息\r\n\t\t\t\tthis.modifyGoodsInfo();\r\n\r\n\t\t\t\t// 评价设置\r\n\t\t\t\tthis.getEvaluateConfig();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t},\r\n\tmethods: {\r\n\t\tcanGoConnect() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/addon/addonisexit\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tthis.showKefu = res.data.servicer;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//联系客服\r\n\t\tgoConnect() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tsite_id: this.shopInfo.site_id,\r\n\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id,\r\n\t\t\t\t\ttype: 'seckill',\r\n\t\t\t\t\ttype_id: this.goodsSkuDetail.seckill_id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.redirectTo('/otherpages/chat/room/room', data)\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/seckill/detail/detail?seckill_id=' + this.seckill_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取秒杀商品详情\r\n\t\tasync getGoodsSkuDetail() {\r\n\t\t\tlet res = await this.$api.sendRequest({\r\n\t\t\t\turl: '/seckill/api/seckillgoods/detail',\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tseckill_id: this.seckill_id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tlet data = res.data;\r\n\t\t\tif (data.goods_sku_detail != null) {\r\n\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\tthis.shopInfo = data.shop_info;\r\n\t\t\t\tthis.skuId = this.goodsSkuDetail.sku_id;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.goods_service = [];\r\n\t\t\t\tif (this.shopInfo.shop_baozh == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '保证服务',\r\n\t\t\t\t\t\tdesc: '保证服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_qtian == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '7天退换',\r\n\t\t\t\t\t\tdesc: '满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_zhping == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '正品保障',\r\n\t\t\t\t\t\tdesc: '商品支持正品保障服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_erxiaoshi == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '两小时发货',\r\n\t\t\t\t\t\tdesc: '付款后2小时内发货'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_tuihuo == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '退货承诺',\r\n\t\t\t\t\t\tdesc: '退货承诺'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiyong == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '试用中心',\r\n\t\t\t\t\t\tdesc: '试用中心'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiti == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '实体验证',\r\n\t\t\t\t\t\tdesc: '实体验证'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_xiaoxie == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '消协保证',\r\n\t\t\t\t\t\tdesc: '如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet time = new Date(res.timestamp * 1000);\r\n\t\t\t\tlet currentTime = time.getHours() * 60 * 60 + time.getMinutes() * 60 + time.getSeconds();\r\n\t\t\t\tif (this.goodsSkuDetail.seckill_start_time <= currentTime && currentTime < this.goodsSkuDetail.seckill_end_time) {\r\n\t\t\t\t\tthis.goodsSkuDetail.discountTimeMachine = this.$util.countDown(this.goodsSkuDetail.seckill_end_time - currentTime);\r\n\t\t\t\t} else if (this.goodsSkuDetail.seckill_start_time > currentTime && currentTime < this.goodsSkuDetail.seckill_end_time) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"限时秒杀活动还未开始\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t} else if (currentTime < this.goodsSkuDetail.seckill_start_time && currentTime > this.goodsSkuDetail.seckill_end_time) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"限时秒杀活动已结束\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsSkuDetail.seckill_price;\r\n\r\n\t\t\t\t//媒体\r\n\t\t\t\tif (this.goodsSkuDetail.video_url) this.switchMedia = \"video\";\r\n\r\n\t\t\t\tif (this.goodsSkuDetail.sku_images) this.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.split(\",\");\r\n\t\t\t\telse this.goodsSkuDetail.sku_images = [];\r\n\r\n\t\t\t\t// 多规格时合并主图\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format && this.goodsSkuDetail.goods_image) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_image = this.goodsSkuDetail.goods_image.split(\",\");\r\n\t\t\t\t\tthis.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.concat(this.goodsSkuDetail.goods_image);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\r\n\t\t\t\tthis.goodsSkuDetail.save_price = (this.goodsSkuDetail.price - this.goodsSkuDetail.seckill_price) > 0 ? (this.goodsSkuDetail\r\n\t\t\t\t\t.price - this.goodsSkuDetail.seckill_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t// 当前商品SKU规格\r\n\t\t\t\tif (this.goodsSkuDetail.sku_spec_format) this.goodsSkuDetail.sku_spec_format = JSON.parse(this.goodsSkuDetail.sku_spec_format);\r\n\r\n\t\t\t\t// 商品属性\r\n\t\t\t\tif (this.goodsSkuDetail.goods_attr_format) {\r\n\t\t\t\t\tlet goods_attr_format = JSON.parse(this.goodsSkuDetail.goods_attr_format);\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format = this.$util.unique(goods_attr_format, \"attr_id\");\r\n\t\t\t\t\tfor (var i = 0; i < this.goodsSkuDetail.goods_attr_format.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < goods_attr_format.length; j++) {\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.goods_attr_format[i].attr_id == goods_attr_format[j].attr_id && this.goodsSkuDetail.goods_attr_format[\r\n\t\t\t\t\t\t\t\t\ti].attr_value_id != goods_attr_format[j].attr_value_id) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format[i].attr_value_name += \"、\" + goods_attr_format[j].attr_value_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 商品SKU格式\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format) this.goodsSkuDetail.goods_spec_format = JSON.parse(this.goodsSkuDetail.goods_spec_format);\r\n\r\n\t\t\t\tthis.$langConfig.title(this.goodsSkuDetail.goods_name);\r\n\r\n\t\t\t\t// 商品详情\r\n\t\t\t\t// if (this.goodsSkuDetail.goods_content) this.goodsSkuDetail.goods_content = htmlParser(this.goodsSkuDetail.goods_content);\r\n\r\n\t\t\t\tthis.contactData = {\r\n\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\tpath: '/promotionpages/seckill/detail/detail?seckill_id=' + this.seckill_id,\r\n\t\t\t\t\timg: this.$util.img(this.goodsSkuDetail.sku_image, {\r\n\t\t\t\t\t\tsize: 'big'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getWhetherCollection();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setWechatShare();\r\n\r\n\t\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\r\n\r\n\t\t\t\tthis.getGoodScircleConfig();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 刷新商品详情数据\r\n\t\t * @param {Object} goodsSkuDetail\r\n\t\t */\r\n\t\trefreshGoodsSkuDetail(goodsSkuDetail) {\r\n\t\t\tObject.assign(this.goodsSkuDetail, goodsSkuDetail);\r\n\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t// 解决轮播图数量不一致时，切换到第一个\r\n\t\t\tif (this.swiperCurrent > this.goodsSkuDetail.sku_images.length) {\r\n\t\t\t\tthis.swiperAutoplay = true;\r\n\t\t\t\tthis.swiperCurrent = 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.swiperAutoplay = false;\r\n\t\t\t\t}, 40);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoHome() {\r\n\t\t\t// this.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: this.shopInfo.site_id\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoCart() {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/cart/cart', {}, 'reLaunch');\r\n\t\t},\r\n\t\t// 秒杀\r\n\t\tseckill() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/seckill/detail/detail?seckill_id=' + this.seckill_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$refs.goodsSku.show(\"seckill\", () => {});\r\n\t\t},\r\n\t\tswiperChange(e) {\r\n\t\t\tthis.swiperCurrent = e.detail.current + 1;\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------服务-------------------------------------\r\n\r\n\t\topenMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.open();\r\n\t\t},\r\n\t\tcloseMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.close();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\t\topenAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.open();\r\n\t\t},\r\n\t\tcloseAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.close();\r\n\t\t},\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\r\n\r\n\t\t//-------------------------------------评价-------------------------------------\r\n\t\t//商品评论列表\r\n\t\tgetGoodsEvaluate() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsevaluate/firstinfo\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.goodsEvaluate = data;\r\n\t\t\t\t\t\tif (this.goodsEvaluate.images) this.goodsEvaluate.images = this.goodsEvaluate.images.split(\",\");\r\n\t\t\t\t\t\tif (this.goodsEvaluate.is_anonymous == 1) this.goodsEvaluate.member_name = this.goodsEvaluate.member_name.replace(\r\n\t\t\t\t\t\t\tthis.goodsEvaluate.member_name.substring(1, this.goodsEvaluate.member_name.length - 1), '***')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 预览评价图片\r\n\t\tpreviewEvaluate(index, field) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsEvaluate[field].length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsEvaluate[field][i]));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------关注-------------------------------------\r\n\r\n\t\t//获取用户是否关注\r\n\t\tgetWhetherCollection() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodscollect/iscollect\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.whetherCollection = res.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teditCollection() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\r\n\t\t\t\t//未关注添加关注\r\n\t\t\t\tif (this.whetherCollection == 0) {\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/add\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//已关注取消关注\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/delete\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/seckill/detail/detail?seckill_id=' + this.seckill_id);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//获取购物车数量\r\n\t\tgetCartCount() {\r\n\t\t\tthis.$store.dispatch('getCartNumber').then((e) => {\r\n\t\t\t\tthis.cartCount = e;\r\n\t\t\t});\r\n\t\t},\r\n\t\t//更新商品信息\r\n\t\tmodifyGoodsInfo() {\r\n\t\t\t//更新商品点击量\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goods/modifyclicks\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tsite_id: this.goodsSkuDetail.site_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\r\n\t\t\t//添加足迹\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsbrowse/add\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------分享-------------------------------------\r\n\t\t// 打开分享弹出层\r\n\t\topenSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.open();\r\n\t\t},\r\n\t\t// 关闭分享弹出层\r\n\t\tcloseSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t},\r\n\t\t//-------------------------------------海报-------------------------------------\r\n\r\n\t\t// 打开海报弹出层\r\n\t\topenPosterPopup() {\r\n\t\t\tthis.getGoodsPoster();\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t\tthis.$refs.posterPopup.open();\r\n\t\t\tif (this.poster != '-1') {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().in(this).select(\".poster-layer .image-wrap\");\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true,\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\tlet posterWhith = data.width;\r\n\t\t\t\t\t\tlet ratio = parseFloat((740 / posterWhith).toFixed(2));\r\n\t\t\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1240 / ratio);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1100 / ratio);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭海报弹出层\r\n\t\tclosePosterPopup() {\r\n\t\t\tthis.$refs.posterPopup.close();\r\n\t\t},\r\n\t\t//生成海报\r\n\t\tgetGoodsPoster() {\r\n\t\t\t//活动海报信息\r\n\t\t\tlet qrcode_param = {\r\n\t\t\t\tid: this.goodsSkuDetail.goods_id\r\n\t\t\t};\r\n\t\t\tif (this.memberId) qrcode_param.source_member = this.memberId;\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/seckill/api/seckillgoods/poster\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage: '/promotionpages/seckill/detail/detail',\r\n\t\t\t\t\tqrcode_param: JSON.stringify(qrcode_param)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.poster = res.data.path + \"?time=\" + new Date().getTime();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.posterMsg = res.message;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tpreviewMedia(index) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsSkuDetail.sku_images.length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsSkuDetail.sku_images[i], {\r\n\t\t\t\t\tsize: 'big'\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\t\tswiperImgError(index) {\r\n\t\t\tthis.goodsSkuDetail.sku_images[index] = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\r\n\t\t//小程序中保存海报\r\n\t\tsaveGoodsPoster() {\r\n\t\t\tlet url = this.$util.img(this.poster);\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存成功\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存失败，请稍后重试\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetMemberId() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/member/id\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.memberId = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//售后保障查询\r\n\t\tgetService() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goods/aftersale',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tlet data = res.data.content;\r\n\t\t\t\t\t\tif (res.data.content) this.service = htmlParser(res.data.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置微信公众号分享\r\n\t\t */\r\n\t\tsetWechatShare() {\r\n\t\t\t// 微信公众号分享\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\t获取是否开启微信圈子 \r\n\t\t */\r\n\t\tgetGoodScircleConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/config/info',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tif (res.data.is_use) {\r\n\t\t\t\t\t\t\tthis.goodsSyncToGoodsCircle()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\t将商品同步到微信圈子 \r\n\t\t */\r\n\t\tgoodsSyncToGoodsCircle() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/goods/sync',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.goodsCircle = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将商品推荐到微信圈子\r\n\t\t */\r\n\t\topenBusinessView() {\r\n\t\t\tif (wx.openBusinessView) {\r\n\t\t\t\twx.openBusinessView({\r\n\t\t\t\t\tbusinessType: 'friendGoodsRecommend',\r\n\t\t\t\t\textraData: {\r\n\t\t\t\t\t\tproduct: {\r\n\t\t\t\t\t\t\titem_code: this.goodsSkuDetail.goods_id,\r\n\t\t\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\t\t\timage_list: this.goodsSkuDetail.sku_images.map((ele) => {\r\n\t\t\t\t\t\t\t\treturn this.$util.img(ele);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('success', res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log('fail', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetEvaluateConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goodsevaluate/config',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tthis.evaluateConfig = data;\r\n\t\t\t\t\t\tif (this.evaluateConfig.evaluate_show == 1) {\r\n\t\t\t\t\t\t\t//商品评论\r\n\t\t\t\t\t\t\tthis.getGoodsEvaluate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcopyUrl() {\r\n\t\t\tlet text = this.$config.h5Domain + '/promotionpages/seckill/detail/detail?seckill_id=' + this.seckill_id;\r\n\t\t\tif (this.memberId) text += '&source_member=' + this.memberId;\r\n\t\t\tthis.$util.copy(text, () => {\r\n\t\t\t\tthis.closeSharePopup();\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetKekuConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/config/servicer',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.kefuConfig = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttoEvaluateDetail(id) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/evaluate/evaluate', {\r\n\t\t\t\tgoods_id: id\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigate(href, e) {\r\n\t\t\t//比如点击a标签，打开某个webview并传输url\r\n\t\t\tthis.$util.redirectTo('/otherpages/webview/webview', {\r\n\t\t\t\tlink: encodeURIComponent(href)\r\n\t\t\t});\r\n\t\t},\r\n\t\t//h5播放视频\r\n\t\topenVideo(url, video_img) {\r\n\t\t\t// this.$refs.videoPopup.open();\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/preview-video', {\r\n\t\t\t\tvideo_url: url,\r\n\t\t\t\tvideo_img: video_img\r\n\t\t\t})\r\n\t\t},\r\n\t\terrorShopLogo() {\r\n\t\t\tthis.shopInfo.avatar = this.$util.getDefaultImage().default_shop_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {\r\n\t\t\t\tis_balance: 0,\r\n\t\t\t\tpay_password: ''\r\n\t\t\t},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\tmember_account: {\r\n\t\t\t\t\tbalance: 0,\r\n\t\t\t\t\tis_pay_password: 0\r\n\t\t\t\t},\r\n\t\t\t\tshop_goods_list: {\r\n\t\t\t\t\tsite_name: '',\r\n\t\t\t\t\texpress_type: [],\r\n\t\t\t\t\tinvoice_config: {\r\n\t\t\t\t\t\tinvoice_status: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tseckill_info: {\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\torderInvoice: {\r\n\t\t\t\tis_invoice: 0, //是否需要发票\r\n\t\t\t\tinvoice_type: 1, //发票类型电子、纸质\r\n\t\t\t\tinvoice_title: '', //发票抬头\r\n\t\t\t\tinvoice_title_type: 1, // 抬头类型\r\n\t\t\t\tinvoice_full_address: '', //邮寄地址\r\n\t\t\t\tis_tax_invoice: 0, //是否需要增值税发票\r\n\t\t\t\tinvoice_email: '', // 邮箱\r\n\t\t\t\tinvoice_content: '', //发票内容\r\n\t\t\t\ttaxpayer_number: '' //纳税人识别号\r\n\t\t\t},\r\n\t\t\tisSub: false,\r\n\t\t\ttempData: null,\r\n\t\t\tsiteDelivery: {\r\n\t\t\t\tsite_id: 0,\r\n\t\t\t\tdata: []\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tif (this.tempData) {\r\n\t\t\t\tObject.assign(this.orderCreateData, this.tempData);\r\n\t\t\t\tObject.assign(this.orderPaymentData, this.tempData);\r\n\t\t\t\tthis.tempData = null;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/seckill/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('seckillOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 获取经纬度\r\n\t\t\tlet location = uni.getStorageSync('location');\r\n\t\t\tif (location) {\r\n\t\t\t\tthis.orderCreateData = Object.assign(this.orderCreateData, location);\r\n\t\t\t}\r\n\r\n\t\t\tthis.orderCreateData.buyer_message = '';\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/seckill/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tthis.handlePaymentData();\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 处理结算订单数据\r\n\t\thandlePaymentData() {\r\n\t\t\tthis.orderCreateData.delivery = {};\r\n\t\t\tthis.orderCreateData.invoice = {};\r\n\t\t\tthis.orderCreateData.is_balance = 0;\r\n\t\t\tthis.orderCreateData.pay_password = '';\r\n\r\n\t\t\tvar data = this.orderPaymentData;\r\n\r\n\t\t\tlet h = new Date().getHours().toString();\r\n\t\t\tlet m = new Date().getMinutes().toString();\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tlet nowTime = h + ':' + m;\r\n\t\t\tvar weeks = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n\r\n\t\t\t// 获取时间，必须是字符串,跟后端一致\r\n\t\t\tlet index_weeks = ['0', '1', '2', '3', '4', '5', '6'];\r\n\t\t\tlet curr_week = index_weeks[new Date().getDay()];\r\n\r\n\t\t\tif (data.shop_goods_list.express_type != undefined && data.shop_goods_list.express_type[0] != undefined) {\r\n\t\t\t\tvar express_type = data.shop_goods_list.express_type;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type = express_type[0].name;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type_name = express_type[0].title;\r\n\t\t\t\tthis.orderCreateData.delivery.store_id = 0;\r\n\r\n\t\t\t\t// 如果默认配送方式是门店配送\r\n\t\t\t\tif (express_type[0].name == 'store') {\r\n\t\t\t\t\tif (express_type[0].store_list[0] != undefined) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.store_id = express_type[0].store_list[0].store_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.is_virtual == 0 && data.shop_goods_list.local_config) {\r\n\r\n\t\t\t\t// 是否显示时间选择\r\n\t\t\t\tif (data.shop_goods_list.local_config.info && data.shop_goods_list.local_config.info.time_is_open == 1) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = true;\r\n\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = nowTime;\r\n\t\t\t\t\t// 当日是否支持配送\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 0 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.length == 7 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.indexOf(curr_week) > -1) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_type == 0) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t} else if (data.shop_goods_list.local_config.info.time_week.length > 0) {\r\n\t\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 7) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = true;\r\n\t\t\t\t\t\t\t// 判断配送时间是连续还是间隔\r\n\t\t\t\t\t\t\tvar timeWeek = data.shop_goods_list.local_config.info.time_week;\r\n\t\t\t\t\t\t\tvar is_interval = false; // 是否间隔\r\n\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((i + 1) < timeWeek.length) {\r\n\t\t\t\t\t\t\t\t\tvar difference = timeWeek[i + 1] - timeWeek[i];\r\n\t\t\t\t\t\t\t\t\tif (difference > 1) {\r\n\t\t\t\t\t\t\t\t\t\tis_interval = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (is_interval) {\r\n\t\t\t\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttemp.push(weeks[timeWeek[i]]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = temp.join(\"、\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = weeks[timeWeek[0]] + \"至\" + weeks[timeWeek[timeWeek.length -\r\n\t\t\t\t\t\t\t\t\t1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未设置配送时间\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// picker组件时间起始\r\n\t\t\t\t\tlet start_time = data.shop_goods_list.local_config.info.start_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.start_time = this.getTimeStr(start_time);\r\n\r\n\t\t\t\t\tlet end_time = data.shop_goods_list.local_config.info.end_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.end_time = this.getTimeStr(end_time);\r\n\r\n\t\t\t\t\tvar current_time = new Date(this.$util.timeStampTurnTime(data.timestamp));\r\n\t\t\t\t\tvar hour = current_time.getHours();\r\n\t\t\t\t\tvar minute = current_time.getMinutes();\r\n\r\n\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t// 检测当天是否能够配送，然后判断送达时间。不在配送时间当日不能下单，例：配送时间是周一到周五，那么周末不能下单，周一到周五可以下单\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif ((hour < start_hour) || (hour == start_hour && minute < start_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = (start_hour.toString().length == 1 ? \"0\" + start_hour :\r\n\t\t\t\t\t\t\t\t\t\tstart_hour) + ':' +\r\n\t\t\t\t\t\t\t\t\t(start_minute.toString().length == 1 ? \"0\" + start_minute : start_minute);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if (((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t// \t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// 当前时间晚于配送时间，送达时间隐藏，不能下单\r\n\t\t\t\t\t\t\tif ((hour > end_hour) || (hour == end_hour && minute > end_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = false;\r\n\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未开启配送时间\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.shop_goods_list.goods_list.forEach((v) => {\r\n\t\t\t\tif (typeof(v.sku_spec_format) == 'string') {\r\n\t\t\t\t\tif (v.sku_spec_format) {\r\n\t\t\t\t\t\tv.sku_spec_format = JSON.parse(v.sku_spec_format);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tv.sku_spec_format = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual) this.orderCreateData.member_address = {\r\n\t\t\t\tmobile: ''\r\n\t\t\t};\r\n\r\n\t\t\tObject.assign(data, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t},\r\n\t\t// 转化时间字符串\r\n\t\tgetTimeStr(val) {\r\n\t\t\tvar h = parseInt(val / 3600).toString();\r\n\t\t\tvar m = parseInt((val % 3600) / 60).toString();\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\treturn h + ':' + m;\r\n\t\t},\r\n\t\t// 订单计算\r\n\t\torderCalculate() {\r\n\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\tvar deliveryObj = {};\r\n\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\tvar messageObj = {};\r\n\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t//店铺发票\r\n\t\t\tif (this.orderPaymentData.shop_goods_list.is_invoice) {\r\n\t\t\t\tthis.orderCreateData.invoice[siteId] = {};\r\n\t\t\t\tif (!Array.isArray(this.orderPaymentData.shop_goods_list.invoice_config)) {\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_invoice = this.orderPaymentData.shop_goods_list.is_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_type = this.orderPaymentData.shop_goods_list.invoice_type;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title = this.orderPaymentData.shop_goods_list.invoice_title;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].taxpayer_number = this.orderPaymentData.shop_goods_list.taxpayer_number;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_content = this.orderPaymentData.shop_goods_list.invoice_content;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_full_address = this.orderPaymentData.shop_goods_list.invoice_full_address;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_tax_invoice = this.orderPaymentData.shop_goods_list.is_tax_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_email = this.orderPaymentData.shop_goods_list.invoice_email;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title_type = this.orderPaymentData.shop_goods_list.invoice_title_type;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/seckill/api/ordercreate/calculate',\r\n\t\t\t\tdata,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData.member_address = res.data.member_address;\r\n\t\t\t\t\t\tthis.orderPaymentData.delivery_money = res.data.delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_money = res.data.invoice_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_delivery_money = res.data.invoice_delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.promotion_money = res.data.promotion_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.order_money = res.data.order_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.balance_money = res.data.balance_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.pay_money = res.data.pay_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.goods_money = res.data.goods_money;\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订单创建\r\n\t\t * @param {String} pay_password 支付密码\r\n\t\t */\r\n\t\torderCreate(pay_password) {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tif (pay_password) this.orderCreateData.pay_password = pay_password;\r\n\r\n\t\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\t\tvar deliveryObj = {};\r\n\t\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\t\tvar messageObj = {};\r\n\t\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/seckill/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.pay_money == 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/pay/result/result', {\r\n\t\t\t\t\t\t\t\t\tcode: res.data\r\n\t\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'seckillOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (this.orderPaymentData.is_virtual == 1) {\r\n\t\t\t\tif (!this.orderCreateData.member_address.mobile.length) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入您的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar reg = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;\r\n\t\t\t\tif (!reg.test(this.orderCreateData.member_address.mobile)) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入正确的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual == 0) {\r\n\r\n\t\t\t\tlet expressTypeVerify = true;\r\n\r\n\t\t\t\tfor (let key in this.orderPaymentData.shop_goods_list) {\r\n\t\t\t\t\tif (this.orderPaymentData.shop_goods_list.express_type.length == 0) {\r\n\t\t\t\t\t\texpressTypeVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!expressTypeVerify) return false;\r\n\r\n\t\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (JSON.stringify(this.orderCreateData.delivery) == \"{}\") {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'store' && this.orderCreateData.delivery.store_id == 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】没有可提货的门店,请选择其他配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'local') {\r\n\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\tvar hour = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar minute = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间\r\n\t\t\t\t\t\t\tif (((hour < start_hour) || (hour == start_hour && minute < start_minute))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间不能小于配送开始时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 当前时间在配送时间内，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif (!((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间范围：开始时间~结束时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】已休息'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 显示店铺优惠信息\r\n\t\topenSitePromotion() {\r\n\t\t\tthis.$refs.sitePromotionPopup.open();\r\n\t\t},\r\n\t\t// 显示店铺配送信息\r\n\t\topenSiteDelivery() {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\tthis.$refs.deliveryPopup.open();\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tselectDeliveryType(data) {\r\n\t\t\tthis.orderCreateData.delivery.delivery_type = data.name;\r\n\t\t\tthis.orderCreateData.delivery.delivery_type_name = data.title;\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\t// 如果是门店配送\r\n\t\t\tif (data.name == 'store') {\r\n\t\t\t\tif (data.store_list[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t\tthis.tempData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择自提点\r\n\t\tselectPickupPoint(store_id) {\r\n\t\t\tthis.orderCreateData.delivery.store_id = store_id;\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs['deliveryPopup'].close();\r\n\t\t},\r\n\t\t// 使用余额\r\n\t\tuseBalance() {\r\n\t\t\tif (this.orderCreateData.is_balance) this.orderCreateData.is_balance = 0;\r\n\t\t\telse this.orderCreateData.is_balance = 1;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\timgError(goodsIndex) {\r\n\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[goodsIndex].sku_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//打开发票弹窗\r\n\t\topenInvoicePopup(val) {\r\n\t\t\tthis.orderInvoice = this.$util.deepClone(val);\r\n\t\t\tthis.orderInvoice.invoice_type = this.orderInvoice.invoice_type == undefined ? 1 : this.orderInvoice.invoice_type;\r\n\t\t\tthis.orderInvoice.invoice_title_type = this.orderInvoice.invoice_title_type == undefined ? 1 : this.orderInvoice.invoice_title_type;\r\n\t\t\tthis.orderInvoice.invoice_content = this.orderInvoice.invoice_content ? this.orderInvoice.invoice_content : '';\r\n\t\t\tthis.orderInvoice.invoice_title = this.orderInvoice.invoice_title ? this.orderInvoice.invoice_title : '';\r\n\t\t\tthis.orderInvoice.invoice_full_address = this.orderInvoice.invoice_full_address ? this.orderInvoice.invoice_full_address :\r\n\t\t\t\t''; //邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = this.orderInvoice.is_tax_invoice ? this.orderInvoice.is_tax_invoice : 0; //是否需要增值税发票\r\n\t\t\tthis.orderInvoice.invoice_email = this.orderInvoice.invoice_email ? this.orderInvoice.invoice_email : ''; // 邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = this.orderInvoice.taxpayer_number ? this.orderInvoice.taxpayer_number : ''; //纳税人识别号\r\n\t\t\tthis.openPopup('invoicePopup');\r\n\t\t},\r\n\t\t// 切换发票开关\r\n\t\tchangeIsInvoice() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 0) {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 0;\r\n\t\t\t}\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票类型\r\n\t\tchangeInvoiceType(invoice_type) {\r\n\t\t\tthis.orderInvoice.invoice_type = invoice_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票个人还是企业\r\n\t\tchangeInvoiceTitleType(invoice_title_type) {\r\n\t\t\tthis.orderInvoice.invoice_title_type = invoice_title_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择发票内容\r\n\t\tchangeInvoiceContent(invoice_content) {\r\n\t\t\tthis.orderInvoice.invoice_content = invoice_content;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//关闭发票弹窗\r\n\t\tcloseInvoicePopup() {\r\n\t\t\tthis.orderInvoice.invoice_type = 1; // 发票类型  1 纸质 2 电子\r\n\t\t\tthis.orderInvoice.invoice_title_type = 1; // 抬头类型  1 个人 2 企业\r\n\t\t\tthis.orderInvoice.invoice_content = ''; // 发票内容\r\n\t\t\tthis.orderInvoice.invoice_title = ''; // 发票抬头\r\n\t\t\tthis.orderInvoice.invoice_full_address = ''; // 发票邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = 0; // 是否需要增值税专用发票  0 不需要 1 需要\r\n\t\t\tthis.orderInvoice.invoice_email = ''; //发票邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = ''; //纳税人识别号\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs.invoicePopup.close();\r\n\t\t},\r\n\t\t// 发票验证\r\n\t\tinvoiceVerify() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 1) {\r\n\t\t\t\tif (this.orderInvoice.invoice_title == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票抬头\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_title_type == 2 && this.orderInvoice.taxpayer_number == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写纳税人识别号\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 1 && this.orderInvoice.invoice_full_address == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票邮寄地址\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写邮箱\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email != '') {\r\n\t\t\t\t\tvar reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n\t\t\t\t\tif (!reg.test(this.orderInvoice.invoice_email)) {\r\n\t\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请填写正确的邮箱地址\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_content == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择发票内容\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 保存发票信息\r\n\t\tsaveInvoice() {\r\n\t\t\tif (this.invoiceVerify()) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list = this.orderInvoice;\r\n\t\t\t\tthis.orderCalculate();\r\n\t\t\t\tthis.closePopup('invoicePopup');\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindTimeChange(e) {\r\n\t\t\tlet time = e.target.value;\r\n\t\t\tthis.orderCreateData.delivery[e.currentTarget.dataset.siteid].buyer_ask_delivery_time = time;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\ttoShopDetail(e) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: e\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigateTo(sku_id) {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\tsku_id\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tuni.setStorageSync('paySource', '');\r\n\t\t\tif (this.verify()) this.$refs.choosePaymentPopup.open();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tonHide() {\r\n\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.show();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 余额抵扣\r\n\t\tbalanceDeduct() {\r\n\t\t\tif (this.orderPaymentData.member_account.balance_total <= parseFloat(this.orderPaymentData.order_money).toFixed(2)) {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.member_account.balance_total).toFixed(2);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.order_money).toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t}\r\n\t}\r\n}\r\n","import htmlParser from '@/common/js/html-parser';\r\nimport {\r\n\tWeixin\r\n} from '@/common/js/wx-jssdk.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tskuId: 0,\r\n\t\t\tgroupId: 0,\r\n\t\t\tpintuan_id: 0,\r\n\r\n\t\t\t// 商品详情\r\n\t\t\tgoodsSkuDetail: {\r\n\t\t\t\tgoods_id: 0,\r\n\t\t\t\tgoods_service: []\r\n\t\t\t},\r\n\t\t\t// 店铺详情\r\n\t\t\tshopInfo: {\r\n\t\t\t\tlogo: '',\r\n\t\t\t\tshop_baozh: 0,\r\n\t\t\t\tshop_qtian: 0,\r\n\t\t\t\tshop_zhping: 0,\r\n\t\t\t\tshop_erxiaoshi: 0,\r\n\t\t\t\tshop_tuihuo: 0,\r\n\t\t\t\tshop_shiyong: 0,\r\n\t\t\t\tshop_shiti: 0,\r\n\t\t\t\tshop_xiaoxie: 0\r\n\t\t\t},\r\n\r\n\t\t\tcartCount: 0, // 购物车商品数量\r\n\t\t\twhetherCollection: 0,\r\n\r\n\t\t\t// 媒体,图片,视频\r\n\r\n\t\t\t// 解决每个商品SKU图片数量不同时，无法切换到第一个，导致轮播图显示不出来\r\n\t\t\tswiperInterval: 1,\r\n\t\t\tswiperAutoplay: false,\r\n\t\t\tswiperCurrent: 1,\r\n\t\t\tswitchMedia: 'img',\r\n\r\n\t\t\tisIphoneX: false, //判断手机是否是iphoneX以上\r\n\r\n\t\t\tposter: \"-1\", //海报\r\n\t\t\tposterMsg: \"\", //海报错误信息\r\n\t\t\tposterHeight: 0,\r\n\r\n\t\t\t//评价\r\n\t\t\tgoodsEvaluate: {\r\n\t\t\t\tmember_headimg: '',\r\n\t\t\t\tmember_name: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tcreate_time: 0,\r\n\t\t\t\tsku_name: ''\r\n\t\t\t},\r\n\t\t\tpintuanList: [],\r\n\t\t\tcurrentPintuan: {\r\n\t\t\t\theadimg: '',\r\n\t\t\t\ttimeMachine: {}\r\n\t\t\t},\r\n\t\t\topenPopup: false,\r\n\t\t\tmemberId: 0,\r\n\t\t\tcontactData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tpath: '',\r\n\t\t\t\timg: ''\r\n\t\t\t},\r\n\t\t\tdetailTab: 0,\r\n\t\t\tservice: null,\r\n\t\t\tshowKefu: 0,\r\n\t\t\t// 是否可分享到好物圈\r\n\t\t\tgoodsCircle: false,\r\n\t\t\ttimestamp: '',\r\n\t\t\tnewList: [],\r\n\t\t\tevaluateConfig: {\r\n\t\t\t\tevaluate_audit: 1,\r\n\t\t\t\tevaluate_show: 0,\r\n\t\t\t\tevaluate_status: 1\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(data) {\r\n\t\tthis.pintuan_id = data.pintuan_id || 0;\r\n\t\tthis.groupId = data.group_id || 0;\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t\tif (data.source_member) uni.setStorageSync('source_member', data.source_member);\r\n\t\t// 小程序扫码进入\r\n\t\tif (data.scene) {\r\n\t\t\tvar sceneParams = decodeURIComponent(data.scene);\r\n\t\t\tsceneParams = sceneParams.split('&');\r\n\t\t\tif (sceneParams.length) {\r\n\t\t\t\tsceneParams.forEach(item => {\r\n\t\t\t\t\tif (item.indexOf('pintuan_id') != -1) this.pintuan_id = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('group_id') != -1) this.group_id = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('source_member') != -1) uni.setStorageSync('source_member', item.split('-')[1]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t// this.getService();\r\n\t},\r\n\tasync onShow() {\r\n\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\t\tthis.$store.dispatch('getAddonIsexit').then(async (data) => {\r\n\t\t\tif (!data.pintuan) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '拼团未开启',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getCartCount();\r\n\t\t\t\t\tthis.getMemberId();\r\n\t\t\t\t}\r\n\t\t\t\tthis.canGoConnect();\r\n\t\t\t\tthis.getKekuConfig();\r\n\t\t\t\t//同步获取商品详情\r\n\t\t\t\tawait this.getGoodsSkuDetail();\r\n\r\n\t\t\t\t//修改商品信息\r\n\t\t\t\tthis.modifyGoodsInfo();\r\n\r\n\t\t\t\t// 评价设置\r\n\t\t\t\tthis.getEvaluateConfig();\r\n\r\n\t\t\t\tthis.getPintuanGroupList();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t},\r\n\tmethods: {\r\n\t\tcanGoConnect() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/addon/addonisexit\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tthis.showKefu = res.data.servicer;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//联系客服\r\n\t\tgoConnect() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tsite_id: this.shopInfo.site_id,\r\n\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id,\r\n\t\t\t\t\ttype: 'pintuan',\r\n\t\t\t\t\ttype_id: this.goodsSkuDetail.pintuan_id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.redirectTo('/otherpages/chat/room/room', data)\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/pages/goods/detail/detail?sku_id=' + this.goodsSkuDetail.sku_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取拼团商品详情\r\n\t\tasync getGoodsSkuDetail() {\r\n\t\t\tlet res = await this.$api.sendRequest({\r\n\t\t\t\turl: '/pintuan/api/goods/detail',\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpintuan_id: this.pintuan_id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tlet data = res.data;\r\n\t\t\tif (data.goods_sku_detail != null) {\r\n\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\tthis.shopInfo = data.shop_info;\r\n\t\t\t\tthis.goodsSkuDetail.group_id = this.groupId;\r\n\t\t\t\tthis.skuId = this.goodsSkuDetail.sku_id;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.goods_service = [];\r\n\t\t\t\tif (this.shopInfo.shop_baozh == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '保证服务',\r\n\t\t\t\t\t\tdesc: '保证服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_qtian == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '7天退换',\r\n\t\t\t\t\t\tdesc: '满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_zhping == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '正品保障',\r\n\t\t\t\t\t\tdesc: '商品支持正品保障服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_erxiaoshi == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '两小时发货',\r\n\t\t\t\t\t\tdesc: '付款后2小时内发货'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_tuihuo == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '退货承诺',\r\n\t\t\t\t\t\tdesc: '退货承诺'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiyong == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '试用中心',\r\n\t\t\t\t\t\tdesc: '试用中心'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiti == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '实体验证',\r\n\t\t\t\t\t\tdesc: '实体验证'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_xiaoxie == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '消协保证',\r\n\t\t\t\t\t\tdesc: '如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//砍价倒计时\r\n\t\t\t\tif ((this.goodsSkuDetail.end_time - res.timestamp) > 0) {\r\n\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail.end_time - res.timestamp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"活动已结束\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//拼团倒计时\r\n\t\t\t\tif ((this.goodsSkuDetail.end_time - res.timestamp) > 0) {\r\n\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail.end_time - res.timestamp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"活动已结束\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//媒体\r\n\t\t\t\tif (this.goodsSkuDetail.video_url) this.switchMedia = \"video\";\r\n\r\n\t\t\t\tif (this.goodsSkuDetail.sku_images) this.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.split(\",\");\r\n\t\t\t\telse this.goodsSkuDetail.sku_images = [];\r\n\r\n\t\t\t\t// 多规格时合并主图\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format && this.goodsSkuDetail.goods_image) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_image = this.goodsSkuDetail.goods_image.split(\",\");\r\n\t\t\t\t\tthis.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.concat(this.goodsSkuDetail.goods_image);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\r\n\t\t\t\tthis.goodsSkuDetail.show_price = (this.goodsSkuDetail.group_id == 0 ? this.goodsSkuDetail.promotion_price : this.goodsSkuDetail\r\n\t\t\t\t\t.pintuan_price);\r\n\r\n\t\t\t\tthis.goodsSkuDetail.save_price = (this.goodsSkuDetail.price - this.goodsSkuDetail.show_price) > 0 ? (this.goodsSkuDetail\r\n\t\t\t\t\t.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t// 当前商品SKU规格\r\n\t\t\t\tif (this.goodsSkuDetail.sku_spec_format) this.goodsSkuDetail.sku_spec_format = JSON.parse(this.goodsSkuDetail.sku_spec_format);\r\n\r\n\t\t\t\t// 商品属性\r\n\t\t\t\tif (this.goodsSkuDetail.goods_attr_format) {\r\n\t\t\t\t\tlet goods_attr_format = JSON.parse(this.goodsSkuDetail.goods_attr_format);\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format = this.$util.unique(goods_attr_format, \"attr_id\");\r\n\t\t\t\t\tfor (var i = 0; i < this.goodsSkuDetail.goods_attr_format.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < goods_attr_format.length; j++) {\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.goods_attr_format[i].attr_id == goods_attr_format[j].attr_id && this.goodsSkuDetail.goods_attr_format[\r\n\t\t\t\t\t\t\t\t\ti].attr_value_id != goods_attr_format[j].attr_value_id) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format[i].attr_value_name += \"、\" + goods_attr_format[j].attr_value_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 商品SKU格式\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format) this.goodsSkuDetail.goods_spec_format = JSON.parse(this.goodsSkuDetail.goods_spec_format);\r\n\r\n\t\t\t\tthis.$langConfig.title(this.goodsSkuDetail.goods_name);\r\n\r\n\t\t\t\t// 商品详情\r\n\t\t\t\t// if (this.goodsSkuDetail.goods_content) this.goodsSkuDetail.goods_content = htmlParser(this.goodsSkuDetail.goods_content);\r\n\r\n\t\t\t\tthis.contactData = {\r\n\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\tpath: '/promotionpages/pintuan/detail/detail?pintuan_id=' + this.pintuan_id,\r\n\t\t\t\t\timg: this.$util.img(this.goodsSkuDetail.sku_image, {\r\n\t\t\t\t\t\tsize: 'big'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getWhetherCollection();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setWechatShare();\r\n\r\n\t\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\r\n\r\n\t\t\t\tthis.getGoodScircleConfig();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 刷新商品详情数据\r\n\t\t * @param {Object} goodsSkuDetail\r\n\t\t */\r\n\t\trefreshGoodsSkuDetail(goodsSkuDetail) {\r\n\t\t\tObject.assign(this.goodsSkuDetail, goodsSkuDetail);\r\n\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t// 解决轮播图数量不一致时，切换到第一个\r\n\t\t\tif (this.swiperCurrent > this.goodsSkuDetail.sku_images.length) {\r\n\t\t\t\tthis.swiperAutoplay = true;\r\n\t\t\t\tthis.swiperCurrent = 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.swiperAutoplay = false;\r\n\t\t\t\t}, 40);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoHome() {\r\n\t\t\t// this.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: this.shopInfo.site_id\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoCart() {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/cart/cart', {}, 'reLaunch');\r\n\t\t},\r\n\t\t// 发起拼团\r\n\t\tpintuan(isPromotion = true) {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/pintuan/detail/detail?pintuan_id=' + this.pintuan_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (isPromotion) {\r\n\t\t\t\tthis.resetPrice();\r\n\t\t\t}\r\n\t\t\tthis.$refs.goodsSku.show(\"pintuan\", () => {\r\n\t\t\t\tthis.resetPrice();\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 立即购买\r\n\t\tbuyNow() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/pintuan/detail/detail?pintuan_id=' + this.pintuan_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$refs.goodsSku.show(\"buy_now\", () => {});\r\n\t\t},\r\n\t\tswiperChange(e) {\r\n\t\t\tthis.swiperCurrent = e.detail.current + 1;\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------服务-------------------------------------\r\n\r\n\t\topenMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.open();\r\n\t\t},\r\n\t\tcloseMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.close();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\t\topenAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.open();\r\n\t\t},\r\n\t\tcloseAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.close();\r\n\t\t},\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\r\n\r\n\t\t//-------------------------------------评价-------------------------------------\r\n\t\t//商品评论列表\r\n\t\tgetGoodsEvaluate() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsevaluate/firstinfo\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.goodsEvaluate = data;\r\n\t\t\t\t\t\tif (this.goodsEvaluate.images) this.goodsEvaluate.images = this.goodsEvaluate.images.split(\",\");\r\n\t\t\t\t\t\tif (this.goodsEvaluate.is_anonymous == 1) this.goodsEvaluate.member_name = this.goodsEvaluate.member_name.replace(\r\n\t\t\t\t\t\t\tthis.goodsEvaluate.member_name.substring(1, this.goodsEvaluate.member_name.length - 1), '***')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 预览评价图片\r\n\t\tpreviewEvaluate(index, field) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsEvaluate[field].length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsEvaluate[field][i]));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------关注-------------------------------------\r\n\r\n\t\t//获取用户是否关注\r\n\t\tgetWhetherCollection() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodscollect/iscollect\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.whetherCollection = res.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teditCollection() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\r\n\t\t\t\t//未关注添加关注\r\n\t\t\t\tif (this.whetherCollection == 0) {\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/add\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//已关注取消关注\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/delete\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/pintuan/detail/detail?pintuan_id=' + this.pintuan_id);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//获取购物车数量\r\n\t\tgetCartCount() {\r\n\t\t\tthis.$store.dispatch('getCartNumber').then((e) => {\r\n\t\t\t\tthis.cartCount = e;\r\n\t\t\t});\r\n\t\t},\r\n\t\t//更新商品信息\r\n\t\tmodifyGoodsInfo() {\r\n\t\t\t//更新商品点击量\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goods/modifyclicks\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tsite_id: this.goodsSkuDetail.site_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\r\n\t\t\t//添加足迹\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsbrowse/add\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------分享-------------------------------------\r\n\t\t// 打开分享弹出层\r\n\t\topenSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.open();\r\n\t\t},\r\n\t\t// 关闭分享弹出层\r\n\t\tcloseSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t},\r\n\t\t//-------------------------------------海报-------------------------------------\r\n\r\n\t\t// 打开海报弹出层\r\n\t\topenPosterPopup() {\r\n\t\t\tthis.getGoodsPoster();\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t\tthis.$refs.posterPopup.open();\r\n\t\t\tif (this.poster != '-1') {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().in(this).select(\".poster-layer .image-wrap\");\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true,\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\tlet posterWhith = data.width;\r\n\t\t\t\t\t\tlet ratio = parseFloat((740 / posterWhith).toFixed(2));\r\n\t\t\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1100 / ratio);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1100 / ratio);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭海报弹出层\r\n\t\tclosePosterPopup() {\r\n\t\t\tthis.$refs.posterPopup.close();\r\n\t\t},\r\n\t\t//生成海报\r\n\t\tgetGoodsPoster() {\r\n\t\t\t//活动海报信息\r\n\t\t\tlet qrcode_param = {\r\n\t\t\t\tid: this.goodsSkuDetail.id\r\n\t\t\t};\r\n\t\t\tif (this.memberId) qrcode_param.source_member = this.memberId;\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/pintuan/api/goods/poster\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage: '/promotionpages/pintuan/detail/detail',\r\n\t\t\t\t\tqrcode_param: JSON.stringify(qrcode_param)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.poster = res.data.path + \"?time=\" + new Date().getTime();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.posterMsg = res.message;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tpreviewMedia(index) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsSkuDetail.sku_images.length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsSkuDetail.sku_images[i], {\r\n\t\t\t\t\tsize: 'big'\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 获取拼团组列表\r\n\t\tgetPintuanGroupList() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/pintuan/api/pintuangroup/lists\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tthis.timestamp = res.timestamp\r\n\t\t\t\t\tif (data != null && data.length) {\r\n\t\t\t\t\t\tthis.pintuanList = data;\r\n\t\t\t\t\t\tfor (let i = 0; i < this.pintuanList.length; i++) {\r\n\t\t\t\t\t\t\tif (this.pintuanList[i]['end_time'] > res.timestamp) {\r\n\t\t\t\t\t\t\t\tthis.pintuanList[i].timeMachine = this.$util.countDown(this.pintuanList[i]['end_time'] - res.timestamp);\r\n\t\t\t\t\t\t\t\tthis.pintuanList[i].currentTime = res.timestamp;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.pintuanList[i].timeMachine = null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.newList = this.pintuanList.filter(item => {\r\n\t\t\t\t\t\t\treturn item.end_time > res.timestamp;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//打开拼团弹出框\r\n\t\topenPinTuan(groupId, pintuan_num, time, headimg) {\r\n\t\t\tthis.openPopup = true;\r\n\t\t\tthis.currentPintuan = {\r\n\t\t\t\tgroupId: groupId,\r\n\t\t\t\tpintuan_num: pintuan_num,\r\n\t\t\t\ttimeMachine: this.$util.countDown(time),\r\n\t\t\t\theadimg: headimg\r\n\t\t\t};\r\n\t\t\tthis.$refs.pintuanPopup.open(() => {\r\n\t\t\t\tthis.goodsSkuDetail.group_id = 0;\r\n\t\t\t\tthis.openPopup = false;\r\n\t\t\t});\r\n\t\t},\r\n\t\tclosePinTuanPopup() {\r\n\t\t\tthis.$refs.pintuanPopup.close();\r\n\t\t},\r\n\t\t//参与拼团\r\n\t\tjoinPintuan() {\r\n\t\t\tthis.closePinTuanPopup();\r\n\t\t\tthis.goodsSkuDetail.group_id = this.currentPintuan.groupId;\r\n\t\t\tthis.goodsSkuDetail.show_price = this.goodsSkuDetail.pintuan_price;\r\n\t\t\tthis.goodsSkuDetail.save_price = (this.goodsSkuDetail.price - this.goodsSkuDetail.show_price) > 0 ? (this.goodsSkuDetail\r\n\t\t\t\t.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.pintuan(false);\r\n\t\t},\r\n\t\tswiperImgError(index) {\r\n\t\t\tthis.goodsSkuDetail.sku_images[index] = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\tpintuanImgError(index) {\r\n\t\t\tthis.pintuanList[index].headimg = this.$util.getDefaultImage().default_headimg;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\r\n\t\t//小程序中保存海报\r\n\t\tsaveGoodsPoster() {\r\n\t\t\tlet url = this.$util.img(this.poster);\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存成功\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存失败，请稍后重试\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetMemberId() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/member/id\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.memberId = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//售后保障查询\r\n\t\tgetService() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goods/aftersale',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tlet data = res.data.content;\r\n\t\t\t\t\t\tif (res.data.content) this.service = htmlParser(res.data.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置微信公众号分享\r\n\t\t */\r\n\t\tsetWechatShare() {\r\n\t\t\t// 微信公众号分享\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\t获取是否开启微信圈子 \r\n\t\t */\r\n\t\tgetGoodScircleConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/config/info',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tif (res.data.is_use) {\r\n\t\t\t\t\t\t\tthis.goodsSyncToGoodsCircle()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\t将商品同步到微信圈子 \r\n\t\t */\r\n\t\tgoodsSyncToGoodsCircle() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/goods/sync',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.goodsCircle = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将商品推荐到微信圈子\r\n\t\t */\r\n\t\topenBusinessView() {\r\n\t\t\tif (wx.openBusinessView) {\r\n\t\t\t\twx.openBusinessView({\r\n\t\t\t\t\tbusinessType: 'friendGoodsRecommend',\r\n\t\t\t\t\textraData: {\r\n\t\t\t\t\t\tproduct: {\r\n\t\t\t\t\t\t\titem_code: this.goodsSkuDetail.goods_id,\r\n\t\t\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\t\t\timage_list: this.goodsSkuDetail.sku_images.map((ele) => {\r\n\t\t\t\t\t\t\t\treturn this.$util.img(ele);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('success', res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log('fail', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetEvaluateConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goodsevaluate/config',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tthis.evaluateConfig = data;\r\n\t\t\t\t\t\tif (this.evaluateConfig.evaluate_show == 1) {\r\n\t\t\t\t\t\t\t//商品评论\r\n\t\t\t\t\t\t\tthis.getGoodsEvaluate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcopyUrl() {\r\n\t\t\tlet text = this.$config.h5Domain + '/promotionpages/pintuan/detail/detail?pintuan_id=' + this.pintuan_id +\r\n\t\t\t\t'&group_id=' + this.groupId;\r\n\t\t\tif (this.memberId) text += '&source_member=' + this.memberId;\r\n\t\t\tthis.$util.copy(text, () => {\r\n\t\t\t\tthis.closeSharePopup();\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetKekuConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/config/servicer',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.kefuConfig = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttoEvaluateDetail(id) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/evaluate/evaluate', {\r\n\t\t\t\tgoods_id: id\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigate(href, e) {\r\n\t\t\t//比如点击a标签，打开某个webview并传输url\r\n\t\t\tthis.$util.redirectTo('/otherpages/webview/webview', {\r\n\t\t\t\tlink: encodeURIComponent(href)\r\n\t\t\t});\r\n\t\t},\r\n\t\t//h5播放视频\r\n\t\topenVideo(url, video_img) {\r\n\t\t\t// this.$refs.videoPopup.open();\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/preview-video', {\r\n\t\t\t\tvideo_url: url,\r\n\t\t\t\tvideo_img: video_img\r\n\t\t\t})\r\n\t\t},\r\n\t\terrorShopLogo() {\r\n\t\t\tthis.shopInfo.avatar = this.$util.getDefaultImage().default_shop_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 重置价格\r\n\t\tresetPrice() {\r\n\t\t\tthis.goodsSkuDetail.group_id = 0;\r\n\t\t\tthis.goodsSkuDetail.show_price = this.goodsSkuDetail.promotion_price;\r\n\t\t\tthis.goodsSkuDetail.save_price = (this.goodsSkuDetail.price - this.goodsSkuDetail.show_price) > 0 ? (this.goodsSkuDetail\r\n\t\t\t\t.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {\r\n\t\t\t\tis_balance: 0,\r\n\t\t\t\tpay_password: ''\r\n\t\t\t},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\tmember_account: {\r\n\t\t\t\t\tbalance: 0,\r\n\t\t\t\t\tis_pay_password: 0\r\n\t\t\t\t},\r\n\t\t\t\tshop_goods_list: {\r\n\t\t\t\t\tsite_name: '',\r\n\t\t\t\t\texpress_type: [],\r\n\t\t\t\t\tinvoice_config: {\r\n\t\t\t\t\t\tinvoice_status: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tpintuan_info: {},\r\n\t\t\t\tpintuan_group_info: {},\r\n\t\t\t},\r\n\t\t\torderInvoice: {\r\n\t\t\t\tis_invoice: 0, //是否需要发票\r\n\t\t\t\tinvoice_type: 1, //发票类型电子、纸质\r\n\t\t\t\tinvoice_title: '', //发票抬头\r\n\t\t\t\tinvoice_title_type: 1, // 抬头类型\r\n\t\t\t\tinvoice_full_address: '', //邮寄地址\r\n\t\t\t\tis_tax_invoice: 0, //是否需要增值税发票\r\n\t\t\t\tinvoice_email: '', // 邮箱\r\n\t\t\t\tinvoice_content: '', //发票内容\r\n\t\t\t\ttaxpayer_number: '' //纳税人识别号\r\n\t\t\t},\r\n\t\t\tisSub: false,\r\n\t\t\ttempData: null,\r\n\t\t\tsiteDelivery: {\r\n\t\t\t\tsite_id: 0,\r\n\t\t\t\tdata: []\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tif (this.tempData) {\r\n\t\t\t\tObject.assign(this.orderCreateData, this.tempData);\r\n\t\t\t\tObject.assign(this.orderPaymentData, this.tempData);\r\n\t\t\t\tthis.tempData = null;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/pintuan/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('pintuanOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 获取经纬度\r\n\t\t\tlet location = uni.getStorageSync('location');\r\n\t\t\tif (location) {\r\n\t\t\t\tthis.orderCreateData = Object.assign(this.orderCreateData, location);\r\n\t\t\t}\r\n\r\n\t\t\tthis.orderCreateData.buyer_message = '';\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/pintuan/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tthis.handlePaymentData();\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 处理结算订单数据\r\n\t\thandlePaymentData() {\r\n\t\t\tthis.orderCreateData.delivery = {};\r\n\t\t\tthis.orderCreateData.invoice = {};\r\n\t\t\tthis.orderCreateData.is_balance = 0;\r\n\t\t\tthis.orderCreateData.pay_password = '';\r\n\r\n\t\t\tfor (var i = 0; i < this.orderPaymentData.shop_goods_list.goods_list.length; i++) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[i].goods_image = this.orderPaymentData.shop_goods_list.goods_list[\r\n\t\t\t\t\ti].goods_image ? this.orderPaymentData.shop_goods_list.goods_list[i].goods_image.split(\",\")[0] : '';\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.orderPaymentData;\r\n\r\n\t\t\tlet h = new Date().getHours().toString();\r\n\t\t\tlet m = new Date().getMinutes().toString();\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tlet nowTime = h + ':' + m;\r\n\t\t\tvar weeks = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n\r\n\t\t\t// 获取时间，必须是字符串,跟后端一致\r\n\t\t\tlet index_weeks = ['0', '1', '2', '3', '4', '5', '6'];\r\n\t\t\tlet curr_week = index_weeks[new Date().getDay()];\r\n\r\n\t\t\tif (data.shop_goods_list.express_type != undefined && data.shop_goods_list.express_type[0] != undefined) {\r\n\t\t\t\tvar express_type = data.shop_goods_list.express_type;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type = express_type[0].name;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type_name = express_type[0].title;\r\n\t\t\t\tthis.orderCreateData.delivery.store_id = 0;\r\n\r\n\t\t\t\t// 如果默认配送方式是门店配送\r\n\t\t\t\tif (express_type[0].name == 'store') {\r\n\t\t\t\t\tif (express_type[0].store_list[0] != undefined) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.store_id = express_type[0].store_list[0].store_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.is_virtual == 0 && data.shop_goods_list.local_config) {\r\n\r\n\t\t\t\t// 是否显示时间选择\r\n\t\t\t\tif (data.shop_goods_list.local_config.info && data.shop_goods_list.local_config.info.time_is_open == 1) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = true;\r\n\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = nowTime;\r\n\t\t\t\t\t// 当日是否支持配送\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 0 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.length == 7 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.indexOf(curr_week) > -1) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_type == 0) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t} else if (data.shop_goods_list.local_config.info.time_week.length > 0) {\r\n\t\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 7) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = true;\r\n\t\t\t\t\t\t\t// 判断配送时间是连续还是间隔\r\n\t\t\t\t\t\t\tvar timeWeek = data.shop_goods_list.local_config.info.time_week;\r\n\t\t\t\t\t\t\tvar is_interval = false; // 是否间隔\r\n\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((i + 1) < timeWeek.length) {\r\n\t\t\t\t\t\t\t\t\tvar difference = timeWeek[i + 1] - timeWeek[i];\r\n\t\t\t\t\t\t\t\t\tif (difference > 1) {\r\n\t\t\t\t\t\t\t\t\t\tis_interval = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (is_interval) {\r\n\t\t\t\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttemp.push(weeks[timeWeek[i]]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = temp.join(\"、\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = weeks[timeWeek[0]] + \"至\" + weeks[timeWeek[timeWeek.length -\r\n\t\t\t\t\t\t\t\t\t1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未设置配送时间\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// picker组件时间起始\r\n\t\t\t\t\tlet start_time = data.shop_goods_list.local_config.info.start_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.start_time = this.getTimeStr(start_time);\r\n\r\n\t\t\t\t\tlet end_time = data.shop_goods_list.local_config.info.end_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.end_time = this.getTimeStr(end_time);\r\n\r\n\t\t\t\t\tvar current_time = new Date(this.$util.timeStampTurnTime(data.timestamp));\r\n\t\t\t\t\tvar hour = current_time.getHours();\r\n\t\t\t\t\tvar minute = current_time.getMinutes();\r\n\r\n\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t// 检测当天是否能够配送，然后判断送达时间。不在配送时间当日不能下单，例：配送时间是周一到周五，那么周末不能下单，周一到周五可以下单\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif ((hour < start_hour) || (hour == start_hour && minute < start_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = (start_hour.toString().length == 1 ? \"0\" + start_hour :\r\n\t\t\t\t\t\t\t\t\t\tstart_hour) + ':' +\r\n\t\t\t\t\t\t\t\t\t(start_minute.toString().length == 1 ? \"0\" + start_minute : start_minute);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if (((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t// \t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// 当前时间晚于配送时间，送达时间隐藏，不能下单\r\n\t\t\t\t\t\t\tif ((hour > end_hour) || (hour == end_hour && minute > end_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = false;\r\n\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未开启配送时间\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.shop_goods_list.goods_list.forEach((v) => {\r\n\t\t\t\tif (typeof(v.sku_spec_format) == 'string') {\r\n\t\t\t\t\tif (v.sku_spec_format) {\r\n\t\t\t\t\t\tv.sku_spec_format = JSON.parse(v.sku_spec_format);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tv.sku_spec_format = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual) this.orderCreateData.member_address = {\r\n\t\t\t\tmobile: ''\r\n\t\t\t};\r\n\r\n\t\t\tObject.assign(data, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t},\r\n\t\t// 转化时间字符串\r\n\t\tgetTimeStr(val) {\r\n\t\t\tvar h = parseInt(val / 3600).toString();\r\n\t\t\tvar m = parseInt((val % 3600) / 60).toString();\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\treturn h + ':' + m;\r\n\t\t},\r\n\t\t// 订单计算\r\n\t\torderCalculate() {\r\n\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\tvar deliveryObj = {};\r\n\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\tvar messageObj = {};\r\n\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t//店铺发票\r\n\t\t\tif (this.orderPaymentData.shop_goods_list.is_invoice) {\r\n\t\t\t\tthis.orderCreateData.invoice[siteId] = {};\r\n\t\t\t\tif (!Array.isArray(this.orderPaymentData.shop_goods_list.invoice_config)) {\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_invoice = this.orderPaymentData.shop_goods_list.is_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_type = this.orderPaymentData.shop_goods_list.invoice_type;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title = this.orderPaymentData.shop_goods_list.invoice_title;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].taxpayer_number = this.orderPaymentData.shop_goods_list.taxpayer_number;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_content = this.orderPaymentData.shop_goods_list.invoice_content;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_full_address = this.orderPaymentData.shop_goods_list.invoice_full_address;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_tax_invoice = this.orderPaymentData.shop_goods_list.is_tax_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_email = this.orderPaymentData.shop_goods_list.invoice_email;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title_type = this.orderPaymentData.shop_goods_list.invoice_title_type;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/pintuan/api/ordercreate/calculate',\r\n\t\t\t\tdata,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData.member_address = res.data.member_address;\r\n\t\t\t\t\t\tthis.orderPaymentData.delivery_money = res.data.delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_money = res.data.invoice_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_delivery_money = res.data.invoice_delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.promotion_money = res.data.promotion_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.order_money = res.data.order_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.balance_money = res.data.balance_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.pay_money = res.data.pay_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.goods_money = res.data.goods_money;\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订单创建\r\n\t\t * @param {String} pay_password 支付密码\r\n\t\t */\r\n\t\torderCreate(pay_password) {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tif (pay_password) this.orderCreateData.pay_password = pay_password;\r\n\r\n\t\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\t\tvar deliveryObj = {};\r\n\t\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\t\tvar messageObj = {};\r\n\t\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/pintuan/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.pay_money == 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/pay/result/result', {\r\n\t\t\t\t\t\t\t\t\tcode: res.data\r\n\t\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'pintuanOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (this.orderPaymentData.is_virtual == 1) {\r\n\t\t\t\tif (!this.orderCreateData.member_address.mobile.length) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入您的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar reg = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;\r\n\t\t\t\tif (!reg.test(this.orderCreateData.member_address.mobile)) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入正确的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual == 0) {\r\n\r\n\t\t\t\tlet expressTypeVerify = true;\r\n\r\n\t\t\t\tfor (let key in this.orderPaymentData.shop_goods_list) {\r\n\t\t\t\t\tif (this.orderPaymentData.shop_goods_list.express_type.length == 0) {\r\n\t\t\t\t\t\texpressTypeVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!expressTypeVerify) return false;\r\n\r\n\t\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (JSON.stringify(this.orderCreateData.delivery) == \"{}\") {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'store' && this.orderCreateData.delivery.store_id == 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】没有可提货的门店,请选择其他配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'local') {\r\n\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\tvar hour = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar minute = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间\r\n\t\t\t\t\t\t\tif (((hour < start_hour) || (hour == start_hour && minute < start_minute))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间不能小于配送开始时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 当前时间在配送时间内，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif (!((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间范围：开始时间~结束时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】已休息'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 显示店铺优惠信息\r\n\t\topenSitePromotion() {\r\n\t\t\tthis.$refs.sitePromotionPopup.open();\r\n\t\t},\r\n\t\t// 显示店铺配送信息\r\n\t\topenSiteDelivery() {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\tthis.$refs.deliveryPopup.open();\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tselectDeliveryType(data) {\r\n\t\t\tthis.orderCreateData.delivery.delivery_type = data.name;\r\n\t\t\tthis.orderCreateData.delivery.delivery_type_name = data.title;\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\t// 如果是门店配送\r\n\t\t\tif (data.name == 'store') {\r\n\t\t\t\tif (data.store_list[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t\tthis.tempData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择自提点\r\n\t\tselectPickupPoint(store_id) {\r\n\t\t\tthis.orderCreateData.delivery.store_id = store_id;\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs['deliveryPopup'].close();\r\n\t\t},\r\n\t\t// 使用余额\r\n\t\tuseBalance() {\r\n\t\t\tif (this.orderCreateData.is_balance) this.orderCreateData.is_balance = 0;\r\n\t\t\telse this.orderCreateData.is_balance = 1;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\timgError(goodsIndex) {\r\n\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[goodsIndex].goods_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//打开发票弹窗\r\n\t\topenInvoicePopup(val) {\r\n\t\t\tthis.orderInvoice = this.$util.deepClone(val);\r\n\t\t\tthis.orderInvoice.invoice_type = this.orderInvoice.invoice_type == undefined ? 1 : this.orderInvoice.invoice_type;\r\n\t\t\tthis.orderInvoice.invoice_title_type = this.orderInvoice.invoice_title_type == undefined ? 1 : this.orderInvoice.invoice_title_type;\r\n\t\t\tthis.orderInvoice.invoice_content = this.orderInvoice.invoice_content ? this.orderInvoice.invoice_content : '';\r\n\t\t\tthis.orderInvoice.invoice_title = this.orderInvoice.invoice_title ? this.orderInvoice.invoice_title : '';\r\n\t\t\tthis.orderInvoice.invoice_full_address = this.orderInvoice.invoice_full_address ? this.orderInvoice.invoice_full_address :\r\n\t\t\t\t''; //邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = this.orderInvoice.is_tax_invoice ? this.orderInvoice.is_tax_invoice : 0; //是否需要增值税发票\r\n\t\t\tthis.orderInvoice.invoice_email = this.orderInvoice.invoice_email ? this.orderInvoice.invoice_email : ''; // 邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = this.orderInvoice.taxpayer_number ? this.orderInvoice.taxpayer_number : ''; //纳税人识别号\r\n\t\t\tthis.openPopup('invoicePopup');\r\n\t\t},\r\n\t\t// 切换发票开关\r\n\t\tchangeIsInvoice() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 0) {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 0;\r\n\t\t\t}\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票类型\r\n\t\tchangeInvoiceType(invoice_type) {\r\n\t\t\tthis.orderInvoice.invoice_type = invoice_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票个人还是企业\r\n\t\tchangeInvoiceTitleType(invoice_title_type) {\r\n\t\t\tthis.orderInvoice.invoice_title_type = invoice_title_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择发票内容\r\n\t\tchangeInvoiceContent(invoice_content) {\r\n\t\t\tthis.orderInvoice.invoice_content = invoice_content;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//关闭发票弹窗\r\n\t\tcloseInvoicePopup() {\r\n\t\t\tthis.orderInvoice.invoice_type = 1; // 发票类型  1 纸质 2 电子\r\n\t\t\tthis.orderInvoice.invoice_title_type = 1; // 抬头类型  1 个人 2 企业\r\n\t\t\tthis.orderInvoice.invoice_content = ''; // 发票内容\r\n\t\t\tthis.orderInvoice.invoice_title = ''; // 发票抬头\r\n\t\t\tthis.orderInvoice.invoice_full_address = ''; // 发票邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = 0; // 是否需要增值税专用发票  0 不需要 1 需要\r\n\t\t\tthis.orderInvoice.invoice_email = ''; //发票邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = ''; //纳税人识别号\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs.invoicePopup.close();\r\n\t\t},\r\n\t\t// 发票验证\r\n\t\tinvoiceVerify() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 1) {\r\n\t\t\t\tif (this.orderInvoice.invoice_title == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票抬头\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_title_type == 2 && this.orderInvoice.taxpayer_number == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写纳税人识别号\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 1 && this.orderInvoice.invoice_full_address == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票邮寄地址\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写邮箱\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email != '') {\r\n\t\t\t\t\tvar reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n\t\t\t\t\tif (!reg.test(this.orderInvoice.invoice_email)) {\r\n\t\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请填写正确的邮箱地址\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_content == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择发票内容\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 保存发票信息\r\n\t\tsaveInvoice() {\r\n\t\t\tif (this.invoiceVerify()) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list = this.orderInvoice;\r\n\t\t\t\tthis.orderCalculate();\r\n\t\t\t\tthis.closePopup('invoicePopup');\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindTimeChange(e) {\r\n\t\t\tlet time = e.target.value;\r\n\t\t\tthis.orderCreateData.delivery[e.currentTarget.dataset.siteid].buyer_ask_delivery_time = time;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\ttoShopDetail(e) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: e\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigateTo(sku_id) {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\tsku_id\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tuni.setStorageSync('paySource', '');\r\n\t\t\tif (this.verify()) this.$refs.choosePaymentPopup.open();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tonHide() {\r\n\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.show();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 余额抵扣\r\n\t\tbalanceDeduct() {\r\n\t\t\tif (this.orderPaymentData.member_account.balance_total <= parseFloat(this.orderPaymentData.order_money).toFixed(2)) {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.member_account.balance_total).toFixed(2);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.order_money).toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t}\r\n\t}\r\n}\r\n","import htmlParser from '@/common/js/html-parser';\r\nimport {\r\n\tWeixin\r\n} from '@/common/js/wx-jssdk.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbargain_id: 0,\r\n\t\t\tskuId: 0,\r\n\r\n\t\t\t// 商品详情\r\n\t\t\tgoodsSkuDetail: {\r\n\t\t\t\tgoods_id: 0,\r\n\t\t\t\tgoods_service: []\r\n\t\t\t},\r\n\t\t\t// 店铺详情\r\n\t\t\tshopInfo: {\r\n\t\t\t\tlogo: '',\r\n\t\t\t\tshop_baozh: 0,\r\n\t\t\t\tshop_qtian: 0,\r\n\t\t\t\tshop_zhping: 0,\r\n\t\t\t\tshop_erxiaoshi: 0,\r\n\t\t\t\tshop_tuihuo: 0,\r\n\t\t\t\tshop_shiyong: 0,\r\n\t\t\t\tshop_shiti: 0,\r\n\t\t\t\tshop_xiaoxie: 0\r\n\t\t\t},\r\n\r\n\t\t\tcartCount: 0, // 购物车商品数量\r\n\t\t\twhetherCollection: 0,\r\n\r\n\t\t\t// 媒体,图片,视频\r\n\r\n\t\t\t// 解决每个商品SKU图片数量不同时，无法切换到第一个，导致轮播图显示不出来\r\n\t\t\tswiperInterval: 1,\r\n\t\t\tswiperAutoplay: false,\r\n\t\t\tswiperCurrent: 1,\r\n\t\t\tswitchMedia: 'img',\r\n\r\n\t\t\tisIphoneX: false, //判断手机是否是iphoneX以上\r\n\r\n\t\t\tposter: \"-1\", //海报\r\n\t\t\tposterMsg: \"\", //海报错误信息\r\n\t\t\tposterHeight: 0,\r\n\r\n\t\t\t//评价\r\n\t\t\tgoodsEvaluate: {\r\n\t\t\t\tmember_headimg: '',\r\n\t\t\t\tmember_name: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tcreate_time: 0,\r\n\t\t\t\tsku_name: ''\r\n\t\t\t},\r\n\t\t\tmemberId: 0,\r\n\t\t\tcontactData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tpath: '',\r\n\t\t\t\timg: ''\r\n\t\t\t},\r\n\t\t\tdetailTab: 0,\r\n\t\t\tservice: null,\r\n\t\t\tshowKefu: 0,\r\n\t\t\t// 是否可分享到好物圈\r\n\t\t\tgoodsCircle: false,\r\n\t\t\tevaluateConfig: {\r\n\t\t\t\tevaluate_audit: 1,\r\n\t\t\t\tevaluate_show: 0,\r\n\t\t\t\tevaluate_status: 1\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(data) {\r\n\t\tthis.bargain_id = data.bargain_id || 0;\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t\tif (data.source_member) uni.setStorageSync('source_member', data.source_member);\r\n\t\t// 小程序扫码进入\r\n\t\tif (data.scene) {\r\n\t\t\tvar sceneParams = decodeURIComponent(data.scene);\r\n\t\t\tsceneParams = sceneParams.split('&');\r\n\t\t\tif (sceneParams.length) {\r\n\t\t\t\tsceneParams.forEach(item => {\r\n\t\t\t\t\tif (item.indexOf('bargain_id') != -1) this.bargain_id = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('source_member') != -1) uni.setStorageSync('source_member', item.split('-')[1]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t// this.getService();\r\n\t},\r\n\tasync onShow() {\r\n\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tthis.$store.dispatch('getAddonIsexit').then(async (data) => {\r\n\t\t\tif (!data.bargain) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '砍价未开启',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getCartCount();\r\n\t\t\t\t\tthis.getMemberId();\r\n\t\t\t\t}\r\n\t\t\t\tthis.canGoConnect();\r\n\t\t\t\tthis.getKekuConfig();\r\n\t\t\t\t//同步获取商品详情\r\n\t\t\t\tawait this.getGoodsSkuDetail();\r\n\r\n\t\t\t\t//修改商品信息\r\n\t\t\t\tthis.modifyGoodsInfo();\r\n\r\n\t\t\t\t// 评价设置\r\n\t\t\t\tthis.getEvaluateConfig();\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tcanGoConnect() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/addon/addonisexit\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tthis.showKefu = res.data.servicer;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//联系客服\r\n\t\tgoConnect() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tsite_id: this.shopInfo.site_id,\r\n\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id,\r\n\t\t\t\t\ttype: 'bargain',\r\n\t\t\t\t\ttype_id: this.goodsSkuDetail.bargain_id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.redirectTo('/otherpages/chat/room/room', data)\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/pages/goods/detail/detail?sku_id=' + this.goodsSkuDetail.sku_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取砍价商品详情\r\n\t\tasync getGoodsSkuDetail() {\r\n\t\t\tlet res = await this.$api.sendRequest({\r\n\t\t\t\turl: '/bargain/api/goods/detail',\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tbargain_id: this.bargain_id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tlet data = res.data;\r\n\t\t\tif (data.goods_sku_detail != null) {\r\n\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\tthis.shopInfo = data.shop_info;\r\n\t\t\t\tthis.goodsSkuDetail.stock = this.goodsSkuDetail.bargain_stock;\r\n\r\n\t\t\t\tthis.skuId = this.goodsSkuDetail.sku_id;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.goods_service = [];\r\n\t\t\t\tif (this.shopInfo.shop_baozh == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '保证服务',\r\n\t\t\t\t\t\tdesc: '保证服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_qtian == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '7天退换',\r\n\t\t\t\t\t\tdesc: '满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_zhping == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '正品保障',\r\n\t\t\t\t\t\tdesc: '商品支持正品保障服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_erxiaoshi == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '两小时发货',\r\n\t\t\t\t\t\tdesc: '付款后2小时内发货'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_tuihuo == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '退货承诺',\r\n\t\t\t\t\t\tdesc: '退货承诺'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiyong == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '试用中心',\r\n\t\t\t\t\t\tdesc: '试用中心'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiti == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '实体验证',\r\n\t\t\t\t\t\tdesc: '实体验证'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_xiaoxie == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '消协保证',\r\n\t\t\t\t\t\tdesc: '如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//砍价倒计时\r\n\t\t\t\tif ((this.goodsSkuDetail.end_time - res.timestamp) > 0) {\r\n\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail.end_time - res.timestamp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"活动已结束\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//媒体\r\n\t\t\t\tif (this.goodsSkuDetail.video_url) this.switchMedia = \"video\";\r\n\r\n\t\t\t\tif (this.goodsSkuDetail.sku_images) this.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.split(\",\");\r\n\t\t\t\telse this.goodsSkuDetail.sku_images = [];\r\n\r\n\t\t\t\t// 多规格时合并主图\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format && this.goodsSkuDetail.goods_image) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_image = this.goodsSkuDetail.goods_image.split(\",\");\r\n\t\t\t\t\tthis.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.concat(this.goodsSkuDetail.goods_image);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\r\n\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsSkuDetail.floor_price;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.save_price = (this.goodsSkuDetail.price - this.goodsSkuDetail.show_price) > 0 ? (this.goodsSkuDetail\r\n\t\t\t\t\t.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t// 当前商品SKU规格\r\n\t\t\t\tif (this.goodsSkuDetail.sku_spec_format) this.goodsSkuDetail.sku_spec_format = JSON.parse(this.goodsSkuDetail.sku_spec_format);\r\n\r\n\t\t\t\t// 商品属性\r\n\t\t\t\tif (this.goodsSkuDetail.goods_attr_format) {\r\n\t\t\t\t\tlet goods_attr_format = JSON.parse(this.goodsSkuDetail.goods_attr_format);\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format = this.$util.unique(goods_attr_format, \"attr_id\");\r\n\t\t\t\t\tfor (var i = 0; i < this.goodsSkuDetail.goods_attr_format.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < goods_attr_format.length; j++) {\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.goods_attr_format[i].attr_id == goods_attr_format[j].attr_id && this.goodsSkuDetail.goods_attr_format[\r\n\t\t\t\t\t\t\t\t\ti].attr_value_id != goods_attr_format[j].attr_value_id) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format[i].attr_value_name += \"、\" + goods_attr_format[j].attr_value_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 商品SKU格式\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format) this.goodsSkuDetail.goods_spec_format = JSON.parse(this.goodsSkuDetail.goods_spec_format);\r\n\r\n\t\t\t\tthis.$langConfig.title(this.goodsSkuDetail.goods_name);\r\n\r\n\t\t\t\t// 商品详情\r\n\t\t\t\t// if (this.goodsSkuDetail.goods_content) this.goodsSkuDetail.goods_content = htmlParser(this.goodsSkuDetail.goods_content);\r\n\r\n\t\t\t\tthis.contactData = {\r\n\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\tpath: '/promotionpages/bargain/detail/detail?bargain_id=' + this.bargain_id,\r\n\t\t\t\t\timg: this.$util.img(this.goodsSkuDetail.sku_image, {\r\n\t\t\t\t\t\tsize: 'big'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getWhetherCollection();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setWechatShare();\r\n\r\n\t\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\r\n\r\n\t\t\t\tthis.getGoodScircleConfig();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 刷新商品详情数据\r\n\t\t * @param {Object} goodsSkuDetail\r\n\t\t */\r\n\t\trefreshGoodsSkuDetail(goodsSkuDetail) {\r\n\t\t\tObject.assign(this.goodsSkuDetail, goodsSkuDetail);\r\n\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t// 解决轮播图数量不一致时，切换到第一个\r\n\t\t\tif (this.swiperCurrent > this.goodsSkuDetail.sku_images.length) {\r\n\t\t\t\tthis.swiperAutoplay = true;\r\n\t\t\t\tthis.swiperCurrent = 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.swiperAutoplay = false;\r\n\t\t\t\t}, 40);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoHome() {\r\n\t\t\t// this.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: this.shopInfo.site_id\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoCart() {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/cart/cart', {}, 'reLaunch');\r\n\t\t},\r\n\t\t// 发起砍价\r\n\t\tbargain() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/bargain/detail/detail?bargain_id=' + this.bargain_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.goodsSkuDetail.sku_spec_format) {\r\n\t\t\t\tthis.$refs.goodsSku.show(\"bargain\", () => {});\r\n\t\t\t} else {\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: \"/bargain/api/bargain/launch\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: this.goodsSkuDetail.id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/bargain/launch/launch', {\r\n\t\t\t\t\t\t\t\tid: res.data\r\n\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tswiperChange(e) {\r\n\t\t\tthis.swiperCurrent = e.detail.current + 1;\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------服务-------------------------------------\r\n\r\n\t\topenMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.open();\r\n\t\t},\r\n\t\tcloseMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.close();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\t\topenAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.open();\r\n\t\t},\r\n\t\tcloseAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.close();\r\n\t\t},\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\r\n\r\n\t\t//-------------------------------------评价-------------------------------------\r\n\t\t//商品评论列表\r\n\t\tgetGoodsEvaluate() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsevaluate/firstinfo\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.goodsEvaluate = data;\r\n\t\t\t\t\t\tif (this.goodsEvaluate.images) this.goodsEvaluate.images = this.goodsEvaluate.images.split(\",\");\r\n\t\t\t\t\t\tif (this.goodsEvaluate.is_anonymous == 1) this.goodsEvaluate.member_name = this.goodsEvaluate.member_name.replace(\r\n\t\t\t\t\t\t\tthis.goodsEvaluate.member_name.substring(1, this.goodsEvaluate.member_name.length - 1), '***')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 预览评价图片\r\n\t\tpreviewEvaluate(index, field) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsEvaluate[field].length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsEvaluate[field][i]));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------关注-------------------------------------\r\n\r\n\t\t//获取用户是否关注\r\n\t\tgetWhetherCollection() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodscollect/iscollect\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.whetherCollection = res.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teditCollection() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\r\n\t\t\t\t//未关注添加关注\r\n\t\t\t\tif (this.whetherCollection == 0) {\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/add\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//已关注取消关注\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/delete\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/bargain/detail/detail?bargain_id=' + this.bargain_id);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//获取购物车数量\r\n\t\tgetCartCount() {\r\n\t\t\tthis.$store.dispatch('getCartNumber').then((e) => {\r\n\t\t\t\tthis.cartCount = e;\r\n\t\t\t});\r\n\t\t},\r\n\t\t//更新商品信息\r\n\t\tmodifyGoodsInfo() {\r\n\t\t\t//更新商品点击量\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goods/modifyclicks\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tsite_id: this.goodsSkuDetail.site_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\r\n\t\t\t//添加足迹\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsbrowse/add\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------分享-------------------------------------\r\n\t\t// 打开分享弹出层\r\n\t\topenSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.open();\r\n\t\t},\r\n\t\t// 关闭分享弹出层\r\n\t\tcloseSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t},\r\n\t\t//-------------------------------------海报-------------------------------------\r\n\r\n\t\t// 打开海报弹出层\r\n\t\topenPosterPopup() {\r\n\t\t\tthis.getGoodsPoster();\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t\tthis.$refs.posterPopup.open();\r\n\t\t\tif (this.poster != '-1') {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().in(this).select(\".poster-layer .image-wrap\");\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true,\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\tlet posterWhith = data.width;\r\n\t\t\t\t\t\tlet ratio = parseFloat((740 / posterWhith).toFixed(2));\r\n\t\t\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1120 / ratio);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1100 / ratio);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭海报弹出层\r\n\t\tclosePosterPopup() {\r\n\t\t\tthis.$refs.posterPopup.close();\r\n\t\t},\r\n\t\t//生成海报\r\n\t\tgetGoodsPoster() {\r\n\t\t\t//活动海报信息\r\n\t\t\tlet qrcode_param = {\r\n\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\tid: this.goodsSkuDetail.id\r\n\t\t\t};\r\n\t\t\tif (this.memberId) qrcode_param.source_member = this.memberId;\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/bargain/api/goods/poster\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage: '/promotionpages/bargain/detail/detail',\r\n\t\t\t\t\tqrcode_param: JSON.stringify(qrcode_param)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.poster = res.data.path + \"?time=\" + new Date().getTime();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.posterMsg = res.message;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tpreviewMedia(index) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsSkuDetail.sku_images.length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsSkuDetail.sku_images[i], {\r\n\t\t\t\t\tsize: 'big'\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\t\tswiperImgError(index) {\r\n\t\t\tthis.goodsSkuDetail.sku_images[index] = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\r\n\t\t//小程序中保存海报\r\n\t\tsaveGoodsPoster() {\r\n\t\t\tlet url = this.$util.img(this.poster);\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存成功\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存失败，请稍后重试\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetMemberId() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/member/id\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.memberId = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//售后保障查询\r\n\t\tgetService() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goods/aftersale',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tlet data = res.data.content;\r\n\t\t\t\t\t\tif (res.data.content) this.service = htmlParser(res.data.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置微信公众号分享\r\n\t\t */\r\n\t\tsetWechatShare() {\r\n\t\t\t// 微信公众号分享\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\t获取是否开启微信圈子 \r\n\t\t */\r\n\t\tgetGoodScircleConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/config/info',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tif (res.data.is_use) {\r\n\t\t\t\t\t\t\tthis.goodsSyncToGoodsCircle()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\t将商品同步到微信圈子 \r\n\t\t */\r\n\t\tgoodsSyncToGoodsCircle() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/goods/sync',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.goodsCircle = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将商品推荐到微信圈子\r\n\t\t */\r\n\t\topenBusinessView() {\r\n\t\t\tif (wx.openBusinessView) {\r\n\t\t\t\twx.openBusinessView({\r\n\t\t\t\t\tbusinessType: 'friendGoodsRecommend',\r\n\t\t\t\t\textraData: {\r\n\t\t\t\t\t\tproduct: {\r\n\t\t\t\t\t\t\titem_code: this.goodsSkuDetail.goods_id,\r\n\t\t\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\t\t\timage_list: this.goodsSkuDetail.sku_images.map((ele) => {\r\n\t\t\t\t\t\t\t\treturn this.$util.img(ele);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('success', res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log('fail', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetEvaluateConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goodsevaluate/config',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tthis.evaluateConfig = data;\r\n\t\t\t\t\t\tif (this.evaluateConfig.evaluate_show == 1) {\r\n\t\t\t\t\t\t\t//商品评论\r\n\t\t\t\t\t\t\tthis.getGoodsEvaluate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcopyUrl() {\r\n\t\t\tlet text = this.$config.h5Domain + '/promotionpages/bargain/detail/detail?bargain_id=' + this.bargain_id;\r\n\t\t\tif (this.memberId) text += '&source_member=' + this.memberId;\r\n\t\t\tthis.$util.copy(text, () => {\r\n\t\t\t\tthis.closeSharePopup();\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetKekuConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/config/servicer',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.kefuConfig = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttoEvaluateDetail(id) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/evaluate/evaluate', {\r\n\t\t\t\tgoods_id: id\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigate(href, e) {\r\n\t\t\t//比如点击a标签，打开某个webview并传输url\r\n\t\t\tthis.$util.redirectTo('/otherpages/webview/webview', {\r\n\t\t\t\tlink: encodeURIComponent(href)\r\n\t\t\t});\r\n\t\t},\r\n\t\t//h5播放视频\r\n\t\topenVideo(url, video_img) {\r\n\t\t\t// this.$refs.videoPopup.open();\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/preview-video', {\r\n\t\t\t\tvideo_url: url,\r\n\t\t\t\tvideo_img: video_img\r\n\t\t\t})\r\n\t\t},\r\n\t\terrorShopLogo() {\r\n\t\t\tthis.shopInfo.avatar = this.$util.getDefaultImage().default_shop_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {\r\n\t\t\t\tis_balance: 0,\r\n\t\t\t\tpay_password: ''\r\n\t\t\t},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\tmember_account: {\r\n\t\t\t\t\tbalance: 0,\r\n\t\t\t\t\tis_pay_password: 0\r\n\t\t\t\t},\r\n\t\t\t\tshop_goods_list: {\r\n\t\t\t\t\tsite_name: '',\r\n\t\t\t\t\texpress_type: [],\r\n\t\t\t\t\tinvoice_config: {\r\n\t\t\t\t\t\tinvoice_status: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\torderInvoice: {\r\n\t\t\t\tis_invoice: 0, //是否需要发票\r\n\t\t\t\tinvoice_type: 1, //发票类型电子、纸质\r\n\t\t\t\tinvoice_title: '', //发票抬头\r\n\t\t\t\tinvoice_title_type: 1, // 抬头类型\r\n\t\t\t\tinvoice_full_address: '', //邮寄地址\r\n\t\t\t\tis_tax_invoice: 0, //是否需要增值税发票\r\n\t\t\t\tinvoice_email: '', // 邮箱\r\n\t\t\t\tinvoice_content: '', //发票内容\r\n\t\t\t\ttaxpayer_number: '' //纳税人识别号\r\n\t\t\t},\r\n\t\t\tisSub: false,\r\n\t\t\ttempData: null,\r\n\t\t\tsiteDelivery: {\r\n\t\t\t\tsite_id: 0,\r\n\t\t\t\tdata: []\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tif (this.tempData) {\r\n\t\t\t\tObject.assign(this.orderCreateData, this.tempData);\r\n\t\t\t\tObject.assign(this.orderPaymentData, this.tempData);\r\n\t\t\t\tthis.tempData = null;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/bargain/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('bargainOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 获取经纬度\r\n\t\t\tlet location = uni.getStorageSync('location');\r\n\t\t\tif (location) {\r\n\t\t\t\tthis.orderCreateData = Object.assign(this.orderCreateData, location);\r\n\t\t\t}\r\n\r\n\t\t\tthis.orderCreateData.buyer_message = '';\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/bargain/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tthis.handlePaymentData();\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 处理结算订单数据\r\n\t\thandlePaymentData() {\r\n\t\t\tthis.orderCreateData.delivery = {};\r\n\t\t\tthis.orderCreateData.invoice = {};\r\n\t\t\tthis.orderCreateData.is_balance = 0;\r\n\t\t\tthis.orderCreateData.pay_password = '';\r\n\r\n\t\t\tvar data = this.orderPaymentData;\r\n\r\n\t\t\tlet h = new Date().getHours().toString();\r\n\t\t\tlet m = new Date().getMinutes().toString();\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tlet nowTime = h + ':' + m;\r\n\t\t\tvar weeks = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n\r\n\t\t\t// 获取时间，必须是字符串,跟后端一致\r\n\t\t\tlet index_weeks = ['0', '1', '2', '3', '4', '5', '6'];\r\n\t\t\tlet curr_week = index_weeks[new Date().getDay()];\r\n\r\n\t\t\tif (data.shop_goods_list.express_type != undefined && data.shop_goods_list.express_type[0] != undefined) {\r\n\t\t\t\tvar express_type = data.shop_goods_list.express_type;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type = express_type[0].name;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type_name = express_type[0].title;\r\n\t\t\t\tthis.orderCreateData.delivery.store_id = 0;\r\n\r\n\t\t\t\t// 如果默认配送方式是门店配送\r\n\t\t\t\tif (express_type[0].name == 'store') {\r\n\t\t\t\t\tif (express_type[0].store_list[0] != undefined) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.store_id = express_type[0].store_list[0].store_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.is_virtual == 0 && data.shop_goods_list.local_config) {\r\n\r\n\t\t\t\t// 是否显示时间选择\r\n\t\t\t\tif (data.shop_goods_list.local_config.info && data.shop_goods_list.local_config.info.time_is_open == 1) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = true;\r\n\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = nowTime;\r\n\t\t\t\t\t// 当日是否支持配送\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 0 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.length == 7 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.indexOf(curr_week) > -1) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_type == 0) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t} else if (data.shop_goods_list.local_config.info.time_week.length > 0) {\r\n\t\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 7) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = true;\r\n\t\t\t\t\t\t\t// 判断配送时间是连续还是间隔\r\n\t\t\t\t\t\t\tvar timeWeek = data.shop_goods_list.local_config.info.time_week;\r\n\t\t\t\t\t\t\tvar is_interval = false; // 是否间隔\r\n\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((i + 1) < timeWeek.length) {\r\n\t\t\t\t\t\t\t\t\tvar difference = timeWeek[i + 1] - timeWeek[i];\r\n\t\t\t\t\t\t\t\t\tif (difference > 1) {\r\n\t\t\t\t\t\t\t\t\t\tis_interval = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (is_interval) {\r\n\t\t\t\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttemp.push(weeks[timeWeek[i]]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = temp.join(\"、\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = weeks[timeWeek[0]] + \"至\" + weeks[timeWeek[timeWeek.length -\r\n\t\t\t\t\t\t\t\t\t1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未设置配送时间\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// picker组件时间起始\r\n\t\t\t\t\tlet start_time = data.shop_goods_list.local_config.info.start_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.start_time = this.getTimeStr(start_time);\r\n\r\n\t\t\t\t\tlet end_time = data.shop_goods_list.local_config.info.end_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.end_time = this.getTimeStr(end_time);\r\n\r\n\t\t\t\t\tvar current_time = new Date(this.$util.timeStampTurnTime(data.timestamp));\r\n\t\t\t\t\tvar hour = current_time.getHours();\r\n\t\t\t\t\tvar minute = current_time.getMinutes();\r\n\r\n\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t// 检测当天是否能够配送，然后判断送达时间。不在配送时间当日不能下单，例：配送时间是周一到周五，那么周末不能下单，周一到周五可以下单\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif ((hour < start_hour) || (hour == start_hour && minute < start_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = (start_hour.toString().length == 1 ? \"0\" + start_hour :\r\n\t\t\t\t\t\t\t\t\t\tstart_hour) + ':' +\r\n\t\t\t\t\t\t\t\t\t(start_minute.toString().length == 1 ? \"0\" + start_minute : start_minute);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if (((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t// \t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// 当前时间晚于配送时间，送达时间隐藏，不能下单\r\n\t\t\t\t\t\t\tif ((hour > end_hour) || (hour == end_hour && minute > end_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = false;\r\n\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未开启配送时间\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.shop_goods_list.goods_list.forEach((v) => {\r\n\t\t\t\tif (typeof(v.sku_spec_format) == 'string') {\r\n\t\t\t\t\tif (v.sku_spec_format) {\r\n\t\t\t\t\t\tv.sku_spec_format = JSON.parse(v.sku_spec_format);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tv.sku_spec_format = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual) this.orderCreateData.member_address = {\r\n\t\t\t\tmobile: ''\r\n\t\t\t};\r\n\r\n\t\t\tObject.assign(data, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t},\r\n\t\t// 转化时间字符串\r\n\t\tgetTimeStr(val) {\r\n\t\t\tvar h = parseInt(val / 3600).toString();\r\n\t\t\tvar m = parseInt((val % 3600) / 60).toString();\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\treturn h + ':' + m;\r\n\t\t},\r\n\t\t// 订单计算\r\n\t\torderCalculate() {\r\n\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\tvar deliveryObj = {};\r\n\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\tvar messageObj = {};\r\n\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t//店铺发票\r\n\t\t\tif (this.orderPaymentData.shop_goods_list.is_invoice) {\r\n\t\t\t\tthis.orderCreateData.invoice[siteId] = {};\r\n\t\t\t\tif (!Array.isArray(this.orderPaymentData.shop_goods_list.invoice_config)) {\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_invoice = this.orderPaymentData.shop_goods_list.is_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_type = this.orderPaymentData.shop_goods_list.invoice_type;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title = this.orderPaymentData.shop_goods_list.invoice_title;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].taxpayer_number = this.orderPaymentData.shop_goods_list.taxpayer_number;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_content = this.orderPaymentData.shop_goods_list.invoice_content;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_full_address = this.orderPaymentData.shop_goods_list.invoice_full_address;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_tax_invoice = this.orderPaymentData.shop_goods_list.is_tax_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_email = this.orderPaymentData.shop_goods_list.invoice_email;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title_type = this.orderPaymentData.shop_goods_list.invoice_title_type;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/bargain/api/ordercreate/calculate',\r\n\t\t\t\tdata,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData.member_address = res.data.member_address;\r\n\t\t\t\t\t\tthis.orderPaymentData.delivery_money = res.data.delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_money = res.data.invoice_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_delivery_money = res.data.invoice_delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.promotion_money = res.data.promotion_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.order_money = res.data.order_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.balance_money = res.data.balance_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.pay_money = res.data.pay_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.goods_money = res.data.goods_money;\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订单创建\r\n\t\t * @param {String} pay_password 支付密码\r\n\t\t */\r\n\t\torderCreate(pay_password) {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tif (pay_password) this.orderCreateData.pay_password = pay_password;\r\n\r\n\t\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\t\tvar deliveryObj = {};\r\n\t\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\t\tvar messageObj = {};\r\n\t\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/bargain/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.pay_money == 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/pay/result/result', {\r\n\t\t\t\t\t\t\t\t\tcode: res.data\r\n\t\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'bargainOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (this.orderPaymentData.is_virtual == 1) {\r\n\t\t\t\tif (!this.orderCreateData.member_address.mobile.length) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入您的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar reg = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;\r\n\t\t\t\tif (!reg.test(this.orderCreateData.member_address.mobile)) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入正确的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual == 0) {\r\n\r\n\t\t\t\tlet expressTypeVerify = true;\r\n\r\n\t\t\t\tfor (let key in this.orderPaymentData.shop_goods_list) {\r\n\t\t\t\t\tif (this.orderPaymentData.shop_goods_list.express_type.length == 0) {\r\n\t\t\t\t\t\texpressTypeVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!expressTypeVerify) return false;\r\n\r\n\t\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (JSON.stringify(this.orderCreateData.delivery) == \"{}\") {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'store' && this.orderCreateData.delivery.store_id == 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】没有可提货的门店,请选择其他配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'local') {\r\n\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\tvar hour = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar minute = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间\r\n\t\t\t\t\t\t\tif (((hour < start_hour) || (hour == start_hour && minute < start_minute))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间不能小于配送开始时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 当前时间在配送时间内，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif (!((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间范围：开始时间~结束时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】已休息'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 显示店铺优惠信息\r\n\t\topenSitePromotion() {\r\n\t\t\tthis.$refs.sitePromotionPopup.open();\r\n\t\t},\r\n\t\t// 显示店铺配送信息\r\n\t\topenSiteDelivery() {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\tthis.$refs.deliveryPopup.open();\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tselectDeliveryType(data) {\r\n\t\t\tthis.orderCreateData.delivery.delivery_type = data.name;\r\n\t\t\tthis.orderCreateData.delivery.delivery_type_name = data.title;\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\t// 如果是门店配送\r\n\t\t\tif (data.name == 'store') {\r\n\t\t\t\tif (data.store_list[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t\tthis.tempData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择自提点\r\n\t\tselectPickupPoint(store_id) {\r\n\t\t\tthis.orderCreateData.delivery.store_id = store_id;\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs['deliveryPopup'].close();\r\n\t\t},\r\n\t\t// 使用余额\r\n\t\tuseBalance() {\r\n\t\t\tif (this.orderCreateData.is_balance) this.orderCreateData.is_balance = 0;\r\n\t\t\telse this.orderCreateData.is_balance = 1;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\timgError(goodsIndex) {\r\n\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[goodsIndex].sku_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//打开发票弹窗\r\n\t\topenInvoicePopup(val) {\r\n\t\t\tthis.orderInvoice = this.$util.deepClone(val);\r\n\t\t\tthis.orderInvoice.invoice_type = this.orderInvoice.invoice_type == undefined ? 1 : this.orderInvoice.invoice_type;\r\n\t\t\tthis.orderInvoice.invoice_title_type = this.orderInvoice.invoice_title_type == undefined ? 1 : this.orderInvoice.invoice_title_type;\r\n\t\t\tthis.orderInvoice.invoice_content = this.orderInvoice.invoice_content ? this.orderInvoice.invoice_content : '';\r\n\t\t\tthis.orderInvoice.invoice_title = this.orderInvoice.invoice_title ? this.orderInvoice.invoice_title : '';\r\n\t\t\tthis.orderInvoice.invoice_full_address = this.orderInvoice.invoice_full_address ? this.orderInvoice.invoice_full_address :\r\n\t\t\t\t''; //邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = this.orderInvoice.is_tax_invoice ? this.orderInvoice.is_tax_invoice : 0; //是否需要增值税发票\r\n\t\t\tthis.orderInvoice.invoice_email = this.orderInvoice.invoice_email ? this.orderInvoice.invoice_email : ''; // 邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = this.orderInvoice.taxpayer_number ? this.orderInvoice.taxpayer_number : ''; //纳税人识别号\r\n\t\t\tthis.openPopup('invoicePopup');\r\n\t\t},\r\n\t\t// 切换发票开关\r\n\t\tchangeIsInvoice() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 0) {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 0;\r\n\t\t\t}\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票类型\r\n\t\tchangeInvoiceType(invoice_type) {\r\n\t\t\tthis.orderInvoice.invoice_type = invoice_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票个人还是企业\r\n\t\tchangeInvoiceTitleType(invoice_title_type) {\r\n\t\t\tthis.orderInvoice.invoice_title_type = invoice_title_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择发票内容\r\n\t\tchangeInvoiceContent(invoice_content) {\r\n\t\t\tthis.orderInvoice.invoice_content = invoice_content;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//关闭发票弹窗\r\n\t\tcloseInvoicePopup() {\r\n\t\t\tthis.orderInvoice.invoice_type = 1; // 发票类型  1 纸质 2 电子\r\n\t\t\tthis.orderInvoice.invoice_title_type = 1; // 抬头类型  1 个人 2 企业\r\n\t\t\tthis.orderInvoice.invoice_content = ''; // 发票内容\r\n\t\t\tthis.orderInvoice.invoice_title = ''; // 发票抬头\r\n\t\t\tthis.orderInvoice.invoice_full_address = ''; // 发票邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = 0; // 是否需要增值税专用发票  0 不需要 1 需要\r\n\t\t\tthis.orderInvoice.invoice_email = ''; //发票邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = ''; //纳税人识别号\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs.invoicePopup.close();\r\n\t\t},\r\n\t\t// 发票验证\r\n\t\tinvoiceVerify() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 1) {\r\n\t\t\t\tif (this.orderInvoice.invoice_title == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票抬头\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_title_type == 2 && this.orderInvoice.taxpayer_number == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写纳税人识别号\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 1 && this.orderInvoice.invoice_full_address == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票邮寄地址\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写邮箱\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email != '') {\r\n\t\t\t\t\tvar reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n\t\t\t\t\tif (!reg.test(this.orderInvoice.invoice_email)) {\r\n\t\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请填写正确的邮箱地址\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_content == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择发票内容\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 保存发票信息\r\n\t\tsaveInvoice() {\r\n\t\t\tif (this.invoiceVerify()) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list = this.orderInvoice;\r\n\t\t\t\tthis.orderCalculate();\r\n\t\t\t\tthis.closePopup('invoicePopup');\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindTimeChange(e) {\r\n\t\t\tlet time = e.target.value;\r\n\t\t\tthis.orderCreateData.delivery[e.currentTarget.dataset.siteid].buyer_ask_delivery_time = time;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\ttoShopDetail(e) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: e\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigateTo(sku_id) {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\tsku_id\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tuni.setStorageSync('paySource', '');\r\n\t\t\tif (this.verify()) this.$refs.choosePaymentPopup.open();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tonHide() {\r\n\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.show();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 余额抵扣\r\n\t\tbalanceDeduct() {\r\n\t\t\tif (this.orderPaymentData.member_account.balance_total <= parseFloat(this.orderPaymentData.order_money).toFixed(2)) {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.member_account.balance_total).toFixed(2);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.order_money).toFixed(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tbargainPrice() {\r\n\t\t\tif (this.orderPaymentData && this.orderPaymentData.bargain_info) {\r\n\t\t\t\treturn (Number(this.orderPaymentData.bargain_info.price) - Number(this.orderPaymentData.bargain_info.curr_price)).toFixed(\r\n\t\t\t\t\t2);\r\n\t\t\t} else {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t}\r\n\t}\r\n}\r\n","import htmlParser from '@/common/js/html-parser';\r\nimport {\r\n\tWeixin\r\n} from '@/common/js/wx-jssdk.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tgroupbuy_id: 0,\r\n\t\t\tskuId: 0,\r\n\r\n\t\t\t// 商品详情\r\n\t\t\tgoodsSkuDetail: {\r\n\t\t\t\tgoods_id: 0,\r\n\t\t\t\tgoods_service: []\r\n\t\t\t},\r\n\t\t\t// 店铺详情\r\n\t\t\tshopInfo: {\r\n\t\t\t\tlogo: '',\r\n\t\t\t\tshop_baozh: 0,\r\n\t\t\t\tshop_qtian: 0,\r\n\t\t\t\tshop_zhping: 0,\r\n\t\t\t\tshop_erxiaoshi: 0,\r\n\t\t\t\tshop_tuihuo: 0,\r\n\t\t\t\tshop_shiyong: 0,\r\n\t\t\t\tshop_shiti: 0,\r\n\t\t\t\tshop_xiaoxie: 0\r\n\t\t\t},\r\n\r\n\t\t\tcartCount: 0, // 购物车商品数量\r\n\t\t\twhetherCollection: 0,\r\n\r\n\t\t\t// 媒体,图片,视频\r\n\r\n\t\t\t// 解决每个商品SKU图片数量不同时，无法切换到第一个，导致轮播图显示不出来\r\n\t\t\tswiperInterval: 1,\r\n\t\t\tswiperAutoplay: false,\r\n\t\t\tswiperCurrent: 1,\r\n\t\t\tswitchMedia: 'img',\r\n\r\n\t\t\tisIphoneX: false, //判断手机是否是iphoneX以上\r\n\r\n\t\t\tposter: \"-1\", //海报\r\n\t\t\tposterMsg: \"\", //海报错误信息\r\n\t\t\tposterHeight: 0,\r\n\r\n\t\t\t//评价\r\n\t\t\tgoodsEvaluate: {\r\n\t\t\t\tmember_headimg: '',\r\n\t\t\t\tmember_name: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tcreate_time: 0,\r\n\t\t\t\tsku_name: ''\r\n\t\t\t},\r\n\t\t\tmemberId: 0,\r\n\t\t\tcontactData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tpath: '',\r\n\t\t\t\timg: ''\r\n\t\t\t},\r\n\t\t\tdetailTab: 0,\r\n\t\t\tservice: null,\r\n\t\t\tshowKefu: 0,\r\n\t\t\t// 是否可分享到好物圈\r\n\t\t\tgoodsCircle: false,\r\n\t\t\tevaluateConfig: {\r\n\t\t\t\tevaluate_audit: 1,\r\n\t\t\t\tevaluate_show: 0,\r\n\t\t\t\tevaluate_status: 1\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(data) {\r\n\t\tthis.groupbuy_id = data.groupbuy_id || 0;\r\n\t\tthis.skuId = data.sku_id || 0;\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t\tif (data.source_member) uni.setStorageSync('source_member', data.source_member);\r\n\t\t// 小程序扫码进入\r\n\t\tif (data.scene) {\r\n\t\t\tvar sceneParams = decodeURIComponent(data.scene);\r\n\t\t\tsceneParams = sceneParams.split('&');\r\n\t\t\tif (sceneParams.length) {\r\n\t\t\t\tsceneParams.forEach(item => {\r\n\t\t\t\t\tif (item.indexOf('groupbuy_id') != -1) this.groupbuy_id = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('sku_id') != -1) this.skuId = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('source_member') != -1) uni.setStorageSync('source_member', item.split('-')[1]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t// this.getService();\r\n\t},\r\n\tasync onShow() {\r\n\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\t\tthis.$store.dispatch('getAddonIsexit').then(async (data) => {\r\n\t\t\tif (!data.groupbuy) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '团购未开启',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getCartCount();\r\n\t\t\t\t\tthis.getMemberId();\r\n\t\t\t\t}\r\n\t\t\t\tthis.canGoConnect();\r\n\t\t\t\tthis.getKekuConfig();\r\n\t\t\t\t//同步获取商品详情\r\n\t\t\t\tawait this.getGoodsSkuDetail();\r\n\r\n\t\t\t\t//修改商品信息\r\n\t\t\t\tthis.modifyGoodsInfo();\r\n\r\n\t\t\t\t// 评价设置\r\n\t\t\t\tthis.getEvaluateConfig();\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\tcanGoConnect() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/addon/addonisexit\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tthis.showKefu = res.data.servicer;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//联系客服\r\n\t\tgoConnect() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tsite_id: this.shopInfo.site_id,\r\n\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id,\r\n\t\t\t\t\ttype: 'groupbuy',\r\n\t\t\t\t\ttype_id: this.goodsSkuDetail.groupbuy_id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.redirectTo('/otherpages/chat/room/room', data)\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/pages/goods/detail/detail?sku_id=' + this.goodsSkuDetail.sku_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取团购商品详情\r\n\t\tasync getGoodsSkuDetail() {\r\n\t\t\tlet res = await this.$api.sendRequest({\r\n\t\t\t\turl: '/groupbuy/api/goods/detail',\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgroupbuy_id: this.groupbuy_id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tlet data = res.data;\r\n\t\t\tif (data.goods_sku_detail != null) {\r\n\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\tthis.shopInfo = data.shop_info;\r\n\t\t\t\tthis.skuId = this.goodsSkuDetail.sku_id;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.goods_service = [];\r\n\t\t\t\tif (this.shopInfo.shop_baozh == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '保证服务',\r\n\t\t\t\t\t\tdesc: '保证服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_qtian == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '7天退换',\r\n\t\t\t\t\t\tdesc: '满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_zhping == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '正品保障',\r\n\t\t\t\t\t\tdesc: '商品支持正品保障服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_erxiaoshi == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '两小时发货',\r\n\t\t\t\t\t\tdesc: '付款后2小时内发货'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_tuihuo == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '退货承诺',\r\n\t\t\t\t\t\tdesc: '退货承诺'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiyong == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '试用中心',\r\n\t\t\t\t\t\tdesc: '试用中心'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiti == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '实体验证',\r\n\t\t\t\t\t\tdesc: '实体验证'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_xiaoxie == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '消协保证',\r\n\t\t\t\t\t\tdesc: '如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//砍价倒计时\r\n\t\t\t\tif ((this.goodsSkuDetail.end_time - res.timestamp) > 0) {\r\n\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail.end_time - res.timestamp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"活动已结束\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//团购倒计时\r\n\t\t\t\tif ((this.goodsSkuDetail.end_time - res.timestamp) > 0) {\r\n\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail.end_time - res.timestamp);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"活动已结束\",\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//媒体\r\n\t\t\t\tif (this.goodsSkuDetail.video_url) this.switchMedia = \"video\";\r\n\r\n\t\t\t\tif (this.goodsSkuDetail.sku_images) this.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.split(\",\");\r\n\t\t\t\telse this.goodsSkuDetail.sku_images = [];\r\n\r\n\t\t\t\t// 多规格时合并主图\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format && this.goodsSkuDetail.goods_image) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_image = this.goodsSkuDetail.goods_image.split(\",\");\r\n\t\t\t\t\tthis.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.concat(this.goodsSkuDetail.goods_image);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\r\n\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsSkuDetail.groupbuy_price;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.save_price = (this.goodsSkuDetail.price - this.goodsSkuDetail.show_price) > 0 ? (this.goodsSkuDetail\r\n\t\t\t\t\t.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t// 当前商品SKU规格\r\n\t\t\t\tif (this.goodsSkuDetail.sku_spec_format) this.goodsSkuDetail.sku_spec_format = JSON.parse(this.goodsSkuDetail.sku_spec_format);\r\n\r\n\t\t\t\t// 商品属性\r\n\t\t\t\tif (this.goodsSkuDetail.goods_attr_format) {\r\n\t\t\t\t\tlet goods_attr_format = JSON.parse(this.goodsSkuDetail.goods_attr_format);\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format = this.$util.unique(goods_attr_format, \"attr_id\");\r\n\t\t\t\t\tfor (var i = 0; i < this.goodsSkuDetail.goods_attr_format.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < goods_attr_format.length; j++) {\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.goods_attr_format[i].attr_id == goods_attr_format[j].attr_id && this.goodsSkuDetail.goods_attr_format[\r\n\t\t\t\t\t\t\t\t\ti].attr_value_id != goods_attr_format[j].attr_value_id) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format[i].attr_value_name += \"、\" + goods_attr_format[j].attr_value_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 商品SKU格式\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format) this.goodsSkuDetail.goods_spec_format = JSON.parse(this.goodsSkuDetail.goods_spec_format);\r\n\r\n\t\t\t\tthis.$langConfig.title(this.goodsSkuDetail.goods_name);\r\n\r\n\t\t\t\t// 商品详情\r\n\t\t\t\t// if (this.goodsSkuDetail.goods_content) this.goodsSkuDetail.goods_content = htmlParser(this.goodsSkuDetail.goods_content);\r\n\r\n\t\t\t\tthis.contactData = {\r\n\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\tpath: '/promotionpages/groupbuy/detail/detail?groupbuy_id=' + this.groupbuy_id,\r\n\t\t\t\t\timg: this.$util.img(this.goodsSkuDetail.sku_image, {\r\n\t\t\t\t\t\tsize: 'big'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getWhetherCollection();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setWechatShare();\r\n\r\n\t\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\r\n\r\n\t\t\t\tthis.getGoodScircleConfig();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 刷新商品详情数据\r\n\t\t * @param {Object} goodsSkuDetail\r\n\t\t */\r\n\t\trefreshGoodsSkuDetail(goodsSkuDetail) {\r\n\t\t\tObject.assign(this.goodsSkuDetail, goodsSkuDetail);\r\n\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t// 解决轮播图数量不一致时，切换到第一个\r\n\t\t\tif (this.swiperCurrent > this.goodsSkuDetail.sku_images.length) {\r\n\t\t\t\tthis.swiperAutoplay = true;\r\n\t\t\t\tthis.swiperCurrent = 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.swiperAutoplay = false;\r\n\t\t\t\t}, 40);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoHome() {\r\n\t\t\t// this.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: this.shopInfo.site_id\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoCart() {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/cart/cart', {}, 'reLaunch');\r\n\t\t},\r\n\t\t// 团购\r\n\t\tgroupbuy() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/groupbuy/detail/detail?groupbuy_id=' + this.groupbuy_id + '&sku_id=' + this.skuId);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$refs.goodsSku.show(\"groupbuy\", () => {});\r\n\t\t},\r\n\t\tswiperChange(e) {\r\n\t\t\tthis.swiperCurrent = e.detail.current + 1;\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------服务-------------------------------------\r\n\r\n\t\topenMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.open();\r\n\t\t},\r\n\t\tcloseMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.close();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\t\topenAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.open();\r\n\t\t},\r\n\t\tcloseAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.close();\r\n\t\t},\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\r\n\r\n\t\t//-------------------------------------评价-------------------------------------\r\n\t\t//商品评论列表\r\n\t\tgetGoodsEvaluate() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsevaluate/firstinfo\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.goodsEvaluate = data;\r\n\t\t\t\t\t\tif (this.goodsEvaluate.images) this.goodsEvaluate.images = this.goodsEvaluate.images.split(\",\");\r\n\t\t\t\t\t\tif (this.goodsEvaluate.is_anonymous == 1) this.goodsEvaluate.member_name = this.goodsEvaluate.member_name.replace(\r\n\t\t\t\t\t\t\tthis.goodsEvaluate.member_name.substring(1, this.goodsEvaluate.member_name.length - 1), '***')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 预览评价图片\r\n\t\tpreviewEvaluate(index, field) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsEvaluate[field].length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsEvaluate[field][i]));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------关注-------------------------------------\r\n\r\n\t\t//获取用户是否关注\r\n\t\tgetWhetherCollection() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodscollect/iscollect\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.whetherCollection = res.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teditCollection() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\r\n\t\t\t\t//未关注添加关注\r\n\t\t\t\tif (this.whetherCollection == 0) {\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/add\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//已关注取消关注\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/delete\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/groupbuy/detail/detail?groupbuy_id=' + this.groupbuy_id + '&sku_id=' + this.skuId);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//获取购物车数量\r\n\t\tgetCartCount() {\r\n\t\t\tthis.$store.dispatch('getCartNumber').then((e) => {\r\n\t\t\t\tthis.cartCount = e;\r\n\t\t\t});\r\n\t\t},\r\n\t\t//更新商品信息\r\n\t\tmodifyGoodsInfo() {\r\n\t\t\t//更新商品点击量\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goods/modifyclicks\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tsite_id: this.goodsSkuDetail.site_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\r\n\t\t\t//添加足迹\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsbrowse/add\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------分享-------------------------------------\r\n\t\t// 打开分享弹出层\r\n\t\topenSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.open();\r\n\t\t},\r\n\t\t// 关闭分享弹出层\r\n\t\tcloseSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t},\r\n\t\t//-------------------------------------海报-------------------------------------\r\n\r\n\t\t// 打开海报弹出层\r\n\t\topenPosterPopup() {\r\n\t\t\tthis.getGoodsPoster();\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t\tthis.$refs.posterPopup.open();\r\n\t\t\tif (this.poster != '-1') {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().in(this).select(\".poster-layer .image-wrap\");\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true,\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\tlet posterWhith = data.width;\r\n\t\t\t\t\t\tlet ratio = parseFloat((740 / posterWhith).toFixed(2));\r\n\t\t\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1240 / ratio);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1100 / ratio);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭海报弹出层\r\n\t\tclosePosterPopup() {\r\n\t\t\tthis.$refs.posterPopup.close();\r\n\t\t},\r\n\t\t//生成海报\r\n\t\tgetGoodsPoster() {\r\n\t\t\t//活动海报信息\r\n\t\t\tlet qrcode_param = {\r\n\t\t\t\tgroupbuy_id: this.groupbuy_id\r\n\t\t\t};\r\n\t\t\tif (this.memberId) qrcode_param.source_member = this.memberId;\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/groupbuy/api/goods/poster\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage: '/promotionpages/groupbuy/detail/detail',\r\n\t\t\t\t\tqrcode_param: JSON.stringify(qrcode_param)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.poster = res.data.path + \"?time=\" + new Date().getTime();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.posterMsg = res.message;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tpreviewMedia(index) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsSkuDetail.sku_images.length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsSkuDetail.sku_images[i], {\r\n\t\t\t\t\tsize: 'big'\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\t\tswiperImgError(index) {\r\n\t\t\tthis.goodsSkuDetail.sku_images[index] = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\r\n\t\t//小程序中保存海报\r\n\t\tsaveGoodsPoster() {\r\n\t\t\tlet url = this.$util.img(this.poster);\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存成功\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存失败，请稍后重试\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetMemberId() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/member/id\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.memberId = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//售后保障查询\r\n\t\tgetService() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goods/aftersale',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tlet data = res.data.content;\r\n\t\t\t\t\t\tif (res.data.content) this.service = htmlParser(res.data.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置微信公众号分享\r\n\t\t */\r\n\t\tsetWechatShare() {\r\n\t\t\t// 微信公众号分享\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\t获取是否开启微信圈子 \r\n\t\t */\r\n\t\tgetGoodScircleConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/config/info',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tif (res.data.is_use) {\r\n\t\t\t\t\t\t\tthis.goodsSyncToGoodsCircle()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\t将商品同步到微信圈子 \r\n\t\t */\r\n\t\tgoodsSyncToGoodsCircle() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/goods/sync',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.goodsCircle = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将商品推荐到微信圈子\r\n\t\t */\r\n\t\topenBusinessView() {\r\n\t\t\tif (wx.openBusinessView) {\r\n\t\t\t\twx.openBusinessView({\r\n\t\t\t\t\tbusinessType: 'friendGoodsRecommend',\r\n\t\t\t\t\textraData: {\r\n\t\t\t\t\t\tproduct: {\r\n\t\t\t\t\t\t\titem_code: this.goodsSkuDetail.goods_id,\r\n\t\t\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\t\t\timage_list: this.goodsSkuDetail.sku_images.map((ele) => {\r\n\t\t\t\t\t\t\t\treturn this.$util.img(ele);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('success', res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log('fail', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetEvaluateConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goodsevaluate/config',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tthis.evaluateConfig = data;\r\n\t\t\t\t\t\tif (this.evaluateConfig.evaluate_show == 1) {\r\n\t\t\t\t\t\t\t//商品评论\r\n\t\t\t\t\t\t\tthis.getGoodsEvaluate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcopyUrl() {\r\n\t\t\tlet text = this.$config.h5Domain + '/promotionpages/groupbuy/detail/detail?groupbuy_id=' + this.groupbuy_id;\r\n\t\t\tif (this.memberId) text += '&source_member=' + this.memberId;\r\n\t\t\tthis.$util.copy(text, () => {\r\n\t\t\t\tthis.closeSharePopup();\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetKekuConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/config/servicer',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.kefuConfig = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttoEvaluateDetail(id) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/evaluate/evaluate', {\r\n\t\t\t\tgoods_id: id\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigate(href, e) {\r\n\t\t\t//比如点击a标签，打开某个webview并传输url\r\n\t\t\tthis.$util.redirectTo('/otherpages/webview/webview', {\r\n\t\t\t\tlink: encodeURIComponent(href)\r\n\t\t\t});\r\n\t\t},\r\n\t\t//h5播放视频\r\n\t\topenVideo(url, video_img) {\r\n\t\t\t// this.$refs.videoPopup.open();\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/preview-video', {\r\n\t\t\t\tvideo_url: url,\r\n\t\t\t\tvideo_img: video_img\r\n\t\t\t})\r\n\t\t},\r\n\t\terrorShopLogo() {\r\n\t\t\tthis.shopInfo.avatar = this.$util.getDefaultImage().default_shop_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {\r\n\t\t\t\tis_balance: 0,\r\n\t\t\t\tpay_password: ''\r\n\t\t\t},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\tmember_account: {\r\n\t\t\t\t\tbalance: 0,\r\n\t\t\t\t\tis_pay_password: 0\r\n\t\t\t\t},\r\n\t\t\t\tshop_goods_list: {\r\n\t\t\t\t\tsite_name: '',\r\n\t\t\t\t\texpress_type: [],\r\n\t\t\t\t\tinvoice_config: {\r\n\t\t\t\t\t\tinvoice_status: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgroupbuy_info: {\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\torderInvoice: {\r\n\t\t\t\tis_invoice: 0, //是否需要发票\r\n\t\t\t\tinvoice_type: 1, //发票类型电子、纸质\r\n\t\t\t\tinvoice_title: '', //发票抬头\r\n\t\t\t\tinvoice_title_type: 1, // 抬头类型\r\n\t\t\t\tinvoice_full_address: '', //邮寄地址\r\n\t\t\t\tis_tax_invoice: 0, //是否需要增值税发票\r\n\t\t\t\tinvoice_email: '', // 邮箱\r\n\t\t\t\tinvoice_content: '', //发票内容\r\n\t\t\t\ttaxpayer_number: '' //纳税人识别号\r\n\t\t\t},\r\n\t\t\tisSub: false,\r\n\t\t\ttempData: null,\r\n\t\t\tsiteDelivery: {\r\n\t\t\t\tsite_id: 0,\r\n\t\t\t\tdata: []\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tif (this.tempData) {\r\n\t\t\t\tObject.assign(this.orderCreateData, this.tempData);\r\n\t\t\t\tObject.assign(this.orderPaymentData, this.tempData);\r\n\t\t\t\tthis.tempData = null;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/groupbuy/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('groupbuyOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 获取经纬度\r\n\t\t\tlet location = uni.getStorageSync('location');\r\n\t\t\tif (location) {\r\n\t\t\t\tthis.orderCreateData = Object.assign(this.orderCreateData, location);\r\n\t\t\t}\r\n\r\n\t\t\tthis.orderCreateData.buyer_message = '';\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/groupbuy/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tthis.handlePaymentData();\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 处理结算订单数据\r\n\t\thandlePaymentData() {\r\n\t\t\tthis.orderCreateData.delivery = {};\r\n\t\t\tthis.orderCreateData.invoice = {};\r\n\t\t\tthis.orderCreateData.is_balance = 0;\r\n\t\t\tthis.orderCreateData.pay_password = '';\r\n\r\n\t\t\tfor (var i = 0; i < this.orderPaymentData.shop_goods_list.goods_list.length; i++) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[i].goods_image = this.orderPaymentData.shop_goods_list.goods_list[\r\n\t\t\t\t\ti].goods_image ? this.orderPaymentData.shop_goods_list.goods_list[i].goods_image.split(\",\")[0] : '';\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.orderPaymentData;\r\n\r\n\t\t\tlet h = new Date().getHours().toString();\r\n\t\t\tlet m = new Date().getMinutes().toString();\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tlet nowTime = h + ':' + m;\r\n\t\t\tvar weeks = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n\r\n\t\t\t// 获取时间，必须是字符串,跟后端一致\r\n\t\t\tlet index_weeks = ['0', '1', '2', '3', '4', '5', '6'];\r\n\t\t\tlet curr_week = index_weeks[new Date().getDay()];\r\n\r\n\t\t\tif (data.shop_goods_list.express_type != undefined && data.shop_goods_list.express_type[0] != undefined) {\r\n\t\t\t\tvar express_type = data.shop_goods_list.express_type;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type = express_type[0].name;\r\n\t\t\t\tthis.orderCreateData.delivery.delivery_type_name = express_type[0].title;\r\n\t\t\t\tthis.orderCreateData.delivery.store_id = 0;\r\n\r\n\t\t\t\t// 如果默认配送方式是门店配送\r\n\t\t\t\tif (express_type[0].name == 'store') {\r\n\t\t\t\t\tif (express_type[0].store_list[0] != undefined) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.store_id = express_type[0].store_list[0].store_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.is_virtual == 0 && data.shop_goods_list.local_config) {\r\n\r\n\t\t\t\t// 是否显示时间选择\r\n\t\t\t\tif (data.shop_goods_list.local_config.info && data.shop_goods_list.local_config.info.time_is_open == 1) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = true;\r\n\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = nowTime;\r\n\t\t\t\t\t// 当日是否支持配送\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 0 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.length == 7 ||\r\n\t\t\t\t\t\tdata.shop_goods_list.local_config.info.time_week.indexOf(curr_week) > -1) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_type == 0) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t} else if (data.shop_goods_list.local_config.info.time_week.length > 0) {\r\n\t\t\t\t\t\tif (data.shop_goods_list.local_config.info.time_week.length == 7) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery.showTime = true;\r\n\t\t\t\t\t\t\t// 判断配送时间是连续还是间隔\r\n\t\t\t\t\t\t\tvar timeWeek = data.shop_goods_list.local_config.info.time_week;\r\n\t\t\t\t\t\t\tvar is_interval = false; // 是否间隔\r\n\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\tif ((i + 1) < timeWeek.length) {\r\n\t\t\t\t\t\t\t\t\tvar difference = timeWeek[i + 1] - timeWeek[i];\r\n\t\t\t\t\t\t\t\t\tif (difference > 1) {\r\n\t\t\t\t\t\t\t\t\t\tis_interval = true;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (is_interval) {\r\n\t\t\t\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttemp.push(weeks[timeWeek[i]]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = temp.join(\"、\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = weeks[timeWeek[0]] + \"至\" + weeks[timeWeek[timeWeek.length -\r\n\t\t\t\t\t\t\t\t\t1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未设置配送时间\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// picker组件时间起始\r\n\t\t\t\t\tlet start_time = data.shop_goods_list.local_config.info.start_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.start_time = this.getTimeStr(start_time);\r\n\r\n\t\t\t\t\tlet end_time = data.shop_goods_list.local_config.info.end_time;\r\n\t\t\t\t\tthis.orderCreateData.delivery.end_time = this.getTimeStr(end_time);\r\n\r\n\t\t\t\t\tvar current_time = new Date(this.$util.timeStampTurnTime(data.timestamp));\r\n\t\t\t\t\tvar hour = current_time.getHours();\r\n\t\t\t\t\tvar minute = current_time.getMinutes();\r\n\r\n\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t// 检测当天是否能够配送，然后判断送达时间。不在配送时间当日不能下单，例：配送时间是周一到周五，那么周末不能下单，周一到周五可以下单\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif ((hour < start_hour) || (hour == start_hour && minute < start_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.buyer_ask_delivery_time = (start_hour.toString().length == 1 ? \"0\" + start_hour :\r\n\t\t\t\t\t\t\t\t\t\tstart_hour) + ':' +\r\n\t\t\t\t\t\t\t\t\t(start_minute.toString().length == 1 ? \"0\" + start_minute : start_minute);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// if (((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t// \t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t// 当前时间晚于配送时间，送达时间隐藏，不能下单\r\n\t\t\t\t\t\t\tif ((hour > end_hour) || (hour == end_hour && minute > end_minute)) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery.canLocalDelicery = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderCreateData.delivery.showTimeBar = false;\r\n\t\t\t\t\tthis.orderCreateData.delivery.deliveryWeek = \"店铺未开启配送时间\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdata.shop_goods_list.goods_list.forEach((v) => {\r\n\t\t\t\tif (typeof(v.sku_spec_format) == 'string') {\r\n\t\t\t\t\tif (v.sku_spec_format) {\r\n\t\t\t\t\t\tv.sku_spec_format = JSON.parse(v.sku_spec_format);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tv.sku_spec_format = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual) this.orderCreateData.member_address = {\r\n\t\t\t\tmobile: ''\r\n\t\t\t};\r\n\r\n\t\t\tObject.assign(data, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t},\r\n\t\t// 转化时间字符串\r\n\t\tgetTimeStr(val) {\r\n\t\t\tvar h = parseInt(val / 3600).toString();\r\n\t\t\tvar m = parseInt((val % 3600) / 60).toString();\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\treturn h + ':' + m;\r\n\t\t},\r\n\t\t// 订单计算\r\n\t\torderCalculate() {\r\n\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\tvar deliveryObj = {};\r\n\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\tvar messageObj = {};\r\n\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t//店铺发票\r\n\t\t\tif (this.orderPaymentData.shop_goods_list.is_invoice) {\r\n\t\t\t\tthis.orderCreateData.invoice[siteId] = {};\r\n\t\t\t\tif (!Array.isArray(this.orderPaymentData.shop_goods_list.invoice_config)) {\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_invoice = this.orderPaymentData.shop_goods_list.is_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_type = this.orderPaymentData.shop_goods_list.invoice_type;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title = this.orderPaymentData.shop_goods_list.invoice_title;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].taxpayer_number = this.orderPaymentData.shop_goods_list.taxpayer_number;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_content = this.orderPaymentData.shop_goods_list.invoice_content;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_full_address = this.orderPaymentData.shop_goods_list.invoice_full_address;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].is_tax_invoice = this.orderPaymentData.shop_goods_list.is_tax_invoice;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_email = this.orderPaymentData.shop_goods_list.invoice_email;\r\n\t\t\t\t\tthis.orderCreateData.invoice[siteId].invoice_title_type = this.orderPaymentData.shop_goods_list.invoice_title_type;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/groupbuy/api/ordercreate/calculate',\r\n\t\t\t\tdata,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData.member_address = res.data.member_address;\r\n\t\t\t\t\t\tthis.orderPaymentData.delivery_money = res.data.delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_money = res.data.invoice_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_delivery_money = res.data.invoice_delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.promotion_money = res.data.promotion_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.order_money = res.data.order_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.balance_money = res.data.balance_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.pay_money = res.data.pay_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.goods_money = res.data.goods_money;\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订单创建\r\n\t\t * @param {String} pay_password 支付密码\r\n\t\t */\r\n\t\torderCreate(pay_password) {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tif (pay_password) this.orderCreateData.pay_password = pay_password;\r\n\r\n\t\t\t\tlet siteId = this.orderPaymentData.shop_goods_list.site_id;\r\n\r\n\t\t\t\tvar deliveryObj = {};\r\n\t\t\t\tdeliveryObj[siteId] = this.orderCreateData.delivery;\r\n\r\n\t\t\t\tvar messageObj = {};\r\n\t\t\t\tmessageObj[siteId] = this.orderCreateData.buyer_message;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(deliveryObj);\r\n\t\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\t\tdata.buyer_message = JSON.stringify(messageObj);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/groupbuy/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.pay_money == 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/pay/result/result', {\r\n\t\t\t\t\t\t\t\t\tcode: res.data\r\n\t\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'groupbuyOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (this.orderPaymentData.is_virtual == 1) {\r\n\t\t\t\tif (!this.orderCreateData.member_address.mobile.length) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入您的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar reg = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;\r\n\t\t\t\tif (!reg.test(this.orderCreateData.member_address.mobile)) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入正确的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual == 0) {\r\n\r\n\t\t\t\tlet expressTypeVerify = true;\r\n\r\n\t\t\t\tfor (let key in this.orderPaymentData.shop_goods_list) {\r\n\t\t\t\t\tif (this.orderPaymentData.shop_goods_list.express_type.length == 0) {\r\n\t\t\t\t\t\texpressTypeVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!expressTypeVerify) return false;\r\n\r\n\t\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (JSON.stringify(this.orderCreateData.delivery) == \"{}\") {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】未设置配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'store' && this.orderCreateData.delivery.store_id == 0) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】没有可提货的门店,请选择其他配送方式'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.orderCreateData.delivery.delivery_type == 'local') {\r\n\r\n\t\t\t\t\tif (this.orderCreateData.delivery.canLocalDelicery) {\r\n\r\n\t\t\t\t\t\tvar hour = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar minute = parseInt(this.orderCreateData.delivery.buyer_ask_delivery_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery.start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery.end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t// 当前时间早于配送时间\r\n\t\t\t\t\t\t\tif (((hour < start_hour) || (hour == start_hour && minute < start_minute))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间不能小于配送开始时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 当前时间在配送时间内，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\tif (!((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】送达时间范围：开始时间~结束时间'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list.site_name + '】已休息'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 显示店铺优惠信息\r\n\t\topenSitePromotion() {\r\n\t\t\tthis.$refs.sitePromotionPopup.open();\r\n\t\t},\r\n\t\t// 显示店铺配送信息\r\n\t\topenSiteDelivery() {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\tthis.$refs.deliveryPopup.open();\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tselectDeliveryType(data) {\r\n\t\t\tthis.orderCreateData.delivery.delivery_type = data.name;\r\n\t\t\tthis.orderCreateData.delivery.delivery_type_name = data.title;\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\t// 如果是门店配送\r\n\t\t\tif (data.name == 'store') {\r\n\t\t\t\tif (data.store_list[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t\tthis.tempData.delivery.store_id = data.store_list[0].store_id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择自提点\r\n\t\tselectPickupPoint(store_id) {\r\n\t\t\tthis.orderCreateData.delivery.store_id = store_id;\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs['deliveryPopup'].close();\r\n\t\t},\r\n\t\t// 使用余额\r\n\t\tuseBalance() {\r\n\t\t\tif (this.orderCreateData.is_balance) this.orderCreateData.is_balance = 0;\r\n\t\t\telse this.orderCreateData.is_balance = 1;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\timgError(goodsIndex) {\r\n\t\t\tthis.orderPaymentData.shop_goods_list.goods_list[goodsIndex].goods_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//打开发票弹窗\r\n\t\topenInvoicePopup(val) {\r\n\t\t\tthis.orderInvoice = this.$util.deepClone(val);\r\n\t\t\tthis.orderInvoice.invoice_type = this.orderInvoice.invoice_type == undefined ? 1 : this.orderInvoice.invoice_type;\r\n\t\t\tthis.orderInvoice.invoice_title_type = this.orderInvoice.invoice_title_type == undefined ? 1 : this.orderInvoice.invoice_title_type;\r\n\t\t\tthis.orderInvoice.invoice_content = this.orderInvoice.invoice_content ? this.orderInvoice.invoice_content : '';\r\n\t\t\tthis.orderInvoice.invoice_title = this.orderInvoice.invoice_title ? this.orderInvoice.invoice_title : '';\r\n\t\t\tthis.orderInvoice.invoice_full_address = this.orderInvoice.invoice_full_address ? this.orderInvoice.invoice_full_address :\r\n\t\t\t\t''; //邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = this.orderInvoice.is_tax_invoice ? this.orderInvoice.is_tax_invoice : 0; //是否需要增值税发票\r\n\t\t\tthis.orderInvoice.invoice_email = this.orderInvoice.invoice_email ? this.orderInvoice.invoice_email : ''; // 邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = this.orderInvoice.taxpayer_number ? this.orderInvoice.taxpayer_number : ''; //纳税人识别号\r\n\t\t\tthis.openPopup('invoicePopup');\r\n\t\t},\r\n\t\t// 切换发票开关\r\n\t\tchangeIsInvoice() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 0) {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 0;\r\n\t\t\t}\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票类型\r\n\t\tchangeInvoiceType(invoice_type) {\r\n\t\t\tthis.orderInvoice.invoice_type = invoice_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票个人还是企业\r\n\t\tchangeInvoiceTitleType(invoice_title_type) {\r\n\t\t\tthis.orderInvoice.invoice_title_type = invoice_title_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择发票内容\r\n\t\tchangeInvoiceContent(invoice_content) {\r\n\t\t\tthis.orderInvoice.invoice_content = invoice_content;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//关闭发票弹窗\r\n\t\tcloseInvoicePopup() {\r\n\t\t\tthis.orderInvoice.invoice_type = 1; // 发票类型  1 纸质 2 电子\r\n\t\t\tthis.orderInvoice.invoice_title_type = 1; // 抬头类型  1 个人 2 企业\r\n\t\t\tthis.orderInvoice.invoice_content = ''; // 发票内容\r\n\t\t\tthis.orderInvoice.invoice_title = ''; // 发票抬头\r\n\t\t\tthis.orderInvoice.invoice_full_address = ''; // 发票邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = 0; // 是否需要增值税专用发票  0 不需要 1 需要\r\n\t\t\tthis.orderInvoice.invoice_email = ''; //发票邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = ''; //纳税人识别号\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs.invoicePopup.close();\r\n\t\t},\r\n\t\t// 发票验证\r\n\t\tinvoiceVerify() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 1) {\r\n\t\t\t\tif (this.orderInvoice.invoice_title == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票抬头\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_title_type == 2 && this.orderInvoice.taxpayer_number == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写纳税人识别号\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 1 && this.orderInvoice.invoice_full_address == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票邮寄地址\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写邮箱\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email != '') {\r\n\t\t\t\t\tvar reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n\t\t\t\t\tif (!reg.test(this.orderInvoice.invoice_email)) {\r\n\t\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请填写正确的邮箱地址\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_content == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择发票内容\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 保存发票信息\r\n\t\tsaveInvoice() {\r\n\t\t\tif (this.invoiceVerify()) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list = this.orderInvoice;\r\n\t\t\t\tthis.orderCalculate();\r\n\t\t\t\tthis.closePopup('invoicePopup');\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindTimeChange(e) {\r\n\t\t\tlet time = e.target.value;\r\n\t\t\tthis.orderCreateData.delivery[e.currentTarget.dataset.siteid].buyer_ask_delivery_time = time;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\ttoShopDetail(e) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: e\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigateTo(sku_id) {\r\n\t\t\tthis.$util.redirectTo('/pages/goods/detail/detail', {\r\n\t\t\t\tsku_id\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tuni.setStorageSync('paySource', '');\r\n\t\t\tif (this.verify()) this.$refs.choosePaymentPopup.open();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tonHide() {\r\n\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.show();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 余额抵扣\r\n\t\tbalanceDeduct() {\r\n\t\t\tif (this.orderPaymentData.member_account.balance_total <= parseFloat(this.orderPaymentData.order_money).toFixed(2)) {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.member_account.balance_total).toFixed(2);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.order_money).toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t}\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\texchange_info: {\r\n\t\t\t\t\ttype: 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttype: 1,\r\n\t\t\tisSub: false\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/point/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('exchangeOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.orderCreateData.buyer_message = '';\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/pointexchange/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 订单创建\r\n\t\torderCreate() {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(data.delivery);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/pointexchange/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.exchange_info.pay_type == 1 && this.orderPaymentData.exchange_info.price !=\r\n\t\t\t\t\t\t\t\t'0.00') {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/point/result/result', {}, 'redirectTo');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'exchangeOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (this.orderPaymentData.exchange_info.type == 1) {\r\n\t\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\timgError() {\r\n\t\t\tlet imageUrl = ''\r\n\t\t\tif (this.orderPaymentData.exchange_info.type == 1) {\r\n\t\t\t\timageUrl = this.$util.img('upload/uniapp/point/gift.png');\r\n\t\t\t} else if (this.orderPaymentData.exchange_info.type == 2) {\r\n\t\t\t\timageUrl = this.$util.img('upload/uniapp/point/coupon.png');\r\n\t\t\t} else if (this.orderPaymentData.exchange_info.type == 3) {\r\n\t\t\t\timageUrl = this.$util.img('upload/uniapp/point/hongbao.png');\r\n\t\t\t} else {\r\n\t\t\t\timageUrl = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\t}\r\n\t\t\tthis.orderPaymentData.exchange_info.image = imageUrl;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tif (this.verify() && this.orderPaymentData.exchange_info.pay_type == 1 && this.orderPaymentData.exchange_info.price !=\r\n\t\t\t\t'0.00') this.$refs.choosePaymentPopup.open();\r\n\t\t\telse this.orderCreate();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t}\r\n\t}\r\n}\r\n","import htmlParser from '@/common/js/html-parser';\r\nimport {\r\n\tWeixin\r\n} from '@/common/js/wx-jssdk.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tskuId: 0,\r\n\t\t\tgoodsId: 0,\r\n\r\n\t\t\t// 商品详情\r\n\t\t\tgoodsSkuDetail: {\r\n\t\t\t\tgoods_id: 0,\r\n\t\t\t\tgoods_service: []\r\n\t\t\t},\r\n\t\t\t// 店铺详情\r\n\t\t\tshopInfo: {\r\n\t\t\t\tlogo: '',\r\n\t\t\t\tshop_baozh: 0,\r\n\t\t\t\tshop_qtian: 0,\r\n\t\t\t\tshop_zhping: 0,\r\n\t\t\t\tshop_erxiaoshi: 0,\r\n\t\t\t\tshop_tuihuo: 0,\r\n\t\t\t\tshop_shiyong: 0,\r\n\t\t\t\tshop_shiti: 0,\r\n\t\t\t\tshop_xiaoxie: 0\r\n\t\t\t},\r\n\r\n\t\t\tcartCount: 0, // 购物车商品数量\r\n\t\t\twhetherCollection: 0,\r\n\r\n\t\t\t// 媒体,图片,视频\r\n\r\n\t\t\t// 解决每个商品SKU图片数量不同时，无法切换到第一个，导致轮播图显示不出来\r\n\t\t\tswiperInterval: 1,\r\n\t\t\tswiperAutoplay: false,\r\n\t\t\tswiperCurrent: 1,\r\n\t\t\tswitchMedia: 'img',\r\n\r\n\t\t\tisIphoneX: false, //判断手机是否是iphoneX以上\r\n\r\n\t\t\tposter: \"-1\", //海报\r\n\t\t\tposterMsg: \"\", //海报错误信息\r\n\t\t\tposterHeight: 0,\r\n\r\n\t\t\t//评价\r\n\t\t\tgoodsEvaluate: {\r\n\t\t\t\tmember_headimg: '',\r\n\t\t\t\tmember_name: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timages: [],\r\n\t\t\t\tcreate_time: 0,\r\n\t\t\t\tsku_name: ''\r\n\t\t\t},\r\n\t\t\tmemberId: 0,\r\n\t\t\tcontactData: {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tpath: '',\r\n\t\t\t\timg: ''\r\n\t\t\t},\r\n\t\t\tdetailTab: 0,\r\n\t\t\tservice: null,\r\n\t\t\tshowKefu: 0,\r\n\t\t\t// 是否可分享到好物圈\r\n\t\t\tgoodsCircle: false,\r\n\t\t\tevaluateConfig: {\r\n\t\t\t\tevaluate_audit: 1,\r\n\t\t\t\tevaluate_show: 0,\r\n\t\t\t\tevaluate_status: 1\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tonLoad(data) {\r\n\t\tthis.skuId = data.sku_id || 0;\r\n\t\tthis.goodsId = data.goods_id || 0;\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t\tif (data.source_member) uni.setStorageSync('source_member', data.source_member);\r\n\t\t// 小程序扫码进入\r\n\t\tif (data.scene) {\r\n\t\t\tvar sceneParams = decodeURIComponent(data.scene);\r\n\t\t\tsceneParams = sceneParams.split('&');\r\n\t\t\tif (sceneParams.length) {\r\n\t\t\t\tsceneParams.forEach(item => {\r\n\t\t\t\t\tif (item.indexOf('sku_id') != -1) this.skuId = item.split('-')[1];\r\n\t\t\t\t\tif (item.indexOf('source_member') != -1) uni.setStorageSync('source_member', item.split('-')[1]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t// this.getService();\r\n\t},\r\n\tasync onShow() {\r\n\t\tthis.$store.dispatch('getAddonIsexit').then(async (data) => {\r\n\t\t\tif (!data.wholesale) {\r\n\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\ttitle: '批发活动未开启',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\t// 刷新多语言\r\n\t\t\t\tthis.$langConfig.refresh();\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getCartCount();\r\n\t\t\t\t\tthis.getMemberId();\r\n\t\t\t\t}\r\n\t\t\t\tthis.canGoConnect()\r\n\t\t\t\tthis.getKekuConfig();\r\n\t\t\t\t//同步获取商品详情\r\n\t\t\t\tawait this.getGoodsSkuDetail();\r\n\r\n\t\t\t\t//修改商品信息\r\n\t\t\t\tthis.modifyGoodsInfo();\r\n\r\n\t\t\t\t// 评价设置\r\n\t\t\t\tthis.getEvaluateConfig();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t},\r\n\tmethods: {\r\n\t\tcanGoConnect() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/addon/addonisexit\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tthis.showKefu = res.data.servicer;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//联系客服\r\n\t\tgoConnect() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tsite_id: this.shopInfo.site_id,\r\n\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$util.redirectTo('/otherpages/chat/room/room', data)\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/pages/goods/detail/detail?sku_id=' + this.goodsSkuDetail.sku_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取商品详情\r\n\t\tasync getGoodsSkuDetail(skuId) {\r\n\t\t\tthis.skuId = skuId || this.skuId;\r\n\t\t\tlet res = await this.$api.sendRequest({\r\n\t\t\t\turl: '/wholesale/api/goods/detail',\r\n\t\t\t\tasync: false,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsId\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tlet data = res.data;\r\n\t\t\tif (data.goods_sku_detail != null) {\r\n\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\tthis.shopInfo = data.shop_info;\r\n\t\t\t\tthis.skuId = this.goodsSkuDetail.sku_id;\r\n\r\n\t\t\t\tthis.goodsSkuDetail.goods_service = [];\r\n\t\t\t\tif (this.shopInfo.shop_baozh == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '保证服务',\r\n\t\t\t\t\t\tdesc: '保证服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_qtian == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '7天退换',\r\n\t\t\t\t\t\tdesc: '满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_zhping == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '正品保障',\r\n\t\t\t\t\t\tdesc: '商品支持正品保障服务'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_erxiaoshi == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '两小时发货',\r\n\t\t\t\t\t\tdesc: '付款后2小时内发货'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_tuihuo == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '退货承诺',\r\n\t\t\t\t\t\tdesc: '退货承诺'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiyong == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '试用中心',\r\n\t\t\t\t\t\tdesc: '试用中心'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_shiti == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '实体验证',\r\n\t\t\t\t\t\tdesc: '实体验证'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.shopInfo.shop_xiaoxie == 1) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_service.push({\r\n\t\t\t\t\t\tservice_name: '消协保证',\r\n\t\t\t\t\t\tdesc: '如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//媒体\r\n\t\t\t\tif (this.goodsSkuDetail.video_url) this.switchMedia = \"video\";\r\n\r\n\t\t\t\tif (this.goodsSkuDetail.sku_images) this.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.split(\",\");\r\n\t\t\t\telse this.goodsSkuDetail.sku_images = [];\r\n\r\n\t\t\t\t// 多规格时合并主图\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format && this.goodsSkuDetail.goods_image) {\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_image = this.goodsSkuDetail.goods_image.split(\",\");\r\n\t\t\t\t\tthis.goodsSkuDetail.sku_images = this.goodsSkuDetail.sku_images.concat(this.goodsSkuDetail.goods_image);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\r\n\t\t\t\t// 当前商品SKU规格\r\n\t\t\t\tif (this.goodsSkuDetail.sku_spec_format) this.goodsSkuDetail.sku_spec_format = JSON.parse(this.goodsSkuDetail.sku_spec_format);\r\n\r\n\t\t\t\t// 商品属性\r\n\t\t\t\tif (this.goodsSkuDetail.goods_attr_format) {\r\n\t\t\t\t\tlet goods_attr_format = JSON.parse(this.goodsSkuDetail.goods_attr_format);\r\n\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format = this.$util.unique(goods_attr_format, \"attr_id\");\r\n\t\t\t\t\tfor (var i = 0; i < this.goodsSkuDetail.goods_attr_format.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < goods_attr_format.length; j++) {\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.goods_attr_format[i].attr_id == goods_attr_format[j].attr_id && this.goodsSkuDetail.goods_attr_format[\r\n\t\t\t\t\t\t\t\t\ti].attr_value_id != goods_attr_format[j].attr_value_id) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.goods_attr_format[i].attr_value_name += \"、\" + goods_attr_format[j].attr_value_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 商品SKU格式\r\n\t\t\t\tif (this.goodsSkuDetail.goods_spec_format) this.goodsSkuDetail.goods_spec_format = JSON.parse(this.goodsSkuDetail.goods_spec_format);\r\n\r\n\t\t\t\tthis.$langConfig.title(this.goodsSkuDetail.goods_name);\r\n\r\n\t\t\t\t// 商品详情\r\n\t\t\t\t// if (this.goodsSkuDetail.goods_content) this.goodsSkuDetail.goods_content = htmlParser(this.goodsSkuDetail.goods_content);\r\n\r\n\t\t\t\tthis.contactData = {\r\n\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\tpath: '/promotionpages/wholesale/detail/detail?sku_id=' + this.skuId,\r\n\t\t\t\t\timg: this.$util.img(this.goodsSkuDetail.sku_image, {\r\n\t\t\t\t\t\tsize: 'big'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.getWhetherCollection();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setWechatShare();\r\n\r\n\t\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\r\n\r\n\t\t\t\tthis.getGoodScircleConfig();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 刷新商品详情数据\r\n\t\t * @param {Object} goodsSkuDetail\r\n\t\t */\r\n\t\trefreshGoodsSkuDetail(goodsSkuDetail) {\r\n\t\t\tObject.assign(this.goodsSkuDetail, goodsSkuDetail);\r\n\t\t\tthis.goodsSkuDetail.unit = this.goodsSkuDetail.unit || \"件\";\r\n\t\t\t// if (this.$refs.goodsPromotion) this.$refs.goodsPromotion.refresh(this.goodsSkuDetail.goods_promotion);\r\n\r\n\t\t\t// 解决轮播图数量不一致时，切换到第一个\r\n\t\t\tif (this.swiperCurrent > this.goodsSkuDetail.sku_images.length) {\r\n\t\t\t\tthis.swiperAutoplay = true;\r\n\t\t\t\tthis.swiperCurrent = 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.swiperAutoplay = false;\r\n\t\t\t\t}, 40);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgoHome() {\r\n\t\t\t// this.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: this.shopInfo.site_id\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoCart() {\r\n\t\t\tthis.$util.redirectTo('/promotionpages/wholesale/cartList/cartList');\r\n\t\t},\r\n\t\t// 加入购物车\r\n\t\twholesaleJoinCart() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/wholesale/detail/detail?sku_id=' + this.skuId);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$refs.goodsSku.show(\"wholesale_join_cart\", () => {\r\n\t\t\t\tthis.getCartCount();\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 立即购买\r\n\t\twholesaleBuyNow() {\r\n\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/wholesale/detail/detail?sku_id=' + this.skuId);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$refs.goodsSku.show(\"wholesale_buy_now\", () => {\r\n\t\t\t\tthis.getCartCount();\r\n\t\t\t});\r\n\t\t},\r\n\t\tswiperChange(e) {\r\n\t\t\tthis.swiperCurrent = e.detail.current + 1;\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------服务-------------------------------------\r\n\r\n\t\topenMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.open();\r\n\t\t},\r\n\t\tcloseMerchantsServicePopup() {\r\n\t\t\tthis.$refs.merchantsServicePopup.close();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\t\topenAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.open();\r\n\t\t},\r\n\t\tcloseAttributePopup() {\r\n\t\t\tthis.$refs.attributePopup.close();\r\n\t\t},\r\n\r\n\t\t//-------------------------------------属性-------------------------------------\r\n\r\n\r\n\r\n\t\t//-------------------------------------评价-------------------------------------\r\n\t\t//商品评论列表\r\n\t\tgetGoodsEvaluate() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsevaluate/firstinfo\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tthis.goodsEvaluate = data;\r\n\t\t\t\t\t\tif (this.goodsEvaluate.images) this.goodsEvaluate.images = this.goodsEvaluate.images.split(\",\");\r\n\t\t\t\t\t\tif (this.goodsEvaluate.is_anonymous == 1) this.goodsEvaluate.member_name = this.goodsEvaluate.member_name.replace(\r\n\t\t\t\t\t\t\tthis.goodsEvaluate.member_name.substring(1, this.goodsEvaluate.member_name.length - 1), '***')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 预览评价图片\r\n\t\tpreviewEvaluate(index, field) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsEvaluate[field].length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsEvaluate[field][i]));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------关注-------------------------------------\r\n\r\n\t\t//获取用户是否关注\r\n\t\tgetWhetherCollection() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodscollect/iscollect\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tthis.whetherCollection = res.data;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teditCollection() {\r\n\t\t\tif (uni.getStorageSync('token')) {\r\n\r\n\t\t\t\t//未关注添加关注\r\n\t\t\t\tif (this.whetherCollection == 0) {\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/add\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//已关注取消关注\r\n\t\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\t\turl: \"/api/goodscollect/delete\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\t\tthis.whetherCollection = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.$refs.login.open('/promotionpages/wholesale/detail/detail?sku_id=' + this.skuId);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//获取购物车数量\r\n\t\tgetCartCount() {\r\n\t\t\tthis.$store.dispatch('getWholeSaleNumber').then((e) => {\r\n\t\t\t\tthis.cartCount = e;\r\n\t\t\t});\r\n\t\t},\r\n\t\t//更新商品信息\r\n\t\tmodifyGoodsInfo() {\r\n\t\t\t//更新商品点击量\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goods/modifyclicks\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tsite_id: this.goodsSkuDetail.site_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\r\n\t\t\t//添加足迹\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/goodsbrowse/add\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\r\n\t\t//-------------------------------------分享-------------------------------------\r\n\t\t// 打开分享弹出层\r\n\t\topenSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.open();\r\n\t\t},\r\n\t\t// 关闭分享弹出层\r\n\t\tcloseSharePopup() {\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t},\r\n\t\t//-------------------------------------海报-------------------------------------\r\n\r\n\t\t// 打开海报弹出层\r\n\t\topenPosterPopup() {\r\n\t\t\tthis.getGoodsPoster();\r\n\t\t\tthis.$refs.sharePopup.close();\r\n\t\t\tthis.$refs.posterPopup.open();\r\n\t\t\tif (this.poster != '-1') {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().in(this).select(\".poster-layer .image-wrap\");\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true,\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\tlet posterWhith = data.width;\r\n\t\t\t\t\t\tlet ratio = parseFloat((740 / posterWhith).toFixed(2));\r\n\t\t\t\t\t\tif (uni.getStorageSync('token')) {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1120 / ratio);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.posterHeight = parseInt(1100 / ratio);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).exec();\r\n\t\t\t\t}, 100);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭海报弹出层\r\n\t\tclosePosterPopup() {\r\n\t\t\tthis.$refs.posterPopup.close();\r\n\t\t},\r\n\t\t//生成海报\r\n\t\tgetGoodsPoster() {\r\n\t\t\t//活动海报信息\r\n\t\t\tlet qrcode_param = {\r\n\t\t\t\tgoods_id: this.goodsId\r\n\t\t\t};\r\n\t\t\tif (this.memberId) qrcode_param.source_member = this.memberId;\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/wholesale/api/goods/poster\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage: '/promotionpages/wholesale/detail/detail',\r\n\t\t\t\t\tqrcode_param: JSON.stringify(qrcode_param)\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.poster = res.data.path + \"?time=\" + new Date().getTime();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.posterMsg = res.message;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tpreviewMedia(index) {\r\n\t\t\tvar paths = [];\r\n\t\t\tfor (let i = 0; i < this.goodsSkuDetail.sku_images.length; i++) {\r\n\t\t\t\tpaths.push(this.$util.img(this.goodsSkuDetail.sku_images[i], {\r\n\t\t\t\t\tsize: 'big'\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: index,\r\n\t\t\t\turls: paths\r\n\t\t\t});\r\n\t\t},\r\n\t\tswiperImgError(index) {\r\n\t\t\tthis.goodsSkuDetail.sku_images[index] = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\r\n\t\t//小程序中保存海报\r\n\t\tsaveGoodsPoster() {\r\n\t\t\tlet url = this.$util.img(this.poster);\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: url,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存成功\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: \"保存失败，请稍后重试\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetMemberId() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: \"/api/member/id\",\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.memberId = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//售后保障查询\r\n\t\tgetService() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goods/aftersale',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tlet data = res.data.content;\r\n\t\t\t\t\t\tif (res.data.content) this.service = htmlParser(res.data.content);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置微信公众号分享\r\n\t\t */\r\n\t\tsetWechatShare() {\r\n\t\t\t// 微信公众号分享\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t *\t获取是否开启微信圈子 \r\n\t\t */\r\n\t\tgetGoodScircleConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/config/info',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tif (res.data.is_use) {\r\n\t\t\t\t\t\t\tthis.goodsSyncToGoodsCircle()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *\t将商品同步到微信圈子 \r\n\t\t */\r\n\t\tgoodsSyncToGoodsCircle() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/goodscircle/api/goods/sync',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tgoods_id: this.goodsSkuDetail.goods_id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.goodsCircle = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将商品推荐到微信圈子\r\n\t\t */\r\n\t\topenBusinessView() {\r\n\t\t\tif (wx.openBusinessView) {\r\n\t\t\t\twx.openBusinessView({\r\n\t\t\t\t\tbusinessType: 'friendGoodsRecommend',\r\n\t\t\t\t\textraData: {\r\n\t\t\t\t\t\tproduct: {\r\n\t\t\t\t\t\t\titem_code: this.goodsSkuDetail.goods_id,\r\n\t\t\t\t\t\t\ttitle: this.goodsSkuDetail.sku_name,\r\n\t\t\t\t\t\t\timage_list: this.goodsSkuDetail.sku_images.map((ele) => {\r\n\t\t\t\t\t\t\t\treturn this.$util.img(ele);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('success', res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log('fail', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetEvaluateConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/goodsevaluate/config',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tthis.evaluateConfig = data;\r\n\t\t\t\t\t\tif (this.evaluateConfig.evaluate_show == 1) {\r\n\t\t\t\t\t\t\t//商品评论\r\n\t\t\t\t\t\t\tthis.getGoodsEvaluate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcopyUrl() {\r\n\t\t\tlet text = '【' + this.goodsSkuDetail.sku_name + '】发现好物，一起来看看吧。' + this.$config.h5Domain +\r\n\t\t\t\t'/promotionpages/wholesale/detail/detail?goods_id=' + this.goodsId;\r\n\t\t\tif (this.memberId) text += '&source_member=' + this.memberId;\r\n\t\t\tthis.$util.copy(text, () => {\r\n\t\t\t\tthis.closeSharePopup();\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetKekuConfig() {\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/api/config/servicer',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\tthis.kefuConfig = res.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttoEvaluateDetail(id) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/evaluate/evaluate', {\r\n\t\t\t\tgoods_id: id\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigate(href, e) {\r\n\t\t\t//比如点击a标签，打开某个webview并传输url\r\n\t\t\tthis.$util.redirectTo('/otherpages/webview/webview', {\r\n\t\t\t\tlink: encodeURIComponent(href)\r\n\t\t\t});\r\n\t\t},\r\n\t\t//h5播放视频\r\n\t\topenVideo(url, video_img) {\r\n\t\t\t// this.$refs.videoPopup.open();\r\n\t\t\tthis.$util.redirectTo('/otherpages/goods/preview-video', {\r\n\t\t\t\tvideo_url: url,\r\n\t\t\t\tvideo_img: video_img\r\n\t\t\t})\r\n\t\t},\r\n\t\terrorShopLogo() {\r\n\t\t\tthis.shopInfo.avatar = this.$util.getDefaultImage().default_shop_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t}\r\n}\r\n","export default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisIphoneX: false,\r\n\t\t\torderCreateData: {\r\n\t\t\t\tis_balance: 0,\r\n\t\t\t\tpay_password: ''\r\n\t\t\t},\r\n\t\t\torderPaymentData: {\r\n\t\t\t\tmember_account: {\r\n\t\t\t\t\tbalance: 0,\r\n\t\t\t\t\tis_pay_password: 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\torderInvoice: {\r\n\t\t\t\tis_invoice: 0, //是否需要发票\r\n\t\t\t\tinvoice_type: 1, //发票类型电子、纸质\r\n\t\t\t\tinvoice_title: '', //发票抬头\r\n\t\t\t\tinvoice_title_type: 1, // 抬头类型\r\n\t\t\t\tinvoice_full_address: '', //邮寄地址\r\n\t\t\t\tis_tax_invoice: 0, //是否需要增值税发票\r\n\t\t\t\tinvoice_email: '', // 邮箱\r\n\t\t\t\tinvoice_content: '', //发票内容\r\n\t\t\t\ttaxpayer_number: '' //纳税人识别号\r\n\t\t\t},\r\n\t\t\tisSub: false,\r\n\t\t\ttempData: null,\r\n\t\t\tsiteDelivery: {\r\n\t\t\t\tsite_id: 0,\r\n\t\t\t\tdata: []\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t// 显示弹出层\r\n\t\topenPopup(ref) {\r\n\t\t\tthis.$refs[ref].open();\r\n\t\t},\r\n\t\t// 关闭弹出层\r\n\t\tclosePopup(ref) {\r\n\t\t\tif (this.tempData) {\r\n\t\t\t\tObject.assign(this.orderCreateData, this.tempData);\r\n\t\t\t\tObject.assign(this.orderPaymentData, this.tempData);\r\n\t\t\t\tthis.tempData = null;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t}\r\n\t\t\tthis.$refs[ref].close();\r\n\t\t},\r\n\t\t// 选择收货地址，默认有定位\r\n\t\tselectAddress() {\r\n\t\t\tvar params = {\r\n\t\t\t\tback: '/promotionpages/wholesale/payment/payment',\r\n\t\t\t\tlocal: 0,\r\n\t\t\t\ttype: 1\r\n\t\t\t}\r\n\t\t\t// 外卖配送需要定位地址\r\n\t\t\t// if (this.orderPaymentData.delivery.delivery_type == 'local') {\r\n\t\t\t// \tparams.local = 1;\r\n\t\t\t// \tparams.type = 2;\r\n\t\t\t// }\r\n\t\t\tthis.$util.redirectTo('/otherpages/member/address/address', params);\r\n\t\t},\r\n\t\t// 获取订单初始化数据\r\n\t\tgetOrderPaymentData() {\r\n\t\t\tthis.orderCreateData = uni.getStorageSync('wholesaleOrderCreateData');\r\n\t\t\tvar pay_flag = uni.getStorageSync(\"pay_flag\"); // 支付中标识，防止返回时，提示,跳转错误\r\n\t\t\tif (!this.orderCreateData) {\r\n\t\t\t\tif (pay_flag == 1) {\r\n\t\t\t\t\tuni.removeStorageSync(\"pay_flag\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 获取经纬度\r\n\t\t\tlet location = uni.getStorageSync('location');\r\n\t\t\tif (location) {\r\n\t\t\t\tthis.orderCreateData = Object.assign(this.orderCreateData, location);\r\n\t\t\t}\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/wholesale/api/ordercreate/payment',\r\n\t\t\t\tdata: this.orderCreateData,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData = res.data;\r\n\t\t\t\t\t\tthis.orderPaymentData.timestamp = res.timestamp;\r\n\t\t\t\t\t\tthis.handlePaymentData();\r\n\t\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '未获取到创建订单所需数据！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 处理结算订单数据\r\n\t\thandlePaymentData() {\r\n\t\t\tthis.orderCreateData.delivery = {};\r\n\t\t\tthis.orderCreateData.invoice = {};\r\n\t\t\tthis.orderCreateData.coupon = {};\r\n\t\t\tthis.orderCreateData.buyer_message = {};\r\n\t\t\tthis.orderCreateData.is_balance = 0;\r\n\t\t\tthis.orderCreateData.pay_password = '';\r\n\r\n\t\t\tvar data = this.orderPaymentData;\r\n\r\n\t\t\tlet h = new Date().getHours().toString();\r\n\t\t\tlet m = new Date().getMinutes().toString();\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tlet nowTime = h + ':' + m;\r\n\t\t\tvar weeks = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n\r\n\t\t\t// 获取时间，必须是字符串,跟后端一致\r\n\t\t\tlet index_weeks = ['0', '1', '2', '3', '4', '5', '6'];\r\n\t\t\tlet curr_week = index_weeks[new Date().getDay()];\r\n\r\n\t\t\tObject.keys(data.shop_goods_list).forEach((key, index) => {\r\n\t\t\t\tlet siteItem = data.shop_goods_list[key];\r\n\r\n\t\t\t\t// 店铺配送方式\r\n\t\t\t\tthis.orderCreateData.delivery[key] = {};\r\n\r\n\t\t\t\tif (siteItem.express_type[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery[key].delivery_type = siteItem.express_type[0].name;\r\n\t\t\t\t\tthis.orderCreateData.delivery[key].delivery_type_name = siteItem.express_type[0].title;\r\n\t\t\t\t\tthis.orderCreateData.delivery[key].store_id = 0;\r\n\r\n\t\t\t\t\t// 如果默认配送方式是门店配送模拟点击门店tab选项\r\n\t\t\t\t\tif (siteItem.express_type[0].name == 'store') {\r\n\t\t\t\t\t\tif (siteItem.express_type[0].store_list[0] != undefined) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].store_id = siteItem.express_type[0].store_list[0].store_id;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (data.is_virtual == 0 && siteItem.local_config) {\r\n\r\n\t\t\t\t\t// 是否显示时间选择\r\n\t\t\t\t\tif (siteItem.local_config.info && siteItem.local_config.info.time_is_open == 1) {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery[key].showTimeBar = true;\r\n\t\t\t\t\t\tthis.orderCreateData.delivery[key].buyer_ask_delivery_time = nowTime;\r\n\t\t\t\t\t\t// 当日是否支持配送\r\n\t\t\t\t\t\tif (siteItem.local_config.info.time_week.length == 0 ||\r\n\t\t\t\t\t\t\tsiteItem.local_config.info.time_week.length == 7 ||\r\n\t\t\t\t\t\t\tsiteItem.local_config.info.time_week.indexOf(curr_week) > -1) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].canLocalDelicery = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].canLocalDelicery = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (siteItem.local_config.info.time_type == 0) {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t} else if (siteItem.local_config.info.time_week.length > 0) {\r\n\t\t\t\t\t\t\tif (siteItem.local_config.info.time_week.length == 7) {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].deliveryWeek = \"全天\";\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].showTime = false;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].showTime = true;\r\n\t\t\t\t\t\t\t\t// 判断配送时间是连续还是间隔\r\n\t\t\t\t\t\t\t\tvar timeWeek = siteItem.local_config.info.time_week;\r\n\t\t\t\t\t\t\t\tvar is_interval = false; // 是否间隔\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif ((i + 1) < timeWeek.length) {\r\n\t\t\t\t\t\t\t\t\t\tvar difference = timeWeek[i + 1] - timeWeek[i];\r\n\t\t\t\t\t\t\t\t\t\tif (difference > 1) {\r\n\t\t\t\t\t\t\t\t\t\t\tis_interval = true;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (is_interval) {\r\n\t\t\t\t\t\t\t\t\tvar temp = [];\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < timeWeek.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\ttemp.push(weeks[timeWeek[i]]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].deliveryWeek = temp.join(\"、\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].deliveryWeek = weeks[timeWeek[0]] + \"至\" + weeks[timeWeek[timeWeek.length -\r\n\t\t\t\t\t\t\t\t\t\t1]];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].deliveryWeek = \"店铺未设置配送时间\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// picker组件时间起始\r\n\t\t\t\t\t\tlet start_time = siteItem.local_config.info.start_time;\r\n\t\t\t\t\t\tthis.orderCreateData.delivery[key].start_time = this.getTimeStr(start_time);\r\n\r\n\t\t\t\t\t\tlet end_time = siteItem.local_config.info.end_time;\r\n\t\t\t\t\t\tthis.orderCreateData.delivery[key].end_time = this.getTimeStr(end_time);\r\n\r\n\t\t\t\t\t\tvar current_time = new Date(this.$util.timeStampTurnTime(data.timestamp));\r\n\t\t\t\t\t\tvar hour = current_time.getHours();\r\n\t\t\t\t\t\tvar minute = current_time.getMinutes();\r\n\r\n\t\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery[key].start_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery[key].start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery[key].end_time.split(\":\")[0]);\r\n\t\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery[key].end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t// 检测当天是否能够配送，然后判断送达时间。不在配送时间当日不能下单，例：配送时间是周一到周五，那么周末不能下单，周一到周五可以下单\r\n\t\t\t\t\t\tif (this.orderCreateData.delivery[key].canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t\t// 当前时间早于配送时间，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\t\tif ((hour < start_hour) || (hour == start_hour && minute < start_minute)) {\r\n\t\t\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].buyer_ask_delivery_time = (start_hour.toString().length == 1 ? \"0\" +\r\n\t\t\t\t\t\t\t\t\t\t\tstart_hour :\r\n\t\t\t\t\t\t\t\t\t\t\tstart_hour) + ':' +\r\n\t\t\t\t\t\t\t\t\t\t(start_minute.toString().length == 1 ? \"0\" + start_minute : start_minute);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// if (((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\t// \t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t\t\t\t// 当前时间晚于配送时间，送达时间隐藏，不能下单\r\n\t\t\t\t\t\t\t\tif ((hour > end_hour) || (hour == end_hour && minute > end_minute)) {\r\n\t\t\t\t\t\t\t\t\tthis.orderCreateData.delivery[key].canLocalDelicery = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.orderCreateData.delivery[key].showTimeBar = false;\r\n\t\t\t\t\t\tthis.orderCreateData.delivery[key].deliveryWeek = \"店铺未开启配送时间\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsiteItem.goods_list.forEach((v) => {\r\n\t\t\t\t\tif (typeof(v.sku_spec_format) == 'string') {\r\n\t\t\t\t\t\tif (v.sku_spec_format) {\r\n\t\t\t\t\t\t\tv.sku_spec_format = JSON.parse(v.sku_spec_format);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tv.sku_spec_format = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.orderCreateData.buyer_message[key] = '';\r\n\t\t\t});\r\n\r\n\t\t\tif (data.is_virtual) this.orderCreateData.member_address = {\r\n\t\t\t\tmobile: ''\r\n\t\t\t};\r\n\r\n\t\t\tObject.assign(data, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t},\r\n\t\t// 转化时间字符串\r\n\t\tgetTimeStr(val) {\r\n\t\t\tvar h = parseInt(val / 3600).toString();\r\n\t\t\tvar m = parseInt((val % 3600) / 60).toString();\r\n\t\t\tif (m.length == 1) {\r\n\t\t\t\tm = '0' + m;\r\n\t\t\t}\r\n\t\t\tif (h.length == 1) {\r\n\t\t\t\th = '0' + h;\r\n\t\t\t}\r\n\t\t\treturn h + ':' + m;\r\n\t\t},\r\n\t\t// 订单计算\r\n\t\torderCalculate() {\r\n\t\t\tObject.keys(this.orderPaymentData.shop_goods_list).forEach((key, index) => {\r\n\t\t\t\tlet siteItem = this.orderPaymentData.shop_goods_list[key];\r\n\r\n\t\t\t\t//店铺发票\r\n\t\t\t\tif (siteItem.is_invoice) {\r\n\t\t\t\t\tthis.orderCreateData.invoice[key] = {};\r\n\t\t\t\t\tif (!Array.isArray(siteItem.invoice_config)) {\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].is_invoice = siteItem.is_invoice;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].invoice_type = siteItem.invoice_type;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].invoice_title = siteItem.invoice_title;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].taxpayer_number = siteItem.taxpayer_number;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].invoice_content = siteItem.invoice_content;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].invoice_full_address = siteItem.invoice_full_address;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].is_tax_invoice = siteItem.is_tax_invoice;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].invoice_email = siteItem.invoice_email;\r\n\t\t\t\t\t\tthis.orderCreateData.invoice[key].invoice_title_type = siteItem.invoice_title_type;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\tdata.delivery = JSON.stringify(data.delivery);\r\n\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: '/wholesale/api/ordercreate/calculate',\r\n\t\t\t\tdata,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\tthis.orderPaymentData.member_address = res.data.member_address;\r\n\t\t\t\t\t\tthis.orderPaymentData.delivery_money = res.data.delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_money = res.data.invoice_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.invoice_delivery_money = res.data.invoice_delivery_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.promotion_money = res.data.promotion_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.order_money = res.data.order_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.balance_money = res.data.balance_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.pay_money = res.data.pay_money;\r\n\t\t\t\t\t\tthis.orderPaymentData.goods_money = res.data.goods_money;\r\n\t\t\t\t\t\tObject.keys(res.data.shop_goods_list).forEach((key, index) => {\r\n\t\t\t\t\t\t\tlet siteItem = res.data.shop_goods_list[key];\r\n\t\t\t\t\t\t\tthis.orderPaymentData.shop_goods_list[key].order_money = siteItem.order_money;\r\n\t\t\t\t\t\t\tthis.orderPaymentData.shop_goods_list[key].pay_money = siteItem.pay_money;\r\n\t\t\t\t\t\t\tthis.orderPaymentData.shop_goods_list[key].invoice_money = siteItem.invoice_money;\r\n\t\t\t\t\t\t\tthis.orderPaymentData.shop_goods_list[key].invoice_delivery_money = siteItem.invoice_delivery_money;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * 订单创建\r\n\t\t * @param {String} pay_password 支付密码\r\n\t\t */\r\n\t\torderCreate(pay_password) {\r\n\t\t\tif (this.verify()) {\r\n\t\t\t\tif (this.isSub) return;\r\n\t\t\t\tthis.isSub = true;\r\n\r\n\t\t\t\tif (pay_password) this.orderCreateData.pay_password = pay_password;\r\n\r\n\t\t\t\tvar data = this.$util.deepClone(this.orderCreateData);\r\n\t\t\t\tdata.delivery = JSON.stringify(data.delivery);\r\n\t\t\t\tdata.coupon = JSON.stringify(data.coupon);\r\n\t\t\t\tdata.invoice = JSON.stringify(data.invoice);\r\n\t\t\t\tdata.member_address = JSON.stringify(data.member_address);\r\n\t\t\t\tdata.buyer_message = JSON.stringify(data.buyer_message);\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/wholesale/api/ordercreate/create',\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tif (this.orderPaymentData.pay_money == 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/pay/result/result', {\r\n\t\t\t\t\t\t\t\t\tcode: res.data\r\n\t\t\t\t\t\t\t\t}, 'redirectTo');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$refs.choosePaymentPopup.getPayInfo(res.data);\r\n\t\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// uni.removeStorage({\r\n\t\t\t\t\t\t\t// \tkey: 'wholesaleOrderCreateData',\r\n\t\t\t\t\t\t\t// \tsuccess: () => {}\r\n\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t\t\tif (res.data.error_code == 10 || res.data.error_code == 12) {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未创建',\r\n\t\t\t\t\t\t\t\t\tcontent: res.message,\r\n\t\t\t\t\t\t\t\t\tconfirmText: '去设置',\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.selectAddress();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$store.dispatch('getWholeSaleNumber');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.isSub = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 订单验证\r\n\t\tverify() {\r\n\t\t\tif (this.orderPaymentData.is_virtual == 1) {\r\n\t\t\t\tif (!this.orderCreateData.member_address.mobile.length) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入您的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar reg = /^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;\r\n\t\t\t\tif (!reg.test(this.orderCreateData.member_address.mobile)) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请输入正确的手机号码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.orderPaymentData.is_virtual == 0) {\r\n\r\n\t\t\t\tlet expressTypeVerify = true;\r\n\r\n\t\t\t\tfor (let key in this.orderPaymentData.shop_goods_list) {\r\n\t\t\t\t\tif (this.orderPaymentData.shop_goods_list[key].express_type.length == 0) {\r\n\t\t\t\t\t\texpressTypeVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list[key].site_name + '】未设置配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!expressTypeVerify) return false;\r\n\r\n\t\t\t\tif (!this.orderPaymentData.member_address) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '请先选择您的收货地址'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet deliveryVerify = true;\r\n\t\t\t\tfor (let key in this.orderCreateData.delivery) {\r\n\t\t\t\t\tif (JSON.stringify(this.orderCreateData.delivery[key]) == \"{}\") {\r\n\t\t\t\t\t\tdeliveryVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list[key].site_name + '】未设置配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.orderCreateData.delivery[key].delivery_type == 'store' && this.orderCreateData.delivery[key].store_id ==\r\n\t\t\t\t\t\t0) {\r\n\t\t\t\t\t\tdeliveryVerify = false;\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list[key].site_name + '】没有可提货的门店,请选择其他配送方式'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.orderCreateData.delivery[key].delivery_type == 'local') {\r\n\r\n\t\t\t\t\t\tif (this.orderCreateData.delivery[key].canLocalDelicery) {\r\n\r\n\t\t\t\t\t\t\tvar hour = parseInt(this.orderCreateData.delivery[key].buyer_ask_delivery_time.split(\":\")[0]);\r\n\t\t\t\t\t\t\tvar minute = parseInt(this.orderCreateData.delivery[key].buyer_ask_delivery_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t\tvar start_hour = parseInt(this.orderCreateData.delivery[key].start_time.split(\":\")[0]);\r\n\t\t\t\t\t\t\tvar start_minute = parseInt(this.orderCreateData.delivery[key].start_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t\tvar end_hour = parseInt(this.orderCreateData.delivery[key].end_time.split(\":\")[0]);\r\n\t\t\t\t\t\t\tvar end_minute = parseInt(this.orderCreateData.delivery[key].end_time.split(\":\")[1]);\r\n\r\n\t\t\t\t\t\t\t// 判断是否全天\r\n\t\t\t\t\t\t\tif (!(start_hour == end_hour && start_minute == end_minute)) {\r\n\r\n\t\t\t\t\t\t\t\t// 当前时间早于配送时间\r\n\t\t\t\t\t\t\t\tif (((hour < start_hour) || (hour == start_hour && minute < start_minute))) {\r\n\t\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list[key].site_name + '】送达时间不能小于配送开始时间'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tdeliveryVerify = false;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// 当前时间在配送时间内，送达时间：开始时间~结束时间\r\n\t\t\t\t\t\t\t\tif (!((hour > start_hour && hour < end_hour) || (hour == start_hour && minute > start_minute) || (hour ==\r\n\t\t\t\t\t\t\t\t\t\tstart_hour && minute >= start_minute && hour < end_hour))) {\r\n\t\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list[key].site_name + '】送达时间范围：开始时间~结束时间'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tdeliveryVerify = false;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '店铺【\"' + this.orderPaymentData.shop_goods_list[key].site_name + '】已休息'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tdeliveryVerify = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!deliveryVerify) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 显示店铺配送信息\r\n\t\topenSiteDelivery(siteId, deliveryData) {\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\tthis.siteDelivery.site_id = siteId;\r\n\t\t\tthis.siteDelivery.data = deliveryData;\r\n\t\t\tthis.$refs.deliveryPopup.open();\r\n\t\t},\r\n\t\t// 选择配送方式\r\n\t\tselectDeliveryType(data) {\r\n\t\t\tthis.orderCreateData.delivery[this.siteDelivery.site_id].delivery_type = data.name;\r\n\t\t\tthis.orderCreateData.delivery[this.siteDelivery.site_id].delivery_type_name = data.title;\r\n\t\t\tthis.tempData = {\r\n\t\t\t\tdelivery: this.$util.deepClone(this.orderPaymentData.delivery)\r\n\t\t\t};\r\n\t\t\t// 如果是门店配送\r\n\t\t\tif (data.name == 'store') {\r\n\t\t\t\tif (data.store_list[0] != undefined) {\r\n\t\t\t\t\tthis.orderCreateData.delivery[this.siteDelivery.site_id].store_id = data.store_list[0].store_id;\r\n\t\t\t\t\tthis.tempData.delivery[this.siteDelivery.site_id].store_id = data.store_list[0].store_id;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择自提点\r\n\t\tselectPickupPoint(store_id) {\r\n\t\t\tthis.orderCreateData.delivery[this.siteDelivery.site_id].store_id = store_id;\r\n\t\t\tObject.assign(this.orderPaymentData, this.orderCreateData);\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs['deliveryPopup'].close();\r\n\t\t},\r\n\t\t// 使用余额\r\n\t\tuseBalance() {\r\n\t\t\tif (this.orderCreateData.is_balance) this.orderCreateData.is_balance = 0;\r\n\t\t\telse this.orderCreateData.is_balance = 1;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\timgError(siteIndex, goodsIndex) {\r\n\t\t\tthis.orderPaymentData.shop_goods_list[siteIndex].goods_list[goodsIndex].sku_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//打开发票弹窗\r\n\t\topenInvoicePopup(val) {\r\n\t\t\tthis.orderInvoice = this.$util.deepClone(val);\r\n\t\t\tthis.orderInvoice.invoice_type = this.orderInvoice.invoice_type == undefined ? 1 : this.orderInvoice.invoice_type;\r\n\t\t\tthis.orderInvoice.invoice_title_type = this.orderInvoice.invoice_title_type == undefined ? 1 : this.orderInvoice.invoice_title_type;\r\n\t\t\tthis.orderInvoice.invoice_content = this.orderInvoice.invoice_content ? this.orderInvoice.invoice_content : '';\r\n\t\t\tthis.orderInvoice.invoice_title = this.orderInvoice.invoice_title ? this.orderInvoice.invoice_title : '';\r\n\t\t\tthis.orderInvoice.invoice_full_address = this.orderInvoice.invoice_full_address ? this.orderInvoice.invoice_full_address :\r\n\t\t\t\t''; //邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = this.orderInvoice.is_tax_invoice ? this.orderInvoice.is_tax_invoice : 0; //是否需要增值税发票\r\n\t\t\tthis.orderInvoice.invoice_email = this.orderInvoice.invoice_email ? this.orderInvoice.invoice_email : ''; // 邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = this.orderInvoice.taxpayer_number ? this.orderInvoice.taxpayer_number : ''; //纳税人识别号\r\n\t\t\tthis.openPopup('invoicePopup');\r\n\t\t},\r\n\t\t// 切换发票开关\r\n\t\tchangeIsInvoice() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 0) {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 1;\r\n\t\t\t} else {\r\n\t\t\t\tthis.orderInvoice.is_invoice = 0;\r\n\t\t\t}\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票类型\r\n\t\tchangeInvoiceType(invoice_type) {\r\n\t\t\tthis.orderInvoice.invoice_type = invoice_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 切换发票个人还是企业\r\n\t\tchangeInvoiceTitleType(invoice_title_type) {\r\n\t\t\tthis.orderInvoice.invoice_title_type = invoice_title_type;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t// 选择发票内容\r\n\t\tchangeInvoiceContent(invoice_content) {\r\n\t\t\tthis.orderInvoice.invoice_content = invoice_content;\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\t//关闭发票弹窗\r\n\t\tcloseInvoicePopup() {\r\n\t\t\tthis.orderInvoice.invoice_type = 1; // 发票类型  1 纸质 2 电子\r\n\t\t\tthis.orderInvoice.invoice_title_type = 1; // 抬头类型  1 个人 2 企业\r\n\t\t\tthis.orderInvoice.invoice_content = ''; // 发票内容\r\n\t\t\tthis.orderInvoice.invoice_title = ''; // 发票抬头\r\n\t\t\tthis.orderInvoice.invoice_full_address = ''; // 发票邮寄地址\r\n\t\t\tthis.orderInvoice.is_tax_invoice = 0; // 是否需要增值税专用发票  0 不需要 1 需要\r\n\t\t\tthis.orderInvoice.invoice_email = ''; //发票邮箱\r\n\t\t\tthis.orderInvoice.taxpayer_number = ''; //纳税人识别号\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t\tthis.$refs.invoicePopup.close();\r\n\t\t},\r\n\t\t// 发票验证\r\n\t\tinvoiceVerify() {\r\n\t\t\tif (this.orderInvoice.is_invoice == 1) {\r\n\t\t\t\tif (this.orderInvoice.invoice_title == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票抬头\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_title_type == 2 && this.orderInvoice.taxpayer_number == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写纳税人识别号\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 1 && this.orderInvoice.invoice_full_address == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写发票邮寄地址\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请填写邮箱\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_type == 2 && this.orderInvoice.invoice_email != '') {\r\n\t\t\t\t\tvar reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n\t\t\t\t\tif (!reg.test(this.orderInvoice.invoice_email)) {\r\n\t\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: \"请填写正确的邮箱地址\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.orderInvoice.invoice_content == '') {\r\n\t\t\t\t\tthis.$refs.invoicePopup.open();\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: \"请选择发票内容\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t// 保存发票信息\r\n\t\tsaveInvoice() {\r\n\t\t\tif (this.invoiceVerify()) {\r\n\t\t\t\tthis.orderPaymentData.shop_goods_list[this.orderInvoice.site_id] = this.orderInvoice;\r\n\t\t\t\tthis.orderCalculate();\r\n\t\t\t\tthis.closePopup('invoicePopup');\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindTimeChange(e) {\r\n\t\t\tlet time = e.target.value;\r\n\t\t\tthis.orderCreateData.delivery[e.currentTarget.dataset.siteid].buyer_ask_delivery_time = time;\r\n\t\t\tthis.orderCalculate();\r\n\t\t\tthis.$forceUpdate();\r\n\t\t},\r\n\t\ttoShopDetail(e) {\r\n\t\t\tthis.$util.redirectTo('/otherpages/shop/index/index', {\r\n\t\t\t\tsite_id: e\r\n\t\t\t});\r\n\t\t},\r\n\t\tnavigateTo(sku_id) {\r\n\t\t\tthis.$util.redirectTo('/promotionpages/wholesale/detail/detail', {\r\n\t\t\t\tsku_id\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 显示选择支付方式弹框\r\n\t\topenChoosePayment() {\r\n\t\t\tuni.setStorageSync('paySource', '');\r\n\t\t\tif (this.verify()) this.$refs.choosePaymentPopup.open();\r\n\t\t},\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\r\n\t\tif (uni.getStorageSync('addressBack')) {\r\n\t\t\tuni.removeStorageSync('addressBack');\r\n\t\t}\r\n\r\n\t\t// 判断登录\r\n\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\tthis.$util.redirectTo('/pages/login/login/login');\r\n\t\t} else {\r\n\t\t\tthis.getOrderPaymentData();\r\n\t\t}\r\n\r\n\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t},\r\n\tonHide() {\r\n\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.show();\r\n\t},\r\n\tcomputed: {\r\n\t\t// 余额抵扣\r\n\t\tbalanceDeduct() {\r\n\t\t\tif (this.orderPaymentData.member_account.balance_total <= parseFloat(this.orderPaymentData.order_money).toFixed(2)) {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.member_account.balance_total).toFixed(2);\r\n\t\t\t} else {\r\n\t\t\t\treturn parseFloat(this.orderPaymentData.order_money).toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tfilters: {\r\n\t\t// 金额格式化输出\r\n\t\tmoneyFormat(money) {\r\n\t\t\treturn parseFloat(money).toFixed(2);\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":""}