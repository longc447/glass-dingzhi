{"version":3,"sources":["webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?2527","webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?4da7","webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?d0c4","webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?af25","uni-app:///components/ns-goods-sku/ns-goods-sku.vue","webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?f0b6","webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?e963","webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?14ac","webpack:////Users/longchu/Documents/接单/改客服源码/components/ns-goods-sku/ns-goods-sku.vue?fa58"],"names":["name","components","uniPopup","props","goodsDetail","type","default","disabled","pointLimit","maxBuy","minBuy","data","rimless","scrollto","isIphoneX","systemInfo","number","btnSwitch","callback","skuId","pintuanId","limitNumber","minNumber","preview","cartNumber","leftIndex","ball_mirrorIndex","cylinder_mirrorIndex","axisIndex","sumIndex","objIndex","leftArray","ball_mirrorArray","cylinder_mirrorArray","ball_mirrorArray_bk","cylinder_mirrorArray_bk","axisArray","sumArray","objArray","photometric","is_wholesaler","myValue","nowIndex","lastIndex","quantity","mirrolist","sumPrice","newballlist","buyer_message","mounted","console","watch","newNum","oldNum","newData","oldData","methods","goodsDetailChange","bstep","cstep","setBalllist","min","arr","max","getSumPrice","sum","nomove","e","getList","s","num","setMyPopup","i","list","dataitem","title","ball_max","item","doIndex","index","getWholesale","url","async","res","goods_id","mirro","reset","bindPickerChangeF","bindPickerChangeA","bindPickerChangeB","bindPickerChangeC","bindPickerChangeD","bindPickerChangeE","show","wholesale_sku_id","hide","change","spec_id","getGoodsSkuInfo","sku_id","success","goodsSkuDetail","discountTimeMachine","parse","_this","fail","getPintuanGoodsSkuInfo","pintuan_id","promotion_price","price","toFixed","end_time","setTimeout","getBargainGoodsSkuInfo","bargain_id","floor_price","getTopicsGoodsSkuInfo","topic_id","topic_price","getGroupbuyGoodsSkuInfo","groupbuy_id","getSeckillGoodsSkuInfo","seckill_id","getPointGoodsSkuInfo","exchange_id","getWholeSaleGoodsSkuInfo","getClickGoodsAdd","obj","eyeIndex","product_num","axisValue","removeTap","dealData","goods_attr_format","attr_value_id","changeNum","tag","stock","purchased_num","diff","blur","keyInput","flag","buy_num","confirm","uni","LensParam","eye","passage","a_dd","ball_mirror","cylinder_mirror","axis","checkParam","ispost","postJoinCart","site_id","a_dd_data","passage_data","postBuyNow","key","postSeckill","postPintuan","pintuan_goods_id","group_id","postTopic","topic_goods_id","postGroupBuy","postPresale","presale_id","postBargain","id","postPoint","postPfJoin","postPfBuy","closeSkuPopup","imgError","valueImgError","index_value","default_goods_img","getCartData"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACc;AACuB;;;AAGhG;AACsN;AACtN,gBAAgB,uNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,+LAEN;AACP,KAAK;AACL;AACA,aAAa,+OAEN;AACP,KAAK;AACL;AACA,aAAa,mOAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnIA;AAAA;AAAA;AAAA;AAAw2B,CAAgB,w0BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqT53B;AACA,+F;AACA;eACA;EACAA,oBADA;EAEAC;IACAC,kBADA,EAFA;;EAKAC;IACAC;MACAC,YADA;MAEAC,aAFA,EADA;;IAKAC;MACAF,aADA;MAEAC,cAFA,EALA;;IASAE;MACAH,sBADA,EATA;;IAYAI;MACAJ,YADA;MAEAC,UAFA,EAZA;;IAgBAI;MACAL,YADA;MAEAC,UAFA,EAhBA,EALA;;;EA0BAK,IA1BA,kBA0BA;IACA;MACAC,WADA;MAEAC,mBAFA;MAGAC,gBAHA;MAIAC,cAJA,EAIA;MACAC,SALA;MAMAC,gBANA,EAMA;MACAZ,QAPA,EAOA;MACAa,cARA,EAQA;MACAC,QATA;MAUAC,YAVA,EAUA;MACAC,cAXA,EAWA;MACAC,YAZA;MAaA;MACAC,UAdA;MAeAC,aAfA,EAeA;;MAEAC,YAjBA,EAiBA;MACAC,mBAlBA,EAkBA;MACAC,uBAnBA,EAmBA;MACAC,YApBA,EAoBA;MACAC,WArBA,EAqBA;MACAC,WAtBA,EAsBA;;MAEAC,qBAxBA,EAwBA;MACAC,oBAzBA,EAyBA;MACAC,wBA1BA,EA0BA;MACAC,uBA3BA;MA4BAC,2BA5BA;MA6BAC,aA7BA,EA6BA;;MAEAC,YA/BA,EA+BA;MACAC,YAhCA,EAgCA;;MAEAC,cAlCA,EAkCA;MACAC,4CAnCA,EAmCA;MACA;MACAC,WArCA,EAqCA;MACAC,WAtCA,EAsCA;MACAC,YAvCA,EAuCA;MACAC,WAxCA;MAyCAC,aAzCA;MA0CAC,WA1CA;MA2CAC,eA3CA;MA4CAC,iBA5CA;;EA8CA,CAzEA;EA0EAC,OA1EA,qBA0EA;IACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA,CAtFA;EAuFAC;IACA;IACA;IACA;IACA3C,UAJA,sBAIA4C,MAJA,EAIAC,MAJA,EAIA;MACA;IACA,CANA;IAOAjD,WAPA,uBAOAkD,OAPA,EAOAC,OAPA,EAOA;MACA;MACA;MACA;MACAL;MACA;;MAEA;QACA;QACA;MACA;IACA,CAlBA;IAmBAxC,MAnBA,kBAmBA4C,OAnBA,EAmBAC,OAnBA,EAmBA;MACA;QACA;MACA;IACA,CAvBA,EAvFA;;EAgHAC;IACAC,iBADA,6BACAH,OADA,EACAC,OADA,EACA;MACA;MACA;MACA;MACAL;MACA;MACA;QACA;QACA;QACAQ,YADA;QAEA;UACAA;UACA1B;QACA;QACA;QACA;QACA2B,YADA;QAEA;UACAA;UACA1B;QACA;QACA;QACA;QACA;UACAG;QACA;QACA;QACA;QACA;UACAC;QACA,CAFA,MAEA;UACA;YACAA;UACA;QACA;QACA;QACA;QACA;UACAC;QACA,CAFA,MAEA;UACA;YACAA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA,CAzDA;IA0DAsB,WA1DA,yBA0DA;MACA;MACAC,OADA;MAEAC,QAFA;MAGA;MACA;QACAA;MACA;MACA;QACAD;QACAE;QACA;QACAD;MACA,CALA;MAMAA;MACAA;QACA;MACA,CAFA;;MAIA;MACA;IACA,CA/EA;IAgFAE,WAhFA,yBAgFA;MACA;MACA;MACA;MACA;MACA;QACAC;MACA,CAFA;MAGA;IACA,CAzFA;IA0FAC,MA1FA,kBA0FAC,CA1FA,EA0FA;MACA;IACA,CA5FA;IA6FA;AACA;AACA;AACA;IACAC,OAjGA,qBAiGA;MACA;MACAC,QADA;MAEA;QACAA;QACA;QACA;QACAC;QACA;QACAR;MACA;MACA;MACA;IACA,CA9GA;IA+GAS,UA/GA,sBA+GAC,CA/GA,EA+GAxE,IA/GA,EA+GAyE,IA/GA,EA+GA;;MAEA;MACAC;MACA;MACA;;QAEA;QACA;UACAC,aADA;;;QAIA;;QAEA;UACA;UACAZ,OADA;UAEAF,OAFA;UAGAC,QAHA;UAIA;YACAD;YACAE;;YAEA;YACAa,QADA,GACA;cACA;cACAC;cACA;cACAf;YACA;UACA,CAXA;UAYAA;UACAA;YACA;UACA,CAFA;UAGAY;UACAxB;UACA;UACA;UACA;QACA;MACA;MACAA;MACA;MACA;MACA;;MAEA;;IAEA,CAhKA;IAiKA4B,OAjKA,mBAiKAC,KAjKA,EAiKA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;IACA,CA1KA;IA2KAC,YA3KA,wBA2KA1B,OA3KA,EA2KA;kBACA;oBACA2B,yBADA;oBAEAC,YAFA,GADA,SACAC,GADA;;;gBAMA;kBACA;kBACA;gBACA;gBACA;gBACA;gBACA;gBAZA,yBAaA;kBACAF,mCADA;kBAEAtE;oBACAyE,qCADA,EAFA;;kBAKAF,YALA,GAbA,QAaAG,KAbA;;gBAoBA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,qBA1BA;IA2BA,CAtMA;IAuMAC,KAvMA,mBAuMA;MACA;MACA;MACA;MACA;IACA,CA5MA;IA6MAC,iBA7MA,6BA6MApB,CA7MA,EA6MA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CApNA;IAqNA;IACAqB,iBAtNA,6BAsNArB,CAtNA,EAsNA;MACA;MACA;MACAU;MACA;QACAA;QACAA;QACA;QACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACAf;QACA;MACA,CAJA;MAKA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;UACAe;QACA,CAFA,MAEA;UACAA;QACA;MACA;MACAA;MACA;IACA,CA5PA;IA6PAY,iBA7PA,6BA6PAtB,CA7PA,EA6PA;MACA;MACA;MACA;MACA;MACA;QACA;UACA;UACAS,QADA,EACA;YACAC;YACAA;UACA;UACA;UACA;UACA;QACA,CATA;QAUA;QACAA;QACA;QACA;MACA;MACA;MACA;MACAA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;UACAf;QACA;MACA,CALA;MAMA;QACA;QACA;QACA;QACA;UACAe;QACA,CAFA,MAEA;UACAA;QACA;MACA;MACAA;MACA;MACA;IACA,CA5SA;IA6SAa,iBA7SA,6BA6SAvB,CA7SA,EA6SA;MACA;MACA;MACA;IACA,CAjTA;IAkTAwB,iBAlTA,6BAkTAxB,CAlTA,EAkTA;MACA;MACA;MACA;IACA,CAtTA;IAuTAyB,iBAvTA,6BAuTAzB,CAvTA,EAuTA;MACA;MACA;MACA;IACA,CA3TA;IA4TA0B,IA5TA,gBA4TAxF,IA5TA,EA4TAa,QA5TA,EA4TA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA,CAFA,MAEA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA,CAHA,MAGA;MACA4E,gBADA,EACA;QACA;QACA;MACA;MACA;QACA;QACA;MACA;IACA,CAnVA;IAoVAC,IApVA,kBAoVA;MACA;IACA,CAtVA;IAuVAC,MAvVA,kBAuVA7E,KAvVA,EAuVA8E,OAvVA,EAuVA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;UACA;UACA;YACA;UACA;QACA;MACA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAvXA;IAwXA;IACAC,eAzXA,6BAyXA;MACA;MACA;QACAjB,yBADA;QAEAtE;UACAwF,kBADA,EAFA;;QAKAC;UACAlD;UACA;UACA;YACAvC;YACA;YACA;;YAEA;YACAA,oBADA;YAEA;YACA;cACA0F;cACAA,uCADA;YAEA;;YAEA;YACAC,mBADA,EACA;cACAD;YACA,CAHA,MAGA;cACAA;YACA;YACA;YACAE,KADA,CACAF,gCADA;YAEAG;YACAA;UACA,CAvBA,MAuBA;YACA;UACA;QACA,CAlCA;QAmCAC;UACA;UACA;QACA,CAtCA;;IAwCA,CAnaA;IAoaA;IACAC,sBAraA,oCAqaA;MACA;QACAzB,8BADA;QAEAtE;UACAwF,kBADA;UAEAQ,uCAFA,EAFA;;QAMAP;UACA;UACA;YACA;cACA;cACA;cACA;YACA;YACAzF;YACA;YACA;YACA;YACA;;YAEA;YACA0F,cADA,CACAO,eADA,GACA,mCADA;YAEA;YACA;YACAP,cADA,CACAQ,KADA,GACA,gCADA,EACAC,OADA,CACA,CADA,IACA,CAFA;;YAIA;YACA;cACA;cACAC,QADA,GACA5B,aADA;YAEA,CAHA,MAGA;cACA;gBACAR,cADA;;cAGAqC;gBACA;gBACA,4BADA,EACA;kBACAb,oCADA,EADA;;gBAIA,YAJA;;cAMA,CAPA,EAOA,IAPA;YAQA;YACA;YACA;UACA,CArCA,MAqCA;YACA;UACA;QACA,CAhDA;QAiDAM;UACA;UACA;QACA,CApDA;;IAsDA,CA5dA;IA6dA;IACAQ,sBA9dA,oCA8dA;MACA;QACAhC,8BADA;QAEAtE;UACAwF,kBADA;UAEAe,uCAFA,EAFA;;QAMAd;UACA;UACA;YACA;cACA;cACA;cACA;YACA;YACAzF;YACA;YACA;YACA;YACA0F,cADA,CACAc,WADA,GACA,2BADA;YAEA,kEAXA,CAWA;YACA;YACA;YACAd,cADA,CACAQ,KADA,GACA,gCADA,EACAC,OADA,CACA,CADA,IACA,CAFA;;YAIA;YACA;cACA;cACAC,QADA,GACA5B,aADA;YAEA,CAHA,MAGA;cACA;gBACAR,cADA;;cAGAqC;gBACA;gBACA,4BADA,EACA;kBACAb,oCADA,EADA;;gBAIA,YAJA;;cAMA,CAPA,EAOA,IAPA;YAQA;YACA;YACA;UACA,CAnCA,MAmCA;YACA;UACA;QACA,CA9CA;QA+CAM;UACA;UACA;QACA,CAlDA;;IAoDA,CAnhBA;IAohBA;IACAW,qBArhBA,mCAqhBA;MACA;QACAnC,iCADA;QAEAtE;UACAwF,kBADA;UAEAkB,mCAFA,EAFA;;QAMAjB;UACA;UACA;YACA;cACA;cACA;cACA;YACA;YACAzF;YACA;YACA;YACA;YACA0F,cADA,CACAiB,WADA,GACA,4BADA;YAEA;YACA;YACAjB,cADA,CACAQ,KADA,GACA,iCADA,EACAC,OADA,CACA,CADA,IACA,CAFA;;YAIA;YACA;cACA;cACAC,QADA,GACA5B,aADA;YAEA,CAHA,MAGA;cACA;gBACAR,cADA;;cAGAqC;gBACA;gBACA,4BADA,EACA;kBACAb,qCADA,EADA;;gBAIA,YAJA;;cAMA,CAPA,EAOA,IAPA;YAQA;YACA;YACA;UACA,CAlCA,MAkCA;YACA;UACA;QACA,CA7CA;QA8CAM;UACA;UACA;QACA,CAjDA;;IAmDA,CAzkBA;IA0kBA;IACAc,uBA3kBA,qCA2kBA;MACA;QACAtC,+BADA;QAEAtE;UACAwF,kBADA;UAEAqB,yCAFA,EAFA;;QAMApB;UACA;UACA;YACAzF;YACA;YACA;YACA;YACA;YACA;YACA0F,cADA,CACAQ,KADA,GACA,iCADA,EACAC,OADA,CACA,CADA,IACA,CAFA;;YAIA;YACA;cACA;cACAC,QADA,GACA5B,aADA;YAEA,CAHA,MAGA;cACA;gBACAR,cADA;;cAGAqC;gBACA;gBACA,4BADA,EACA;kBACAb,qCADA,EADA;;gBAIA,YAJA;;cAMA,CAPA,EAOA,IAPA;YAQA;;YAEA;YACA;UACA,CA7BA,MA6BA;YACA;UACA;QACA,CAxCA;QAyCAM;UACA;UACA;QACA,CA5CA;;IA8CA,CA1nBA;IA2nBA;IACAgB,sBA5nBA,oCA4nBA;MACA;QACAxC,qCADA;QAEAtE;UACAwF,kBADA;UAEAuB,uCAFA,EAFA;;QAMAtB;UACA;UACA;YACA;cACA;cACA;cACA;YACA;YACAzF;YACA;YACA;;YAEA;;YAEA;YACA0F,cADA,CACAQ,KADA,GACA,iCADA,EACAC,OADA,CACA,CADA,IACA,CADA;;YAGA;YACA;cACA;cACAC,QADA,GACA5B,aADA;YAEA,CAHA,MAGA;cACA;gBACAR,cADA;;cAGAqC;gBACA;gBACA,4BADA,EACA;kBACAb,qCADA,EADA;;gBAIA,YAJA;;cAMA,CAPA,EAOA,IAPA;YAQA;;YAEA;YACA;UACA,CAnCA,MAmCA;YACA;UACA;QACA,CA9CA;QA+CAM;UACA;UACA;QACA,CAlDA;;IAoDA,CAjrBA;IAkrBA;IACAkB,oBAnrBA,kCAmrBA;MACA;QACA1C,oCADA;QAEAtE;UACAwF,kBADA;UAEAyB,yCAFA,EAFA;;QAMAxB;UACA;UACA;YACA;cACA;cACA;cACA;YACA;YACAzF;YACA;YACA;YACA;YACA;UACA,CAXA,MAWA;YACA;UACA;QACA,CAtBA;QAuBA8F;UACA;UACA;QACA,CA1BA;;IA4BA,CAhtBA;IAitBA;IACAoB,wBAltBA,sCAktBA;MACA;QACA5C,gCADA;QAEAtE;UACAwF,kBADA,EAFA;;QAKAC;UACA;UACA;YACAzF;YACA;YACA;YACA;YACA;YACA;YACA;UACA,CARA,MAQA;YACA;UACA;QACA,CAlBA;QAmBA8F;UACA;UACA;QACA,CAtBA;;IAwBA,CA3uBA;IA4uBA;IACAqB,gBA7uBA,4BA6uBAC,GA7uBA,EA6uBAC,QA7uBA,EA6uBA;MACA;MACA;QACAlG,mBADA;QAEAmG,cAFA;QAGApG,mBAHA;QAIAD,oBAJA;QAKAD,+BALA;QAMAD,2BANA;QAOAD,wBAPA;QAQAyG,YARA;QASAjG,kDATA;QAUAD,0CAVA;;MAYA;MACA;MACA;MACA;MACA;IACA,CAhwBA;IAiwBA;IACAmG,SAlwBA,qBAkwBApD,KAlwBA,EAkwBA;MACA;IACA,CApwBA;IAqwBAqD,QArwBA,sBAqwBA;MACA;MACAvD;;MAEA;MACA;QACAA;QACAA;MACA;;MAEA;MACA;;MAEA;MACA;QACA;QACAA;QACA;UACA;YACA;YACAwD,iBADA,CACA7D,CADA,EACA8D,aADA,IACAD,kCADA,EACA;cACAxD;YACA;UACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;;MAEA;;MAEA;;MAEA;;MAEA;IACA,CA7yBA;IA8yBA0D,SA9yBA,qBA8yBAC,GA9yBA,EA8yBA;MACA;;MAEA;MACA;;MAEA;;MAEA;QACAC;MACA;;MAEA;QACA5E;MACA;;MAEA;QACA;QACA;UACA4E;QACA,CAFA,MAEA;UACAA;QACA;QACA;MACA,CARA,MAQA;QACA;QACA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;QACA;QACA5E;MACA,CATA,MASA;MACAzD,WADA,CACAkE,GADA,GACA,sBADA,EACA;QACA;QACAmE;MACA,CAJA,MAIA;QACAA;MACA;MACA;QACA;QACA;UACA;QACA,CAFA,MAEA;UACA;YACA;cACA9D;cACAvE,WADA,CACAsI,aADA,GACA,qBAFA;;YAIA;UACA;UACA;YACA;YACA;cACA;gBACA/D;gBACA,WADA;gBAEA,qBAFA;gBAGA,UAHA;gBAIA,eAJA;gBAKA,qBALA;gBAMA,OANA;gBAOAgE,IAPA;gBAQA,qBATA;;YAWA,CAZA,MAYA;cACA;gBACAhE,sDADA;;YAGA;YACA;UACA;UACA;YACA;cACAA,+DADA;;YAGA;UACA;QACA;MACA,CAxCA,MAwCA;QACA;QACA;UACA;QACA,CAFA,MAEA;UACA;YACA;cACAA,yDADA;;UAGA;UACA;QACA;MACA;MACA;QACA;MACA;IACA,CA94BA;IA+4BAiE,IA/4BA,kBA+4BA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;;MAEA;QACA;MACA;;MAEA;QACA;QACA;MACA;MACA;QACA;MACA;;MAEA;MACA;MACA5B;QACA;MACA,CAFA,EAEA,CAFA;IAGA,CA36BA;IA46BA;IACA6B,QA76BA,oBA66BAC,IA76BA,EA66BA5H,QA76BA,EA66BA;MACA8F;QACA;;QAEA;QACA;UACA;UACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA+B,OADA,EACA;UACA;UACA;QACA,CAJA,MAIA;QACA3I,WADA,CACA2I,OADA,EACA;UACA;UACA;QACA,CAJA,MAIA;QACA,CADA,IACA,4CADA,EACA;UACA;UACA;QACA,CAJA,MAIA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;QACA;QACA;UACA;QACA;;QAEA;QACA;MACA,CAxCA,EAwCA,CAxCA;IAyCA,CAv9BA;;IAy9BA;IACAC,OA19BA,qBA09BA;MACA;MACA;MACAC;MACA;QACA;UACAtE,iBADA;;QAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;;MAEA;QACA;QACA;MACA;;MAEA;MACA;QACA;UACA;YACAA,cADA;;UAGA;QACA;;QAEA;UACA;YACAA,iBADA;;UAGA;QACA;;QAEA;UACA;YACAA,aADA;;UAGA;QACA;;QAEA;QACAvE,WADA,CACAsI,aADA,EACA;UACA;YACA/D;YACAvE,WADA,CACAsI,aADA,GACA,wBAFA;;UAIA;QACA;QACA;UACA;UACA;YACA;cACA/D;cACA,cADA;cAEA,wBAFA;cAGA,UAHA;cAIA,kBAJA;cAKA,wBALA;cAMA,OANA;cAOAgE,IAPA;cAQA,wBATA;;UAWA,CAZA,MAYA;YACA;cACAhE,4DADA;;UAGA;UACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACAlD;UACAE;UACAD;UACAE;UACAE;UACAD;UACAb;UACAmF;QACA,CATA;QAUA;QACA;UACA+C;YACAC,mCADA,EACA;YACAC,qCAFA,EAEA;YACAC,kCAHA,EAGA;YACA/E,kBAJA,EAIA;YACAgF,mDALA,EAKA;YACAC,+DANA,EAMA;YACAC,iBAPA,EAOA;YACArD,gBARA;;QAUA,CAXA;QAYA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAjD;QACA;UACA;UACA;QACA;MACA,CArHA;IAsHA,CA5mCA;IA6mCA;AACA;AACA;IACAuG,UAhnCA,wBAgnCA;MACA;;MAEA;QACA;UACA;YACA;cACA9E,cADA;;YAGA+E;YACA;UACA;UACA;YACA;cACA/E,cADA;;YAGA+E;YACA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACA;cACA/E,eADA;;YAGA+E;YACA;UACA;UACA;YACA;cACA/E,cADA;;YAGA+E;YACA;UACA;UACA;UACA;YACA;cACA/E,kBADA;;YAGA+E;YACA;UACA;;QAEA,CA9CA;MA+CA;MACA;IACA,CArqCA;IAsqCAC,YAtqCA,wBAsqCAT,SAtqCA,EAsqCA;MACA;MACA;QACA/C,kBADA;QAEAyD,iCAFA;QAGAnF,+BAHA;QAIAzB,iCAJA;QAKApC,qBALA;MAMA;QACAgJ,iCADA;QAEAzD,kBAFA;QAGAmD;QACA5H,gBADA,IACA,CAJA;QAKA6H;QACAtH,oBADA,CACA,yBADA,IACA,CANA;QAOAuH,oBAPA,EAOA;QACA;QACA;QACAK,mEAVA;QAWAC,sEAXA;QAYAxF,WAZA;QAaAtB,iCAbA;QAcApC,qBAdA,EANA;;MAsBA;MACA;QACAqE,oBADA;QAEAtE,WAFA;QAGAyF;UACA;UACA;UACA;YACA;cACAzB,gBADA;;YAGA;UACA;UACA;UACA;QACA,CAdA;QAeA8B;UACA;UACA;QACA,CAlBA;;IAoBA,CAntCA;IAotCAsD,UAptCA,wBAotCA;MACA;QACA5D,kBADA;QAEA7B,gBAFA;QAGAgF;QACA5H,gBADA,IACA,CAJA;QAKA6H;QACA5H,oBADA,IACA,CANA;QAOA6H;QACA;QACA;QACA;MAVA;;;MAcAP;QACAe,sBADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CA3uCA;IA4uCA6D,WA5uCA,yBA4uCA;;MAEA;MACA;QACAvC,uCADA;QAEApD,gBAFA;QAGA6B,kBAHA;;;MAMA8C;QACAe,6BADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CA7vCA;IA8vCA8D,WA9vCA,yBA8vCA;;MAEA;MACA;QACAC,qCADA;QAEAC,mCAFA;QAGA9F,gBAHA;;;MAMA2E;QACAe,6BADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CA/wCA;IAgxCAiE,SAhxCA,uBAgxCA;MACA;MACA;QACAC,mCADA;QAEAhG,gBAFA;;;MAKA2E;QACAe,2BADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CA/xCA;IAgyCAmE,YAhyCA,0BAgyCA;MACA;MACA;QACA/C,yCADA;QAEArB,kBAFA;QAGA7B,gBAHA;;;MAMA2E;QACAe,8BADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CAhzCA;IAizCAoE,WAjzCA,yBAizCA;MACA;MACA;QACAC,uCADA;QAEAtE,kBAFA;QAGA7B,gBAHA;;MAKA2E;QACAe,6BADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CAh0CA;IAi0CAsE,WAj0CA,yBAi0CA;MACA;MACA;QACAzF,kCADA;QAEAtE;UACAgK,uBADA,EAFA;;QAKAvE;UACA;UACA;YACA;YACA,uCADA,EACA;cACAuE,YADA,EADA;;YAIA,YAJA;;UAMA,CAPA,MAOA;YACA;cACAhG,kBADA;;UAGA;QACA,CAnBA;;IAqBA,CAx1CA;IAy1CAiG,SAz1CA,uBAy1CA;;MAEA;MACA;QACAD,gCADA;QAEAxE,kBAFA;QAGA7B,gBAHA;;MAKA2E;QACAe,8BADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CAz2CA;IA02CAyE,UA12CA,wBA02CA;MACA;MACA;QACA5F,8BADA;QAEAtE;UACAiJ,iCADA;UAEAzD,kBAFA;UAGA7B,gBAHA,EAFA;;QAOA8B;UACA;UACA;YACA;cACAzB,gBADA;;YAGA;YACA;UACA;UACA;UACA;QACA,CAlBA;QAmBA8B;UACA;UACA;QACA,CAtBA;;IAwBA,CAp4CA;IAq4CAqE,SAr4CA,uBAq4CA;MACA;MACA;QACA3E,kBADA;QAEA7B,gBAFA;;;MAKA2E;QACAe,+BADA;QAEArJ,UAFA;QAGAyF;UACA;UACA;QACA,CANA;;IAQA,CAp5CA;IAq5CA2E,aAr5CA,2BAq5CA;MACA;IACA,CAv5CA;IAw5CAC,QAx5CA,sBAw5CA;MACA;MACA;IACA,CA35CA;IA45CAC,aA55CA,yBA45CAlG,KA55CA,EA45CAmG,WA55CA,EA45CA;MACA;MACAC,iBADA;MAEA;IACA,CAh6CA;IAi6CA;IACAC,WAl6CA,yBAk6CA;MACA;QACAnG,2BADA;QAEAmB;UACA;YACA;YACA;cACA;gBACA;gBACA;cACA;YACA;UACA;QACA,CAZA;;IAcA,CAj7CA,EAhHA,E;;;;;;;;;;;;;ACxTA;AAAA;AAAA;AAAA;AAA+lD,CAAgB,+9CAAG,EAAC,C;;;;;;;;;;;ACAnnD;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAyvC,CAAgB,yqCAAG,EAAC,C;;;;;;;;;;;ACA7wC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/ns-goods-sku/ns-goods-sku.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./ns-goods-sku.vue?vue&type=template&id=407fe378&scoped=true&\"\nvar renderjs\nimport script from \"./ns-goods-sku.vue?vue&type=script&lang=js&\"\nexport * from \"./ns-goods-sku.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ns-goods-sku.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./ns-goods-sku.vue?vue&type=style&index=1&id=407fe378&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"407fe378\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/ns-goods-sku/ns-goods-sku.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ns-goods-sku.vue?vue&type=template&id=407fe378&scoped=true&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    nsLogin: function () {\n      return import(\n        /* webpackChunkName: \"components/ns-login/ns-login\" */ \"@/components/ns-login/ns-login.vue\"\n      )\n    },\n    myPopupSelect: function () {\n      return import(\n        /* webpackChunkName: \"components/my-popup-select/my-popup-select\" */ \"@/components/my-popup-select/my-popup-select.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.type == \"point\" &&\n    _vm.goodsDetail.type &&\n    _vm.goodsDetail.type != 1 &&\n    _vm.goodsDetail.type == 2 &&\n    _vm.goodsDetail.image\n      ? _vm.$util.img(_vm.goodsDetail.image)\n      : null\n  var g1 =\n    _vm.type == \"point\" &&\n    _vm.goodsDetail.type &&\n    _vm.goodsDetail.type != 1 &&\n    _vm.goodsDetail.type == 2 &&\n    !_vm.goodsDetail.image\n      ? _vm.$util.img(\"upload/uniapp/point/coupon.png\")\n      : null\n  var g2 =\n    _vm.type == \"point\" &&\n    _vm.goodsDetail.type &&\n    _vm.goodsDetail.type != 1 &&\n    _vm.goodsDetail.type == 3 &&\n    _vm.goodsDetail.image\n      ? _vm.$util.img(_vm.goodsDetail.image)\n      : null\n  var g3 =\n    _vm.type == \"point\" &&\n    _vm.goodsDetail.type &&\n    _vm.goodsDetail.type != 1 &&\n    _vm.goodsDetail.type == 3 &&\n    !_vm.goodsDetail.image\n      ? _vm.$util.img(\"upload/uniapp/point/hongbao.png\")\n      : null\n  var g4 = !(\n    _vm.type == \"point\" &&\n    _vm.goodsDetail.type &&\n    _vm.goodsDetail.type != 1\n  )\n    ? _vm.$util.img(_vm.goodsDetail.sku_image, {\n        size: \"mid\",\n      })\n    : null\n  var m0 =\n    _vm.type == \"point\" &&\n    _vm.goodsDetail.type == 1 &&\n    _vm.goodsDetail.exchange_price != \"0.00\" &&\n    _vm.goodsDetail.pay_type > 0\n      ? _vm.$lang(\"common.currencySymbol\")\n      : null\n\n  var l1 = _vm.__map(_vm.goodsDetail.goods_spec_format, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var l0 =\n      _vm.goodsDetail.luminosity_status != 1\n        ? _vm.__map(item.value, function (item_value, index_value) {\n            var $orig = _vm.__get_orig(item_value)\n\n            var g5 = item_value.image\n              ? _vm.$util.img(item_value.image, {\n                  size: \"small\",\n                })\n              : null\n            return {\n              $orig: $orig,\n              g5: g5,\n            }\n          })\n        : null\n    return {\n      $orig: $orig,\n      l0: l0,\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        m0: m0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ns-goods-sku.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ns-goods-sku.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"goods-sku\" @touchmove.prevent.stop>\r\n\t\t<uni-popup ref=\"skuPopup\" type=\"bottom\" class=\"sku-layer\">\r\n\t\t\t<view class=\"sku-info\" :style=\"{ height: systemInfo.windowHeight * 1 + 'px' }\">\r\n\t\t\t\t<view class=\"header\">\r\n\t\t\t\t\t<block v-if=\"type == 'point' && goodsDetail.type && goodsDetail.type != 1\">\r\n\t\t\t\t\t\t<view class=\"img-wrap\" v-if=\"goodsDetail.type == 2\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\t:src=\"goodsDetail.image ? $util.img(goodsDetail.image) : $util.img('upload/uniapp/point/coupon.png')\"\r\n\t\t\t\t\t\t\t\tmode=\"aspectFit\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"img-wrap\" v-if=\"goodsDetail.type == 3\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\t:src=\"goodsDetail.image ? $util.img(goodsDetail.image) : $util.img('upload/uniapp/point/hongbao.png')\"\r\n\t\t\t\t\t\t\t\tmode=\"aspectFit\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\r\n\t\t\t\t\t<view v-else class=\"img-wrap\">\r\n\t\t\t\t\t\t<image :src=\"$util.img(goodsDetail.sku_image, { size: 'mid' })\" @error=\"imgError()\"\r\n\t\t\t\t\t\t\tmode=\"aspectFit\" />\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"main\">\r\n\t\t\t\t\t\t<block v-if=\"type == 'point'\">\r\n\t\t\t\t\t\t\t<block v-if=\"goodsDetail.type == 1\">\r\n\t\t\t\t\t\t\t\t<view class=\"price-wrap\">\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tclass=\"price color-base-text font-size-toolbar\">{{ goodsDetail.point }}积分</text>\r\n\t\t\t\t\t\t\t\t\t<block v-if=\"goodsDetail.exchange_price != '0.00' && goodsDetail.pay_type > 0\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"unit color-base-text font-size-tag\">+</text>\r\n\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"price color-base-text font-size-toolbar\">{{ $lang('common.currencySymbol') }}{{is_wholesaler==3?goodsDetail.price_pf:goodsDetail.exchange_price }}</text>\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"stock\">库存{{ goodsDetail.stock }}{{ goodsDetail.unit }}</view>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t<block v-else>\r\n\t\t\t\t\t\t\t\t<view class=\"price-wrap\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"price font-size-toolbar\">{{ goodsDetail.name }}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"stock\" style=\"height: auto;\">\r\n\t\t\t\t\t\t\t\t\t积分：\r\n\t\t\t\t\t\t\t\t\t<text class=\"color-base-text\">{{ goodsDetail.point }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"stock\">\r\n\t\t\t\t\t\t\t\t\t库存：\r\n\t\t\t\t\t\t\t\t\t<text class=\"color-base-text\">{{ goodsDetail.stock }}{{ goodsDetail.unit }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t<block v-else-if=\"type == 'wholesale_join_cart' || type == 'wholesale_buy_now'\">\r\n\t\t\t\t\t\t\t<view class=\"wholesale-item\" v-for=\"(priceItem, index) in goodsDetail.price_array\"\r\n\t\t\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t\t\t<view class=\"price-wrap\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"unit color-base-text font-size-tag\">￥</text>\r\n\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\tclass=\"price color-base-text font-size-toolbar margin-right\">{{ priceItem.price }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"start-number\">{{ priceItem.num }}{{ goodsDetail.unit }}起批</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"stock\">库存{{ goodsDetail.stock }}{{ goodsDetail.unit }}</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t<block v-else>\r\n\t\t\t\t\t\t\t<view class=\"price-wrap\">\r\n\t\t\t\t\t\t\t\t<text class=\"price color-base-text font-size-toolbar\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"goodsDetail.luminosity_status == 1\">{{goodsDetail.luminosity_status == 1?'共计：':''}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"unit color-base-text font-size-tag\">￥</text>\r\n\t\t\t\t\t\t\t\t<text class=\"price color-base-text font-size-toolbar\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"goodsDetail.luminosity_status == 1\">{{sumPrice || 0}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"price color-base-text font-size-toolbar\"\r\n\t\t\t\t\t\t\t\t\tv-else>{{ is_wholesaler==3?goodsDetail.price_pf:goodsDetail.price  }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"stock\">库存{{ goodsDetail.stock }}{{ goodsDetail.unit }}</view>\r\n\t\t\t\t\t\t</block>\r\n\r\n\t\t\t\t\t\t<view class=\"sku-name font-size-tag\"\r\n\t\t\t\t\t\t\tv-if=\"goodsDetail.sku_spec_format && goodsDetail.luminosity_status != 1\">\r\n\t\t\t\t\t\t\t<text class=\"color-tip\" v-if=\"false\">已选规格：</text>\r\n\t\t\t\t\t\t\t<text v-for=\"(item, index) in goodsDetail.sku_spec_format\" :key=\"index\" v-if=\"false\"\r\n\t\t\t\t\t\t\t\tclass=\"spec-value\">{{ item.spec_value_name }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"sku-close iconfont iconclose\" @click=\"closeSkuPopup()\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"body-item\">\r\n\t\t\t\t\t<!--  class=\"wrap\" -->\r\n\t\t\t\t\t<scroll-view :scroll-y=\"true\" style=\"max-height: 920rpx;\" :scroll-into-view=\"scrollto\">\r\n\t\t\t\t\t\t<view class=\"sku-list-wrap\" v-for=\"(item, index) in goodsDetail.goods_spec_format\" :key=\"index\"\r\n\t\t\t\t\t\t\tv-if=\"goodsDetail.luminosity_status != 1\">\r\n\t\t\t\t\t\t\t<text class=\"title font-size-base\">{{ item.spec_name }}</text>\r\n\t\t\t\t\t\t\t<view v-for=\"(item_value, index_value) in item.value\" :key=\"index_value\" :class=\"{\r\n\t\t\t\t\t\t\t\t\tselected: item_value['selected'] || skuId == item_value.sku_id,\r\n\t\t\t\t\t\t\t\t\tdisabled: item_value['disabled'] || (!item_value['selected'] && disabled)\r\n\t\t\t\t\t\t\t\t}\" class=\"items\" @click=\"change(item_value.sku_id, item_value.spec_id)\">\r\n\r\n\t\t\t\t\t\t\t\t<image v-if=\"item_value.image\" :src=\"$util.img(item_value.image, { size: 'small' })\"\r\n\t\t\t\t\t\t\t\t\t@error=\"valueImgError(index, index_value)\" />\r\n\t\t\t\t\t\t\t\t<text>{{ item_value.spec_value_name }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- <view class=\"sku-list-wre\" v-if=\" goodsDetail.photometric!=0\">\r\n\t\t\t\t\t\t球镜值+柱镜<=联合光度值{{photometric}}\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t<view class=\"wrap-transverse\" v-for=\"(item,index) in myValue\"\r\n\t\t\t\t\t\t\tstyle=\"display: flex;flex-direction: column;\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"wrap-sph\">\r\n\t\t\t\t\t\t\t\t<view class=\"sku-list-wrap\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"(goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1 ) && goodsDetail.eye == 1  \">\r\n\t\t\t\t\t\t\t\t\t<view class=\"title font-size-base\" style=\"text-align: center;\">右左眼</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"picker-item\" @click=\"setMyPopup(index,'eyepopup',leftArray)\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 35rpx;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"leftIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{leftArray[item.leftIndex] || ''}}</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- \t<picker @change=\"bindPickerChangeF\" :value=\"item.leftIndex\" :range=\"leftArray\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"picker-item\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 35rpx;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"leftIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{leftArray[item.leftIndex]}}</view>\r\n\t\t\t\t\t\t\t\t\t</picker> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"sku-list-wrap\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1 \">\r\n\t\t\t\t\t\t\t\t\t<view class=\"title font-size-base\" style=\"text-align: center;\">球镜</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"picker-item\" style=\"width: 80rpx;\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"setMyPopup(index,'ball',item.ball_mirrorArray)\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"ball_mirrorIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{item.ball_mirrorArray[item.ball_mirrorIndex] || ''}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- <picker @change=\"bindPickerChangeA\" :value=\"item.ball_mirrorIndex\"\r\n\t\t\t\t\t\t\t\t\t\t:range=\"item.ball_mirrorArray\" class=\"picker-item\" style=\"width: 80rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"ball_mirrorIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{item.ball_mirrorArray[item.ball_mirrorIndex]}}</view>\r\n\t\t\t\t\t\t\t\t\t</picker> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"sku-list-wrap\"\r\n\t\t\t\t\t\t\t\t\tv-if=\" goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1 \">\r\n\t\t\t\t\t\t\t\t\t<text class=\"title font-size-base\" style=\"text-align: center;\">柱镜</text>\r\n\r\n\t\t\t\t\t\t\t\t\t<view class=\"picker-item\" style=\"width: 80rpx;\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"setMyPopup(index,'cylinder',item.cylinder_mirrorArray,item,index)\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"cylinder_mirrorIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{item.cylinder_mirrorArray[item.cylinder_mirrorIndex] || ''}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- \t<picker @change=\"bindPickerChangeB\" :value=\"item.cylinder_mirrorIndex\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"width: 80rpx;\" :range=\"item.cylinder_mirrorArray\" class=\"picker-item\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"cylinder_mirrorIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{item.cylinder_mirrorArray[item.cylinder_mirrorIndex]}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</picker> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"sku-list-wrap\"\r\n\t\t\t\t\t\t\t\t\tv-if=\" goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1 \">\r\n\t\t\t\t\t\t\t\t\t<text class=\"title font-size-base\" style=\"text-align: center;\">轴位</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"picker-item\" style=\"font-size: 3.5vw;color: rgb(120, 120, 120);\">\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\" v-model=\"item.axisValue\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 3.5vw;color: rgb(120, 120, 120);\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- \t<picker @change=\"bindPickerChangeC\" :value=\"item.axisIndex\" :range=\"axisArray\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"picker-item\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"axisIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{axisArray[item.axisIndex]}}</view>\r\n\t\t\t\t\t\t\t\t\t</picker> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"sku-list-wrap\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"(goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1) && goodsDetail.a_dd == 1\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"title font-size-base\" style=\"text-align: center;\">ADD</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"picker-item\" @click=\"setMyPopup(index,'add',sumArray)\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"sumIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{sumArray[item.sumIndex] || ''}}</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- <picker @change=\"bindPickerChangeD\" :value=\"item.sumIndex\" :range=\"sumArray\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"picker-item\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"sumIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{sumArray[item.sumIndex]}}</view>\r\n\t\t\t\t\t\t\t\t\t</picker> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"sku-list-wrap\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"(goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1) && goodsDetail.passage == 1 \">\r\n\t\t\t\t\t\t\t\t\t<text class=\"title font-size-base\" style=\"text-align: center;\">通道</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"picker-item\" @click=\"setMyPopup(index,'tongdao',objArray)\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"objIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{objArray[item.objIndex] || ''}}</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- <picker @change=\"bindPickerChangeE\" :value=\"item.objIndex\" :range=\"objArray\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"picker-item\">\r\n\t\t\t\t\t\t\t\t\t\t<text style=\"font-size: 3.5vw;color: rgb(120,120,120);\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"objIndex == null\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<view style=\"font-size: 3.5vw;color: rgb(120,120,120);\" v-else\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"uni-input\">{{objArray[item.objIndex]}}</view>\r\n\t\t\t\t\t\t\t\t\t</picker> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"sku-list-wrap\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1 \">\r\n\t\t\t\t\t\t\t\t\t<text class=\"title font-size-base\" style=\"text-align: center;\">数量(片)</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"picker-item\">\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"number\" v-model=\"item.product_num\" @input=\"getSumPrice()\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 3.5vw;color: rgb(120,120,120);height: 45rpx;\"></input>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"remove-sku\" @click=\"removeTap(index)\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"goodsDetail.rimless!=1&&(goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1)\">\r\n\t\t\t\t\t\t\t\t\t-\r\n\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view style=\"align-self: flex-end;margin-right: 80rpx;color:#ff4544;\"\r\n\t\t\t\t\t\t\t\tv-if=\"goodsDetail.luminosity_status == 1\">\r\n\t\t\t\t\t\t\t\t单片价：￥{{item.discount_price || 0}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"number-wrap\"\r\n\t\t\t\t\t\t\tv-if=\"goodsDetail.photometric==0 && goodsDetail.luminosity_status!=1 \">\r\n\t\t\t\t\t\t\t<view class=\"number-line\">\r\n\t\t\t\t\t\t\t\t<text class=\"title font-size-base\" v-if=\"type == 'point'\">兑换数量</text>\r\n\t\t\t\t\t\t\t\t<text class=\"title font-size-base\" v-else>购买数量</text>\r\n\t\t\t\t\t\t\t\t<text class=\"limit-txt color-base-text\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"limitNumber > 0\">(每人限购{{ limitNumber }}{{ goodsDetail.unit }})</text>\r\n\t\t\t\t\t\t\t\t<text class=\"limit-txt color-base-text\" v-if=\"minNumber > 0\">({{ minNumber }}件起购)</text>\r\n\t\t\t\t\t\t\t\t<text v-if=\"maxBuy > 0 && minBuy > 1\" class=\"limit-txt color-base-text\">\r\n\t\t\t\t\t\t\t\t\t({{ minBuy }}{{ goodsDetail.unit }}起售，限购{{ maxBuy }}{{ goodsDetail.unit }})\r\n\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t<text v-else-if=\"maxBuy > 0\"\r\n\t\t\t\t\t\t\t\t\tclass=\"limit-txt color-base-text\">(限购{{ maxBuy }}{{ goodsDetail.unit }})</text>\r\n\t\t\t\t\t\t\t\t<text v-else-if=\"minBuy > 1\"\r\n\t\t\t\t\t\t\t\t\tclass=\"limit-txt color-base-text\">({{ minBuy }}{{ goodsDetail.unit }}起售)</text>\r\n\t\t\t\t\t\t\t\t<view class=\"number\">\r\n\t\t\t\t\t\t\t\t\t<button type=\"default\" class=\"decrease color-line-border\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"changeNum('-')\">-</button>\r\n\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"uni-input color-line-border font-size-goods-tag\"\r\n\t\t\t\t\t\t\t\t\t\t@blur=\"blur\" v-model=\"number\" placeholder=\"0\" @input=\"keyInput(false)\" />\r\n\t\t\t\t\t\t\t\t\t<button type=\"default\" class=\"increase color-line-border\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"changeNum('+')\">+</button>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t\t<view class=\"add-sku\" @click=\"getClickGoodsAdd()\" :id=\"scrollto\"\r\n\t\t\t\t\t\t\tv-if=\"goodsDetail.rimless!=1&&(goodsDetail.photometric!=0|| goodsDetail.luminosity_status==1) \">\r\n\t\t\t\t\t\t\t<text>新增</text>\n\t\t\t\t\t\t\t<!-- #ifndef MP-->\r\n\t\t\t\t\t\t\t<text v-show=\"false\">{{rimless=goodsDetail.rimless}}</text>\n\t\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t<!-- <textarea placeholder=\"备注留言\" class=\"remarkBox\" v-model=\"buyer_message\"></textarea> -->\r\n\r\n\r\n\t\t\t\t</view>\r\n\t\t\t\t<block v-if=\"type == 'wholesale_buy_now' || type == 'wholesale_join_cart'\">\r\n\t\t\t\t\t<view class=\"footer\" @click=\"confirm()\">\r\n\t\t\t\t\t\t<!-- <button type=\"primary\" v-if=\"type == 'wholesale_join_cart' && goodsDetail.stock >= number && number >= minNumber\">加入进货单</button> -->\r\n\t\t\t\t\t\t<button type=\"primary\">确定</button>\r\n\t\t\t\t\t\t<!-- <button type=\"primary\" v-else disabled=\"true\">库存不足</button> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t\t<block v-else>\r\n\t\t\t\t\t<view class=\"footer\" @click=\"confirm()\">\r\n\t\t\t\t\t\t<!-- <button type=\"primary\" v-if=\"type == 'wholesale_join_cart' && goodsDetail.stock >= number && number >= minNumber\">加入进货单</button> -->\r\n\t\t\t\t\t\t<button type=\"primary\">确定</button>\r\n\t\t\t\t\t\t<!-- <button type=\"primary\" v-else disabled=\"true\">库存不足</button> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t\t<ns-login ref=\"login\"></ns-login>\r\n\t\t<!-- 左右眼 -->\r\n\t\t<my-popup-select ref=\"eyepopup\" @change=\"bindPickerChangeF\" title=\"左右眼\" />\r\n\t\t<!-- 球镜 -->\r\n\t\t<my-popup-select title=\"球镜\" ref=\"ball\" @change=\"bindPickerChangeA\" />\r\n\t\t<!-- 柱镜 -->\r\n\t\t<my-popup-select title=\"柱镜\" ref=\"cylinder\" @change=\"bindPickerChangeB\" />\r\n\t\t<!-- ADD -->\r\n\t\t<my-popup-select title=\"ADD\" ref=\"add\" @change=\"bindPickerChangeD\" />\r\n\t\t<!-- 通道 -->\r\n\t\t<my-popup-select title=\"通道\" ref=\"tongdao\" @change=\"bindPickerChangeE\" />\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport uniPopup from '@/components/uni-popup/uni-popup-sku.vue';\r\n\timport htmlParser from '@/common/js/html-parser';\n\timport Config from '../../common/js/config.js'\r\n\t// 商品SKU\r\n\texport default {\r\n\t\tname: 'ns-goods-sku',\r\n\t\tcomponents: {\r\n\t\t\tuniPopup\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tgoodsDetail: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\t\t\tdisabled: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tpointLimit: {\r\n\t\t\t\ttype: [Number, String]\r\n\t\t\t},\r\n\t\t\tmaxBuy: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tminBuy: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\trimless: '',\r\n\t\t\t\tscrollto: 'addbtn0',\r\n\t\t\t\tisIphoneX: false,\r\n\t\t\t\tsystemInfo: {}, //系统信息\r\n\t\t\t\tnumber: 1,\r\n\t\t\t\tbtnSwitch: false, //提交按钮防止重复提交\r\n\t\t\t\ttype: '', //join_cart：加入购物车，buy_now：立即购买\r\n\t\t\t\tcallback: null, //回调\r\n\t\t\t\tskuId: 0,\r\n\t\t\t\tpintuanId: 0, // 拼团id\r\n\t\t\t\tlimitNumber: 0, // 限购\r\n\t\t\t\tminNumber: 0,\r\n\t\t\t\t//是否开启预览，0：不开启，1：开启\r\n\t\t\t\tpreview: 0,\r\n\t\t\t\tcartNumber: 0, // 购物车中商品存在的数量,\r\n\r\n\t\t\t\tleftIndex: 0, //眼球index\r\n\t\t\t\tball_mirrorIndex: 0, //球镜index\r\n\t\t\t\tcylinder_mirrorIndex: 0, //柱镜index\r\n\t\t\t\taxisIndex: 0, //轴位index\r\n\t\t\t\tsumIndex: 0, //ADDindex\r\n\t\t\t\tobjIndex: 0, //通道index\r\n\r\n\t\t\t\tleftArray: ['R', 'L'], //眼球数组\r\n\t\t\t\tball_mirrorArray: [], //球镜数组\r\n\t\t\t\tcylinder_mirrorArray: [], //柱镜数组\r\n\t\t\t\tball_mirrorArray_bk: [],\r\n\t\t\t\tcylinder_mirrorArray_bk: [],\r\n\t\t\t\taxisArray: [], //轴位数组\r\n\r\n\t\t\t\tsumArray: [], //add数组\r\n\t\t\t\tobjArray: [], //通道数组\r\n\r\n\t\t\t\tphotometric: 0, //联合光度\r\n\t\t\t\tis_wholesaler: Config.is_wholesaler, //3 批发商\r\n\t\t\t\t//商品数量变量\r\n\t\t\t\tmyValue: [], //循环总存放数组\r\n\t\t\t\tnowIndex: 0, //正在操作的总数组下标\r\n\t\t\t\tlastIndex: 0, //当前数组下标\r\n\t\t\t\tquantity: 0,\r\n\t\t\t\tmirrolist: [],\r\n\t\t\t\tsumPrice: 0,\r\n\t\t\t\tnewballlist: [],\r\n\t\t\t\tbuyer_message: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\n\t\t\tconsole.log(this.goodsDetail.sku_spec_format,\"多规格\")\r\n\t\t\tthis.isIphoneX = this.$util.uniappIsIPhoneX();\r\n\t\t\tthis.systemInfo = uni.getSystemInfoSync();\r\n\t\t\tthis.getWholesale(this.goodsDetail);\r\n\t\t\tif (this.goodsDetail.goods_id == 0) this.$emit(\"error\")\r\n\t\t\t// let t = setInterval(() => {\r\n\t\t\t// \tif (this.cylinder_mirrorArray_bk.length > 0) {\r\n\t\t\t// \t\tclearInterval(t);\r\n\t\t\t// \t\tthis.getClickGoodsAdd();\r\n\t\t\t// \t}\r\n\t\t\t// }, 100)\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t// rimless(nval,oval){\r\n\t\t\t// \t//console.error(nval,oval,\"rimless\")\r\n\t\t\t// },\r\n\t\t\tpointLimit(newNum, oldNum) {\r\n\t\t\t\tthis.limitNumber = Number(newNum);\r\n\t\t\t},\r\n\t\t\tgoodsDetail(newData, oldData) {\r\n\t\t\t\t\t// this.getWholesale(newData);\n\t\t\t\tthis.goodsDetailChange(newData)\r\n\t\t\t\t// if (newData.rimless == 1) {\n\t\t\t\t\tconsole.error(this.goodsDetail,\"更新了一次\");\r\n\t\t\t\t// }\n\t\t\t\t\n\t\t\t\tif (this.goodsDetail.rimless == 1) {\n\t\t\t\t\tthis.rimless = this.goodsDetail.rimless\n\t\t\t\t\tthis.getClickGoodsAdd({}, 1)\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tminBuy(newData, oldData) {\r\n\t\t\t\tif (this.minBuy > 1) {\r\n\t\t\t\t\tthis.number = Number(this.minBuy);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgoodsDetailChange(newData, oldData) {\r\n\t\t\t\t//console.log(this.goodsDetail, \"goodsDetailgoodsDetailgoodsDetailgoodsDetail\");\r\n\t\t\t\t//console.log(newData.photometric)\r\n\t\t\t\tthis.skuId = newData.sku_id;\n\t\t\t\tconsole.error(this.goodsDetail.luminosity_status,\"luminosity_status\");\r\n\t\t\t\tif (this.goodsDetail.luminosity_status != 1) this.setBalllist()\r\n\t\t\t\tif (newData.photometric != 0 || newData.luminosity_status == 1) { //联合光度\r\n\t\t\t\t\t//球镜范围\r\n\t\t\t\t\tlet ball_mirrorArray = [],\r\n\t\t\t\t\t\tbstep = 0.25\r\n\t\t\t\t\tfor (let i = newData.ball_min; i <= newData.ball_max; i += bstep) {\r\n\t\t\t\t\t\tbstep = i < this.goodsDetail.step && this.goodsDetail.step != 0 ? 0.5 : 0.25\r\n\t\t\t\t\t\tball_mirrorArray.push((i.toFixed(2) > 0 ? \"+\" : \"\") + i.toFixed(2))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//柱镜范围\r\n\t\t\t\t\tlet cylinder_mirrorArray = [],\r\n\t\t\t\t\t\tcstep = 0.25\r\n\t\t\t\t\tfor (let i = newData.cylinder_min; i <= newData.cylinder_max; i += cstep) {\r\n\t\t\t\t\t\tcstep = i < this.goodsDetail.step && this.goodsDetail.step != 0 ? 0.5 : 0.25\r\n\t\t\t\t\t\tcylinder_mirrorArray.push((i.toFixed(2) > 0 ? \"+\" : \"\") + i.toFixed(2))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//轴位\r\n\t\t\t\t\tlet axisArray = []\r\n\t\t\t\t\tfor (let i = 0; i <= 180; i += 1) {\r\n\t\t\t\t\t\taxisArray.push(i)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//ADD\r\n\t\t\t\t\tlet sumArray = []\r\n\t\t\t\t\tif (this.goodsDetail.a_dd == 1) {\r\n\t\t\t\t\t\tsumArray = this.goodsDetail.a_dd_data\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (let i = 0; i <= 180; i += 1) {\r\n\t\t\t\t\t\t\tsumArray.push(i)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//通道\r\n\t\t\t\t\tlet objArray = []\r\n\t\t\t\t\tif (this.goodsDetail.passage == 1) {\r\n\t\t\t\t\t\tobjArray = this.goodsDetail.passage_data\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (let i = 0; i <= 180; i += 1) {\r\n\t\t\t\t\t\t\tobjArray.push(i)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.photometric = newData.photometric\r\n\t\t\t\t\tthis.ball_mirrorArray = ball_mirrorArray\r\n\t\t\t\t\tthis.cylinder_mirrorArray = cylinder_mirrorArray\r\n\t\t\t\t\tthis.ball_mirrorArray_bk = ball_mirrorArray\r\n\t\t\t\t\tthis.cylinder_mirrorArray_bk = cylinder_mirrorArray\r\n\t\t\t\t\tthis.myValue = []\r\n\t\t\t\t\tthis.getClickGoodsAdd();\r\n\t\t\t\t\t// //console.log(\"柱镜\", this.cylinder_mirrorArray_bk, \"球镜\", this.ball_mirrorArray_bk);\r\n\t\t\t\t\tthis.axisArray = axisArray\r\n\t\t\t\t\tthis.sumArray = sumArray\r\n\t\t\t\t\tthis.objArray = objArray\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetBalllist() {\r\n\t\t\t\tlet max = 0,\r\n\t\t\t\t\tmin = 0,\r\n\t\t\t\t\tarr = []\n\t\t\t\tconst {ball_min,ball_max} = this.goodsDetail\r\n\t\t\t\tif(this.mirrolist.length==0){\n\t\t\t\t\tarr=this.getList(ball_min,ball_max)\n\t\t\t\t}\n\t\t\t\tthis.mirrolist.forEach(v => {\r\n\t\t\t\t\tmin = v.ball_min\r\n\t\t\t\t\tmax = v.ball_max\r\n\t\t\t\t\tlet a = this.getList(min, max)\r\n\t\t\t\t\tarr = arr.concat(a)\r\n\t\t\t\t})\r\n\t\t\t\tarr = Array.from(new Set(arr))\r\n\t\t\t\tarr.sort((a, b) => {\r\n\t\t\t\t\treturn a - b\r\n\t\t\t\t})\n\t\t\t\t\r\n\t\t\t\tthis.newballlist = arr\r\n\t\t\t\t// //console.log(this.newballlist, \"球镜数据\")\r\n\t\t\t},\r\n\t\t\tgetSumPrice() {\r\n\t\t\t\tlet sum = 0\r\n\t\t\t\t// //console.log(this.myValue,\r\n\t\t\t\t// \t\"this.goodsDetail.goods_spec_formatthis.goodsDetail.goods_spec_formatthis.goodsDetail.goods_spec_format\"\r\n\t\t\t\t// )\r\n\t\t\t\tthis.myValue.forEach(e => {\r\n\t\t\t\t\tsum += parseFloat(e.discount_price || 0) * e.product_num\r\n\t\t\t\t})\r\n\t\t\t\tthis.sumPrice = sum\r\n\t\t\t},\r\n\t\t\tnomove(e) {\r\n\t\t\t\t// //console.log(e);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @param {min}\r\n\t\t\t * @param {max}    \r\n\t\t\t */\r\n\t\t\tgetList(min = 0, max = 0) {\r\n\t\t\t\tlet arr = [],\r\n\t\t\t\t\ts = 0.25\r\n\t\t\t\tfor (let i = min; i <= max; i += s) {\r\n\t\t\t\t\ts = i < this.goodsDetail.step && this.goodsDetail.step != 0 ? 0.5 : 0.25\r\n\t\t\t\t\t//console.log(`min=${min},max=${max},s=${s},step=${this.goodsDetail.step},i=${i}`)\r\n\t\t\t\t\tlet num = i > 0 ? '+' + i : i < 0 ? i : i\r\n\t\t\t\t\tnum = parseFloat(num).toFixed(2)\r\n\t\t\t\t\tif (num > 0) num = `+${num}`\r\n\t\t\t\t\tarr.push(num)\r\n\t\t\t\t}\r\n\t\t\t\tif (arr.length == 0) arr.push(0)\r\n\t\t\t\treturn arr;\r\n\t\t\t},\r\n\t\t\tsetMyPopup(i, name, list, dataitem = null, index) {\n\t\t\t\t\r\n\t\t\t\tthis.doIndex(i)\r\n\t\t\t\tdataitem = this.myValue[this.nowIndex]\r\n\t\t\t\tlet item = dataitem\r\n\t\t\t\tif (this.goodsDetail.luminosity_status == 1) {\r\n\r\n\t\t\t\t\t// if (name == 'ball') item.cylinder_mirrorIndex = -1\r\n\t\t\t\t\tif (!(item.ball_mirrorIndex >= 0) && name === 'cylinder') return this.$util.showToast({\r\n\t\t\t\t\t\ttitle: '先选球镜'\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tif (name == 'ball') list = this.newballlist\r\n\r\n\t\t\t\t\tif (name == 'cylinder' && dataitem != null) {\r\n\t\t\t\t\t\tlet val = dataitem.ball_mirrorArray[dataitem.ball_mirrorIndex],\r\n\t\t\t\t\t\t\tmax = 0,\r\n\t\t\t\t\t\t\tmin = 0,\r\n\t\t\t\t\t\t\tarr = []\r\n\t\t\t\t\t\tthis.mirrolist.forEach(v => {\r\n\t\t\t\t\t\t\tmin = v.cylinder_min\r\n\t\t\t\t\t\t\tmax = v.cylinder_max\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (parseFloat(val) >= parseFloat(v.ball_min) && parseFloat(val) <= parseFloat(v\r\n\t\t\t\t\t\t\t\t\t.ball_max)) {\r\n\t\t\t\t\t\t\t\t// dataitem.discount_price = v.discount_price\r\n\t\t\t\t\t\t\t\titem.sku_id = v.sku_id\r\n\t\t\t\t\t\t\t\tlet a = this.getList(min, max)\r\n\t\t\t\t\t\t\t\tarr = arr.concat(a)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tarr = Array.from(new Set(arr))\r\n\t\t\t\t\t\tarr.sort((a, b) => {\r\n\t\t\t\t\t\t\treturn a - b\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tdataitem.cylinder_mirrorArray = arr\n\t\t\t\t\t\tconsole.log(arr,name,\"0----------\")\r\n\t\t\t\t\t\tthis.$refs[name].list = arr\r\n\t\t\t\t\t\tthis.$refs[name].open()\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\n\t\t\t\t\t\tconsole.log(list,name,\"1----------\")\r\n\t\t\t\tthis.$refs[name].list = list\n\t\t\t\tif(name=='ball'&&this.$refs[name].list.length===0)this.$refs[name].list=this.ball_mirrorArray_bk\n\t\t\t\tif(name=='cylinder'&&this.$refs[name].list.length===0)this.$refs[name].list=this.cylinder_mirrorArray_bk\n\t\t\t\t\r\n\t\t\t\tthis.$refs[name].open()\r\n\r\n\t\t\t},\r\n\t\t\tdoIndex(index) {\r\n\t\t\t\t// //切换数组操作下标\r\n\t\t\t\t// if(this.nowIndex != index){\r\n\t\t\t\t// \t//修改球镜柱镜\r\n\t\t\t\t// \tthis.ball_mirrorArray = this.ball_mirrorArray_bk;\r\n\t\t\t\t// \tthis.cylinder_mirrorArray = this.cylinder_mirrorArray_bk;\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tthis.nowIndex = index;\r\n\t\t\t},\r\n\t\t\tasync getWholesale(newData) {\r\n\t\t\t\tvar res = await this.$api.sendRequest({\r\n\t\t\t\t\turl: '/api/member/detail',\r\n\t\t\t\t\tasync: false\r\n\t\t\t\t});\n\t\t\t\t\r\n\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t////console.log(res)\r\n\t\t\t\t\tthis.is_wholesaler = res.is_wholesaler\r\n\t\t\t\t}\r\n\t\t\t\t////console.log(this.goodsDetail.luminosity_status, \"状态码新产品\", this.goodsDetail);\r\n\t\t\t\t// if (this.goodsDetail.luminosity_status != 1) return\r\n\t\t\t\t////console.log(\"开始插球镜柱镜\");\r\n\t\t\t\tvar mirro = await this.$api.sendRequest({\r\n\t\t\t\t\turl: '/api/goodssku/luminosity_sku',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tgoods_id: this.goodsDetail.goods_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tasync: false\r\n\t\t\t\t})\r\n\t\t\t\tdelete mirro.timestamp\r\n\t\t\t\tthis.mirrolist = Object.values(mirro)\r\n\t\t\t\t// if (this.mirrolist.length == 0) uni.showToast({\r\n\t\t\t\t// \ttitle: \"没有拉取到柱镜信息,让管理员检查goodssku/luminosity_sku接口\",\r\n\t\t\t\t// \ticon: \"none\"\r\n\t\t\t\t// })\r\n\t\t\t\tthis.setBalllist()\r\n\t\t\t},\r\n\t\t\treset() {\r\n\t\t\t\tthis.ball_mirrorIndex = null\r\n\t\t\t\tthis.cylinder_mirrorIndex = null\r\n\t\t\t\tthis.ball_mirrorArray = this.ball_mirrorArray_bk\r\n\t\t\t\tthis.cylinder_mirrorArray = this.cylinder_mirrorArray_bk\r\n\t\t\t},\r\n\t\t\tbindPickerChangeF(e) {\r\n\t\t\t\t////console.log('picker发送选择改变，左右眼球携带值为', e.target.value)\r\n\t\t\t\tthis.myValue[this.nowIndex].leftIndex = e.target.value\r\n\t\t\t\t//this.myValue[this.lastIndex].leftIndex = e.target.value\r\n\t\t\t\t//修改球镜选择范围\r\n\t\t\t\t//const cylinderValue = this.leftArray[this.leftIndex]\r\n\t\t\t\t//if(this.ball_mirrorIndex!=null) return;//判定首次选择才删改互补镜值，以免造成重复删改导致数据缺失\t\t\r\n\t\t\t},\r\n\t\t\t//球镜的值+柱镜的值 <= this.photometric\r\n\t\t\tbindPickerChangeA(e) {\r\n\t\t\t\tlet item = this.myValue[this.nowIndex]\r\n\t\t\t\t////console.log('picker发送选择改变，球镜携带值为', e.target.value)\r\n\t\t\t\titem.ball_mirrorIndex = e.target.value\r\n\t\t\t\tif (this.goodsDetail.luminosity_status == 1) {\r\n\t\t\t\t\titem.ball_mirrorArray = this.newballlist\r\n\t\t\t\t\titem.cylinder_mirrorIndex = null\r\n\t\t\t\t\tthis.getSumPrice()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//this.myValue[this.lastIndex].ball_mirrorIndex = e.target.value\r\n\t\t\t\t//修改柱镜选择范围\r\n\t\t\t\tconst ballValue = item.ball_mirrorArray[item.ball_mirrorIndex]\r\n\t\t\t\t//if(this.cylinder_mirrorIndex!=null) return;//判定首次选择才删改互补镜值，以免造成重复删改导致数据缺失。\r\n\t\t\t\tlet arr = []\r\n\t\t\t\t////console.log(this.ball_mirrorArray)\r\n\t\t\t\tthis.cylinder_mirrorArray_bk.forEach(num => {\r\n\t\t\t\t\tif (parseFloat(num) + parseFloat(ballValue) >= parseFloat(this.photometric)) {\r\n\t\t\t\t\t\tarr.push(num)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t//如果有值的时候\r\n\t\t\t\t////console.log(item.cylinder_mirrorIndex, \"cylinder\")\r\n\t\t\t\tif (item.cylinder_mirrorIndex != null) {\r\n\t\t\t\t\t//目前的值\r\n\t\t\t\t\t////console.log('目前的值' + item.cylinder_mirrorIndex)\r\n\t\t\t\t\tconst cylinderValue = item.cylinder_mirrorArray[item.cylinder_mirrorIndex]\r\n\t\t\t\t\tvar cylinderindex = arr.indexOf(cylinderValue)\r\n\t\t\t\t\t////console.log(cylinderindex)\r\n\t\t\t\t\tif (cylinderindex == -1) {\r\n\t\t\t\t\t\titem.cylinder_mirrorIndex = 0\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.cylinder_mirrorIndex = cylinderindex\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\titem.cylinder_mirrorArray = arr;\r\n\t\t\t\t////console.log(item.cylinder_mirrorArray); //柱镜\r\n\t\t\t},\r\n\t\t\tbindPickerChangeB(e) {\r\n\t\t\t\tlet item = this.myValue[this.nowIndex]\r\n\t\t\t\tconst val = item.cylinder_mirrorArray[e.target.value]\r\n\t\t\t\tconst v1 = this.myValue[this.nowIndex].ball_mirrorArray[this.myValue[this.nowIndex].ball_mirrorIndex]\r\n\t\t\t\t////console.log(this.goodsDetail.luminosity_status, \"this.goodsDetail.luminosity_status\")\r\n\t\t\t\tif (this.goodsDetail.luminosity_status == 1) {\r\n\t\t\t\t\tthis.mirrolist.forEach((ei, index) => {\r\n\t\t\t\t\t\tif (ei.cylinder_max >= val && val >= ei.cylinder_min && v1 >= ei.ball_min && v1 <= ei\r\n\t\t\t\t\t\t\t.ball_max) {\r\n\t\t\t\t\t\t\titem.discount_price = ei.discount_price\r\n\t\t\t\t\t\t\titem.sku_id = ei.sku_id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t////console.log(ei, ei.cylinder_max >= val && val >= ei.cylinder_min,\r\n\t\t\t\t\t\t\t// '222222222222222222222222222222222222222', ei.cylinder_max >= val && val >= ei\r\n\t\t\t\t\t\t\t// .cylinder_min ? \"1\" : \"2\", ei.sku_id)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.myValue[this.nowIndex].cylinder_mirrorIndex = e.target.value\r\n\t\t\t\t\titem.cylinder_mirrorIndex = e.target.value\r\n\t\t\t\t\tthis.getSumPrice()\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t//console.log('picker发送选择改变，柱镜携带值为', e.target.value)\r\n\t\t\t\tthis.myValue[this.nowIndex].cylinder_mirrorIndex = e.target.value\r\n\t\t\t\titem.cylinder_mirrorIndex = e.target.value\r\n\t\t\t\t//修改球镜选择范围\r\n\t\t\t\tconst cylinderValue = item.cylinder_mirrorArray[item.cylinder_mirrorIndex]\r\n\t\t\t\t//if(this.ball_mirrorIndex!=null) return;//判定首次选择才删改互补镜值，以免造成重复删改导致数据缺失。\r\n\t\t\t\tlet arr = []\r\n\t\t\t\tthis.ball_mirrorArray_bk.forEach(num => { //-10\r\n\t\t\t\t\t////console.log(num)\r\n\t\t\t\t\tif (parseFloat(num) + parseFloat(cylinderValue) >= parseFloat(this.photometric)) {\r\n\t\t\t\t\t\tarr.push(num)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (item.ball_mirrorIndex) {\r\n\t\t\t\t\t//目前的值\r\n\t\t\t\t\tconst ballValue = item.ball_mirrorArray[item.ball_mirrorIndex]\r\n\t\t\t\t\tvar ballindex = arr.indexOf(ballValue)\r\n\t\t\t\t\tif (ballindex == -1) {\r\n\t\t\t\t\t\titem.ball_mirrorIndex = 0\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.ball_mirrorIndex = ballindex\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\titem.ball_mirrorArray = arr\r\n\t\t\t\t//console.log(item.ball_mirrorIndex)\r\n\t\t\t\t//console.log(item.ball_mirroCrArray); //球镜\r\n\t\t\t},\r\n\t\t\tbindPickerChangeC(e) {\r\n\t\t\t\t//console.log('picker发送选择改变，轴位携带值为', e.target.value)\r\n\t\t\t\tthis.myValue[this.nowIndex].axisIndex = e.target.value\r\n\t\t\t\tthis.axisIndex = e.target.value\r\n\t\t\t},\r\n\t\t\tbindPickerChangeD(e) {\r\n\t\t\t\t//console.log('picker发送选择改变，ADD携带值为', e.target.value)\r\n\t\t\t\tthis.myValue[this.nowIndex].sumIndex = e.target.value\r\n\t\t\t\tthis.sumIndex = e.target.value\r\n\t\t\t},\r\n\t\t\tbindPickerChangeE(e) {\r\n\t\t\t\t//console.log('picker发送选择改变，通道携带值为', e.target.value)\r\n\t\t\t\tthis.myValue[this.nowIndex].objIndex = e.target.value\r\n\t\t\t\tthis.objIndex = e.target.value\r\n\t\t\t},\r\n\t\t\tshow(type, callback) {\r\n\t\t\t\tthis.callback = callback;\r\n\t\t\t\tthis.$refs.skuPopup.open(callback);\r\n\t\t\t\tthis.type = type;\r\n\t\t\t\tthis.skuId = this.goodsDetail.sku_id;\r\n\t\t\t\tthis.preview = this.goodsDetail.preview || 0;\r\n\t\t\t\tif (this.type == 'pintuan' && this.goodsDetail.pintuan_id) {\r\n\t\t\t\t\tthis.limitNumber = this.goodsDetail.buy_num;\r\n\t\t\t\t} else if (this.type == 'groupbuy' && this.goodsDetail.groupbuy_id) {\r\n\t\t\t\t\tthis.number = this.goodsDetail.buy_num;\r\n\t\t\t\t\tthis.minNumber = this.goodsDetail.buy_num;\r\n\t\t\t\t} else if (this.type == 'bargain' && this.goodsDetail.bargain_id) {\r\n\t\t\t\t\tthis.number = 1;\r\n\t\t\t\t\tthis.minNumber = 1;\r\n\t\t\t\t} else if ((this.type == 'wholesale_join_cart' || this.type == 'wholesale_buy_now') && this.goodsDetail\r\n\t\t\t\t\t.wholesale_sku_id) {\r\n\t\t\t\t\tthis.number = this.goodsDetail.min_num;\r\n\t\t\t\t\tthis.minNumber = this.goodsDetail.min_num;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.type == 'join_cart') {\r\n\t\t\t\t\tthis.getCartData();\r\n\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thide() {\r\n\t\t\t\tthis.$refs.skuPopup.close();\r\n\t\t\t},\r\n\t\t\tchange(skuId, spec_id) {\r\n\t\t\t\t//console.log(\"选择膜层\", skuId, spec_id, this.goodsDetail)\r\n\t\t\t\tif (this.disabled) return;\r\n\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\tthis.skuId = skuId;\r\n\t\t\t\t// 清空选择\r\n\t\t\t\tfor (var i = 0; i < this.goodsDetail.goods_spec_format.length; i++) {\r\n\t\t\t\t\tvar sku = this.goodsDetail.goods_spec_format[i];\r\n\t\t\t\t\tfor (var j = 0; j < sku.value.length; j++) {\r\n\t\t\t\t\t\t// 排除当前点击的规格值\r\n\t\t\t\t\t\tif (spec_id == this.goodsDetail.goods_spec_format[i].value[j].spec_id) {\r\n\t\t\t\t\t\t\tthis.goodsDetail.goods_spec_format[i].value[j].selected = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.goodsDetail.pintuan_id) {\r\n\t\t\t\t\tthis.getPintuanGoodsSkuInfo();\r\n\t\t\t\t} else if (this.goodsDetail.groupbuy_id) {\r\n\t\t\t\t\tthis.getGroupbuyGoodsSkuInfo();\r\n\t\t\t\t} else if (this.goodsDetail.bargain_id) {\r\n\t\t\t\t\tthis.getBargainGoodsSkuInfo();\r\n\t\t\t\t} else if (this.goodsDetail.seckill_id) {\r\n\t\t\t\t\tthis.getSeckillGoodsSkuInfo();\r\n\t\t\t\t} else if (this.goodsDetail.topic_id) {\r\n\t\t\t\t\tthis.getTopicsGoodsSkuInfo();\r\n\t\t\t\t} else if (this.goodsDetail.exchange_id) {\r\n\t\t\t\t\tthis.getPointGoodsSkuInfo();\r\n\t\t\t\t} else if (this.goodsDetail.wholesale_sku_id) {\r\n\t\t\t\t\tthis.getWholeSaleGoodsSkuInfo();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getGoodsSkuInfo();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取普通商品详情\r\n\t\t\tgetGoodsSkuInfo() {\r\n\t\t\t\tlet _this = this\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/api/goodssku/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tconsole.log(res.sku_images,\"goodsSkuDetail.sku_images图片\");\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tlet goodsSkuDetail = data;\r\n\t\t\t\t\t\t\t// this.dealData();\r\n\r\n\t\t\t\t\t\t\tif (goodsSkuDetail.sku_spec_format) goodsSkuDetail.sku_spec_format = JSON.parse(\r\n\t\t\t\t\t\t\t\tdata.sku_spec_format);\r\n\t\t\t\t\t\t\t// 限时折扣\r\n\t\t\t\t\t\t\tif (goodsSkuDetail.promotion_type == 1) {\r\n\t\t\t\t\t\t\t\tgoodsSkuDetail.discountTimeMachine = _this.$util.countDown(\r\n\t\t\t\t\t\t\t\t\tgoodsSkuDetail.end_time - res.timestamp);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (goodsSkuDetail.promotion_type == 1 && goodsSkuDetail\r\n\t\t\t\t\t\t\t\t.discountTimeMachine) {\r\n\t\t\t\t\t\t\t\tgoodsSkuDetail.show_price = goodsSkuDetail.discount_price;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tgoodsSkuDetail.show_price = goodsSkuDetail.price;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (goodsSkuDetail.goods_spec_format) goodsSkuDetail.goods_spec_format = JSON\r\n\t\t\t\t\t\t\t\t.parse(goodsSkuDetail.goods_spec_format)\r\n\t\t\t\t\t\t\t_this.btnSwitch = false;\r\n\t\t\t\t\t\t\t_this.$emit('refresh', goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取拼团商品详情\r\n\t\t\tgetPintuanGoodsSkuInfo() {\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/pintuan/api/goods/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\t\tpintuan_id: this.goodsDetail.pintuan_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tif (data.type == 'again') {\r\n\t\t\t\t\t\t\t\tthis.skuId = data.sku_id;\r\n\t\t\t\t\t\t\t\tthis.getPintuanGoodsSkuInfo();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail = data;\r\n\t\t\t\t\t\t\tthis.dealData();\r\n\t\t\t\t\t\t\t//每次请求重新渲染sku\r\n\t\t\t\t\t\t\t// this.goodsDetail.goods_spec_format = this.goodsSkuDetail.sku_spec_format;\r\n\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsDetail.group_id == 0 ? this\r\n\t\t\t\t\t\t\t\t.goodsSkuDetail.promotion_price : this.goodsSkuDetail.pintuan_price;\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.save_price =\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.price - this.goodsSkuDetail.show_price > 0 ? (this\r\n\t\t\t\t\t\t\t\t\t.goodsSkuDetail.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t\t\t\t//拼团倒计时\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.end_time - res.timestamp > 0) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail\r\n\t\t\t\t\t\t\t\t\t.end_time - res.timestamp);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '活动已结束'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.$util.redirectTo(\r\n\t\t\t\t\t\t\t\t\t\t'/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t'redirectTo'\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\t\tthis.$emit('refresh', this.goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取砍价商品详情\r\n\t\t\tgetBargainGoodsSkuInfo() {\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/bargain/api/goods/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\t\tbargain_id: this.goodsDetail.bargain_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tif (data.type == 'again') {\r\n\t\t\t\t\t\t\t\tthis.skuId = data.sku_id;\r\n\t\t\t\t\t\t\t\tthis.getBargainGoodsSkuInfo();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail = data;\r\n\t\t\t\t\t\t\tthis.dealData();\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsDetail.bargain_id > 0 ? this\r\n\t\t\t\t\t\t\t\t.goodsSkuDetail.floor_price : this.goodsSkuDetail.price;\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.stock = this.goodsSkuDetail.bargain_stock; //砍价库存\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.save_price =\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.price - this.goodsSkuDetail.show_price > 0 ? (this\r\n\t\t\t\t\t\t\t\t\t.goodsSkuDetail.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t\t\t\t//团购倒计时\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.end_time - res.timestamp > 0) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail\r\n\t\t\t\t\t\t\t\t\t.end_time - res.timestamp);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '活动已结束'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.$util.redirectTo(\r\n\t\t\t\t\t\t\t\t\t\t'/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t'redirectTo'\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\t\tthis.$emit('refresh', this.goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取专题商品详情\r\n\t\t\tgetTopicsGoodsSkuInfo() {\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/topic/api/topicgoods/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\t\ttopic_id: this.goodsDetail.topic_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tif (data.type == 'again') {\r\n\t\t\t\t\t\t\t\tthis.skuId = data.sku_id;\r\n\t\t\t\t\t\t\t\tthis.getTopicsGoodsSkuInfo();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\t\t\t\tthis.dealData();\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsDetail.topic_id > 0 ? this\r\n\t\t\t\t\t\t\t\t.goodsSkuDetail.topic_price : this.goodsSkuDetail.price;\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.save_price =\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.price - this.goodsSkuDetail.show_price > 0 ? (this\r\n\t\t\t\t\t\t\t\t\t.goodsSkuDetail.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t\t\t\t//团购倒计时\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.end_time - res.timestamp > 0) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail\r\n\t\t\t\t\t\t\t\t\t.end_time - res.timestamp);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '活动已结束'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.$util.redirectTo(\r\n\t\t\t\t\t\t\t\t\t\t'/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t'redirectTo'\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\t\tthis.$emit('refresh', this.goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取团购商品详情\r\n\t\t\tgetGroupbuyGoodsSkuInfo() {\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/groupbuy/api/goods/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\t\tgroupbuy_id: this.goodsDetail.groupbuy_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail = data;\r\n\t\t\t\t\t\t\tthis.dealData();\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsDetail.groupbuy_price;\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.save_price =\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.price - this.goodsSkuDetail.show_price > 0 ? (this\r\n\t\t\t\t\t\t\t\t\t.goodsSkuDetail.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t\t\t\t//团购倒计时\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.end_time - res.timestamp > 0) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail\r\n\t\t\t\t\t\t\t\t\t.end_time - res.timestamp);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '活动已结束'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.$util.redirectTo(\r\n\t\t\t\t\t\t\t\t\t\t'/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t'redirectTo'\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\t\tthis.$emit('refresh', this.goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取秒杀商品详情\r\n\t\t\tgetSeckillGoodsSkuInfo() {\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/seckill/api/seckillgoods/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\t\tseckill_id: this.goodsDetail.seckill_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tif (data.type == 'again') {\r\n\t\t\t\t\t\t\t\tthis.skuId = data.sku_id;\r\n\t\t\t\t\t\t\t\tthis.getSeckillGoodsSkuInfo();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail = data.goods_sku_detail;\r\n\t\t\t\t\t\t\tthis.dealData();\r\n\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.show_price = this.goodsSkuDetail.seckill_price;\r\n\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail.price - this.goodsSkuDetail.show_price > 0 ? (this\r\n\t\t\t\t\t\t\t\t.goodsSkuDetail.price - this.goodsSkuDetail.show_price).toFixed(2) : 0;\r\n\r\n\t\t\t\t\t\t\t//秒杀倒计时\r\n\t\t\t\t\t\t\tif (this.goodsSkuDetail.end_time - res.timestamp > 0) {\r\n\t\t\t\t\t\t\t\tthis.goodsSkuDetail.timeMachine = this.$util.countDown(this.goodsSkuDetail\r\n\t\t\t\t\t\t\t\t\t.end_time - res.timestamp);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '活动已结束'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.$util.redirectTo(\r\n\t\t\t\t\t\t\t\t\t\t'/pages/goods/detail/detail', {\r\n\t\t\t\t\t\t\t\t\t\t\tsku_id: this.goodsSkuDetail.sku_id\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t'redirectTo'\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\t\tthis.$emit('refresh', this.goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取积分商城详情\r\n\t\t\tgetPointGoodsSkuInfo() {\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/pointexchange/api/goods/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\t\texchange_id: this.goodsDetail.exchange_id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tif (data.type == 'again') {\r\n\t\t\t\t\t\t\t\tthis.skuId = data.sku_id;\r\n\t\t\t\t\t\t\t\tthis.getPointGoodsSkuInfo();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail = data;\r\n\t\t\t\t\t\t\tthis.dealData();\r\n\t\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\t\tthis.$emit('refresh', this.goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/point/list/list', {}, 'redirectTo');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 获取批发商品详情\r\n\t\t\tgetWholeSaleGoodsSkuInfo() {\r\n\t\t\t\tlet res = this.$api.sendRequest({\r\n\t\t\t\t\turl: '/wholesale/api/goods/info',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tlet data = res.data;\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tdata.unit = data.unit || '件';\r\n\t\t\t\t\t\t\tthis.goodsSkuDetail = data;\r\n\t\t\t\t\t\t\tthis.number = this.goodsSkuDetail.min_num;\r\n\t\t\t\t\t\t\tthis.minNumber = this.goodsSkuDetail.min_num;\r\n\t\t\t\t\t\t\tthis.dealData();\r\n\t\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\t\tthis.$emit('refresh', this.goodsSkuDetail);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'reLaunch');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//点击增加单笔数量\r\n\t\t\tgetClickGoodsAdd(obj, eyeIndex) {\r\n\t\t\t\t//console.log(this.cylinder_mirrorArray_bk, \"sssssssssss\");\r\n\t\t\t\tthis.myValue.push({\r\n\t\t\t\t\tobjIndex: undefined,\r\n\t\t\t\t\tproduct_num: 1,\r\n\t\t\t\t\tsumIndex: undefined,\r\n\t\t\t\t\taxisIndex: undefined,\r\n\t\t\t\t\tcylinder_mirrorIndex: undefined,\r\n\t\t\t\t\tball_mirrorIndex: undefined,\r\n\t\t\t\t\tleftIndex: eyeIndex || 0,\r\n\t\t\t\t\taxisValue: 0,\r\n\t\t\t\t\tcylinder_mirrorArray: this.cylinder_mirrorArray_bk,\r\n\t\t\t\t\tball_mirrorArray: this.ball_mirrorArray_bk\r\n\t\t\t\t})\r\n\t\t\t\t//console.log(this.photometric, \"myvalue\", this.myValue);\r\n\t\t\t\t// //console.log(this.myValue)\r\n\t\t\t\t// let gets = this.myValue.slice()\r\n\t\t\t\tthis.scrollto = `addbtn${this.myValue.length}`\r\n\t\t\t\t//console.log(this.scrollto, \"到哪去\")\r\n\t\t\t},\r\n\t\t\t//删除选中订单\r\n\t\t\tremoveTap(index) {\r\n\t\t\t\tthis.myValue.splice(index, 1)\r\n\t\t\t},\r\n\t\t\tdealData(item = this.goodsSkuDetail) {\r\n\t\t\t\tif (item.sku_images) item.sku_images = item.sku_images.split(',');\r\n\t\t\t\telse item.sku_images = [];\r\n\r\n\t\t\t\t// 多规格时合并主图\r\n\t\t\t\tif (item.goods_spec_format && item.goods_image) {\r\n\t\t\t\t\titem.goods_image = item.goods_image.split(',');\r\n\t\t\t\t\titem.sku_images = item.sku_images.concat(item.goods_image);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 当前商品SKU规格\r\n\t\t\t\tif (item.sku_spec_format) item.sku_spec_format = JSON.parse(item.sku_spec_format);\r\n\r\n\t\t\t\t// 商品属性\r\n\t\t\t\tif (item.goods_attr_format) {\r\n\t\t\t\t\tlet goods_attr_format = JSON.parse(item.goods_attr_format);\r\n\t\t\t\t\titem.goods_attr_format = this.$util.unique(goods_attr_format, 'attr_id');\r\n\t\t\t\t\tfor (var i = 0; i < item.goods_attr_format.length; i++) {\r\n\t\t\t\t\t\tfor (var j = 0; j < goods_attr_format.length; j++) {\r\n\t\t\t\t\t\t\tif (item.goods_attr_format[i].attr_id == goods_attr_format[j].attr_id && item\r\n\t\t\t\t\t\t\t\t.goods_attr_format[i].attr_value_id != goods_attr_format[j].attr_value_id) {\r\n\t\t\t\t\t\t\t\titem.goods_attr_format[i].attr_value_name += '、' + goods_attr_format[j].attr_value_name;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 商品SKU格式\r\n\t\t\t\tif (item.goods_spec_format) item.goods_spec_format = JSON.parse(item.goods_spec_format);\r\n\r\n\t\t\t\t// 商品详情\r\n\t\t\t\t// if (item.goods_content && this.type != 'point') item.goods_content = htmlParser(item.goods_content);\r\n\r\n\t\t\t\t// if (item.content && this.type == 'point') item.content = htmlParser(item.content);\r\n\r\n\t\t\t\tthis.goodsDetail.unit = this.goodsDetail.unit || '件';\r\n\r\n\t\t\t\tthis.keyInput(true);\r\n\r\n\t\t\t\tthis.$langConfig.title(item.goods_name);\r\n\t\t\t},\r\n\t\t\tchangeNum(tag) {\r\n\t\t\t\tif (this.goodsDetail.stock == 0) return;\r\n\r\n\t\t\t\tvar stock = this.goodsDetail.stock;\r\n\t\t\t\tvar min = 1;\r\n\r\n\t\t\t\tif (this.maxBuy > 0 && this.maxBuy < stock) stock = this.maxBuy;\r\n\r\n\t\t\t\tif (this.maxBuy > 0 && this.goodsDetail.purchased_num > 0) {\r\n\t\t\t\t\tstock = this.maxBuy - this.goodsDetail.purchased_num;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.minBuy > 1) {\r\n\t\t\t\t\tmin = this.minBuy;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.type == 'pintuan' && this.goodsDetail.pintuan_id) {\r\n\t\t\t\t\t//限购数量大于库存总数取库存\r\n\t\t\t\t\tif (this.goodsDetail.buy_num > this.goodsDetail.stock) {\r\n\t\t\t\t\t\tstock = this.goodsDetail.stock;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstock = this.goodsDetail.buy_num;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// min = stock;\r\n\t\t\t\t} else if (this.type == 'groupbuy' && this.goodsDetail.groupbuy_id) {\r\n\t\t\t\t\t//限购数量大于库存总数取库存\r\n\t\t\t\t\tif (this.goodsDetail.buy_num > this.goodsDetail.stock) {\r\n\t\t\t\t\t\tstock = this.goodsDetail.stock;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstock = this.goodsDetail.stock;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//最低购买数量\r\n\t\t\t\t\tmin = this.goodsDetail.buy_num;\r\n\t\t\t\t} else if (this.type == 'seckill' && this.goodsDetail.seckill_id && this.goodsDetail.num > 0 && this\r\n\t\t\t\t\t.goodsDetail.num < this.goodsDetail.stock) {\r\n\t\t\t\t\t//限购数量小于库存总数取库存\r\n\t\t\t\t\tstock = this.goodsDetail.num;\r\n\t\t\t\t} else if (this.type == 'bargain' && this.goodsDetail.bargain_id) {\r\n\t\t\t\t\tstock = 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (tag == '+') {\r\n\t\t\t\t\t// 加\r\n\t\t\t\t\tif (this.number < stock) {\r\n\t\t\t\t\t\tthis.number++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this.maxBuy > 0 && this.goodsDetail.purchased_num > 0) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '该商品每人限购' + this.maxBuy + this.goodsDetail.unit + '，您已购买了' + this\r\n\t\t\t\t\t\t\t\t\t.goodsDetail.purchased_num + this.goodsDetail.unit\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.maxBuy > 0 && this.cartNumber > 0 && this.cartNumber + this.number > this.maxBuy) {\r\n\t\t\t\t\t\t\tvar diff = this.maxBuy - this.cartNumber;\r\n\t\t\t\t\t\t\tif (diff > 0) {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '该商品每人限购' +\r\n\t\t\t\t\t\t\t\t\t\tthis.maxBuy +\r\n\t\t\t\t\t\t\t\t\t\tthis.goodsDetail.unit +\r\n\t\t\t\t\t\t\t\t\t\t'，购物车已加入了' +\r\n\t\t\t\t\t\t\t\t\t\tthis.cartNumber +\r\n\t\t\t\t\t\t\t\t\t\tthis.goodsDetail.unit +\r\n\t\t\t\t\t\t\t\t\t\t'，还能购买' +\r\n\t\t\t\t\t\t\t\t\t\tdiff +\r\n\t\t\t\t\t\t\t\t\t\tthis.goodsDetail.unit\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '该商品每人限购' + this.maxBuy + this.goodsDetail.unit\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.type == 'seckill' && this.goodsDetail.seckill_id && this.goodsDetail.num > 0) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '该商品每人限购' + this.goodsDetail.num + this.goodsDetail.unit\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (tag == '-') {\r\n\t\t\t\t\t// 减\r\n\t\t\t\t\tif (this.number > min) {\r\n\t\t\t\t\t\tthis.number -= 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (this.minBuy > 1) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '该商品' + this.minBuy + this.goodsDetail.unit + '起售'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.number > this.limitNumber && this.limitNumber) {\r\n\t\t\t\t\tthis.number = this.limitNumber;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tblur() {\r\n\t\t\t\tif (!this.number) {\r\n\t\t\t\t\tthis.number = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.number > this.limitNumber && this.limitNumber) {\r\n\t\t\t\t\tthis.number = this.limitNumber;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.number < this.minNumber && this.minNumber) {\r\n\t\t\t\t\tthis.number = this.minNumber;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.maxBuy > 0 && this.number > this.maxBuy) {\r\n\t\t\t\t\tthis.number = this.maxBuy;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.maxBuy > 0 && this.goodsDetail.purchased_num > 0) {\r\n\t\t\t\t\tlet maxBuy = this.maxBuy - this.goodsDetail.purchased_num;\r\n\t\t\t\t\tif (this.number > maxBuy) this.number = maxBuy;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.number < this.minBuy && this.minBuy > 0) {\r\n\t\t\t\t\tthis.number = this.minBuy;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet newNumber = parseInt(this.number);\r\n\t\t\t\tthis.number = 0;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.number = newNumber;\r\n\t\t\t\t}, 0);\r\n\t\t\t},\r\n\t\t\t//输入数量\r\n\t\t\tkeyInput(flag, callback) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tvar stock = this.goodsDetail.stock;\r\n\r\n\t\t\t\t\t// 库存为0\r\n\t\t\t\t\tif (this.goodsDetail.stock == 0) {\r\n\t\t\t\t\t\tthis.number = 0;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 防止空\r\n\t\t\t\t\tif (flag && this.number.length == 0) this.number = 1;\r\n\r\n\t\t\t\t\t// 防止输入0和负数、非法输入\r\n\t\t\t\t\tif (flag && (this.number <= 0 || isNaN(this.number))) this.number = 1;\r\n\r\n\t\t\t\t\tif (this.type == 'pintuan' && this.goodsDetail.pintuan_id && this.number > this.goodsDetail\r\n\t\t\t\t\t\t.buy_num) {\r\n\t\t\t\t\t\t//限购数量大于库存总数取库存\r\n\t\t\t\t\t\tthis.number = this.goodsDetail.buy_num;\r\n\t\t\t\t\t} else if (this.type == 'groupbuy' && this.goodsDetail.groupbuy_id && this.number < this\r\n\t\t\t\t\t\t.goodsDetail.buy_num) {\r\n\t\t\t\t\t\t//最低购买数量\r\n\t\t\t\t\t\tthis.number = this.goodsDetail.buy_num;\r\n\t\t\t\t\t} else if (this.type == 'seckill' && this.goodsDetail.seckill_id && this.goodsDetail.max_buy >\r\n\t\t\t\t\t\t0 && this.number > this.goodsDetail.max_buy) {\r\n\t\t\t\t\t\t//限购数量大于库存总数取库存\r\n\t\t\t\t\t\tthis.number = this.goodsDetail.max_buy;\r\n\t\t\t\t\t} else if (this.type == 'bargain' && this.goodsDetail.bargain_id) {\r\n\t\t\t\t\t\t// 砍价\r\n\t\t\t\t\t\tthis.number = 1;\r\n\t\t\t\t\t} else if (this.number > stock) {\r\n\t\t\t\t\t\tthis.number = stock;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 商品起售数\r\n\t\t\t\t\tif (this.minBuy > 1 && this.number < this.minBuy) {\r\n\t\t\t\t\t\tthis.number = this.minBuy;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (flag) this.number = parseInt(this.number);\r\n\t\t\t\t\tif (callback) callback();\r\n\t\t\t\t}, 0);\r\n\t\t\t},\r\n\r\n\t\t\t//提交\r\n\t\t\tconfirm() {\r\n\t\t\t\t//console.log(this.number);\r\n\t\t\t\t// 删除待付款物流方式缓存\r\n\t\t\t\tuni.removeStorageSync('delivery');\r\n\t\t\t\tif (this.preview) {\r\n\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\ttitle: '预览商品无法购买'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//判断\r\n\t\t\t\t// this.photometric =photometric\r\n\t\t\t\t// ball_mirrorIndex:null,\r\n\t\t\t\t// cylinder_mirrorIndex:null,\r\n\t\t\t\t// axisIndex:null,\r\n\t\t\t\t// ball_mirrorArray:[],\r\n\t\t\t\t// cylinder_mirrorArray:[],\r\n\t\t\t\t// axisArray:[],\r\n\r\n\t\t\t\t//检查数据是否填完\r\n\t\t\t\tif (!this.checkParam()) return;\r\n\r\n\t\t\t\tif (!uni.getStorageSync('token')) {\r\n\t\t\t\t\tthis.$refs.login.open();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//纠正数量\r\n\t\t\t\tthis.keyInput(true, () => {\r\n\t\t\t\t\tif (this.goodsDetail.stock == 0) {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '商品已售罄'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.number.length == 0 || this.number == 0) {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '购买数量不能为0'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.number > this.goodsDetail.stock) {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '库存不足'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.maxBuy > 0 && this.goodsDetail.purchased_num > 0 && this.number > this.maxBuy - this\r\n\t\t\t\t\t\t.goodsDetail.purchased_num) {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: '该商品每人限购' + this.maxBuy + this.goodsDetail.unit + '，您已购买了' + this\r\n\t\t\t\t\t\t\t\t.goodsDetail.purchased_num + this.goodsDetail.unit\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.maxBuy > 0 && this.cartNumber > 0 && this.cartNumber + this.number > this.maxBuy) {\r\n\t\t\t\t\t\tvar diff = this.maxBuy - this.cartNumber;\r\n\t\t\t\t\t\tif (diff > 0) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '该商品每人限购' +\r\n\t\t\t\t\t\t\t\t\tthis.maxBuy +\r\n\t\t\t\t\t\t\t\t\tthis.goodsDetail.unit +\r\n\t\t\t\t\t\t\t\t\t'，购物车已加入了' +\r\n\t\t\t\t\t\t\t\t\tthis.cartNumber +\r\n\t\t\t\t\t\t\t\t\tthis.goodsDetail.unit +\r\n\t\t\t\t\t\t\t\t\t'，还能购买' +\r\n\t\t\t\t\t\t\t\t\tdiff +\r\n\t\t\t\t\t\t\t\t\tthis.goodsDetail.unit\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '该商品每人限购' + this.maxBuy + this.goodsDetail.unit\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.btnSwitch) return;\r\n\t\t\t\t\tthis.btnSwitch = true;\r\n\r\n\t\t\t\t\tlet leftIndex = 0;\r\n\t\t\t\t\tlet cylinder_mirrorIndex = 0;\r\n\t\t\t\t\tlet ball_mirrorIndex = 0;\r\n\t\t\t\t\tlet axisIndex = 0;\r\n\t\t\t\t\tlet objIndex = 0;\r\n\t\t\t\t\tlet sumIndex = 0;\r\n\t\t\t\t\tlet number = 0;\r\n\t\t\t\t\tlet sku_id = 0;\r\n\t\t\t\t\tthis.myValue.forEach(item => {\r\n\t\t\t\t\t\tleftIndex = item.leftIndex;\r\n\t\t\t\t\t\tcylinder_mirrorIndex = item.cylinder_mirrorIndex;\r\n\t\t\t\t\t\tball_mirrorIndex = item.ball_mirrorIndex;\r\n\t\t\t\t\t\taxisIndex = item.axisIndex;\r\n\t\t\t\t\t\tobjIndex = item.objIndex;\r\n\t\t\t\t\t\tsumIndex = item.sumIndex;\r\n\t\t\t\t\t\tnumber = item.product_num;\r\n\t\t\t\t\t\tsku_id = item.sku_id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tlet LensParam = []\r\n\t\t\t\t\tthis.myValue.map(e => {\r\n\t\t\t\t\t\tLensParam.push({\r\n\t\t\t\t\t\t\teye: e.leftIndex == 0 ? '右眼' : '左眼', //左右眼\r\n\t\t\t\t\t\t\tpassage: this.objArray[e.objIndex], //通道\r\n\t\t\t\t\t\t\ta_dd: this.sumArray[e.sumIndex], //ADD\r\n\t\t\t\t\t\t\tnum: e.product_num, //数量\r\n\t\t\t\t\t\t\tball_mirror: e.ball_mirrorArray[e.ball_mirrorIndex], //球镜\r\n\t\t\t\t\t\t\tcylinder_mirror: e.cylinder_mirrorArray[e.cylinder_mirrorIndex], //柱镜\r\n\t\t\t\t\t\t\taxis: e.axisValue, // e.axisIndex, //轴位\r\n\t\t\t\t\t\t\tsku_id: e.sku_id\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//console.log(LensParam, \"111\")\r\n\t\t\t\t\t// 加入购物车\r\n\t\t\t\t\tif (this.type == 'join_cart') this.postJoinCart(LensParam)\r\n\t\t\t\t\t//立即购买\r\n\t\t\t\t\tif (this.type == 'buy_now') this.postBuyNow();\r\n\t\t\t\t\t//秒杀\r\n\t\t\t\t\tif (this.type == 'seckill') this.postSeckill();\r\n\t\t\t\t\t// 拼团\r\n\t\t\t\t\tif (this.type == 'pintuan') this.postPintuan();\r\n\t\t\t\t\t// 专题\r\n\t\t\t\t\tif (this.type == 'topic') this.postTopic();\r\n\t\t\t\t\t// 团购\r\n\t\t\t\t\tif (this.type == 'groupbuy') this.postGroupBuy();\r\n\t\t\t\t\t// 预售\r\n\t\t\t\t\tif (this.type == 'presale') this.postPresale();\r\n\t\t\t\t\t// 砍价\r\n\t\t\t\t\tif (this.type == 'bargain') this.postBargain();\r\n\t\t\t\t\t// 积分兑换\r\n\t\t\t\t\tif (this.type == 'point') this.postPoint();\r\n\t\t\t\t\t// 批发·加入进货单\r\n\t\t\t\t\tif (this.type == 'wholesale_join_cart') this.postPfJoin();\r\n\t\t\t\t\t// 批发·立即购买\r\n\t\t\t\t\tif (this.type == 'wholesale_buy_now') this.postPfBuy();\r\n\t\t\t\t\t//清空状态\r\n\t\t\t\t\tthis.myValue = []\r\n\t\t\t\t\tthis.getClickGoodsAdd()\n\t\t\t\t\tconsole.error(this.goodsDetail.rimless,\"rimless\")\n\t\t\t\t\tif (this.goodsDetail.rimless == 1) {\n\t\t\t\t\t\tthis.rimless = this.goodsDetail.rimless\n\t\t\t\t\t\tthis.getClickGoodsAdd({}, 1)\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/** \r\n\t\t\t * @return true 通过 false不通过\r\n\t\t\t * */\r\n\t\t\tcheckParam() {\r\n\t\t\t\tlet ispost = true;\r\n\r\n\t\t\t\tif (this.goodsDetail.photometric != 0 || this.goodsDetail.luminosity_status == 1) { //this.photometric != 0\r\n\t\t\t\t\tthis.myValue.forEach(e => {\r\n\t\t\t\t\t\tif (e.ball_mirrorArray[e.ball_mirrorIndex] == undefined) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请选择球镜'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tispost = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.cylinder_mirrorArray[e.cylinder_mirrorIndex] == undefined) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请选择柱镜'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tispost = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// \t\t\t\t\t\tif ( !e.axisValue) {//e.axisIndex == undefined ||\r\n\t\t\t\t\t\t// \t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t// \t\t\t\t\t\t\t\ttitle: '请输入轴位'\r\n\t\t\t\t\t\t// \t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// \t\t\t\t\t\t\tispost = false;\r\n\t\t\t\t\t\t// \t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t// \t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.sumIndex == undefined && this.goodsDetail.a_dd == 1) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请选择ADD'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tispost = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.objIndex == undefined && this.goodsDetail.passage == 1) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请选择通道'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tispost = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.quantity += e.product_num;\r\n\t\t\t\t\t\tif (this.goodsDetail.stock <= e.product_num) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请不要大于库存数量'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tispost = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn ispost\r\n\t\t\t},\r\n\t\t\tpostJoinCart(LensParam) {\r\n\t\t\t\tlet number = this.number;\r\n\t\t\t\tlet param = this.goodsDetail.photometric != 0 || this.goodsDetail.luminosity_status == 1 ? { //镜片\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tsite_id: this.goodsDetail.site_id,\r\n\t\t\t\t\tlist: JSON.stringify(LensParam),\r\n\t\t\t\t\tbuyer_message: this.buyer_message,\r\n\t\t\t\t\trimless: this.rimless\r\n\t\t\t\t} : { //默认参数,未做修改\r\n\t\t\t\t\tsite_id: this.goodsDetail.site_id,\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tball_mirror: this.ball_mirrorIndex != null ? this.ball_mirrorArray[this\r\n\t\t\t\t\t\t.ball_mirrorIndex] : 0,\r\n\t\t\t\t\tcylinder_mirror: this.cylinder_mirrorIndex != null ? this\r\n\t\t\t\t\t\t.cylinder_mirrorArray[this.cylinder_mirrorIndex] : 0,\r\n\t\t\t\t\taxis: this.axisValue, //手动输入的值\r\n\t\t\t\t\t//选择 this.axisIndex != null ? this.axisArray[this.axisIndex] : 0,\r\n\t\t\t\t\t//add和通道数据\r\n\t\t\t\t\ta_dd_data: this.sumIndex != null ? this.sumIndex[this.sumIndex] : 0,\r\n\t\t\t\t\tpassage_data: this.objIndex != null ? this.objIndex[this.objIndex] : 0,\r\n\t\t\t\t\tnum: number,\r\n\t\t\t\t\tbuyer_message: this.buyer_message,\r\n\t\t\t\t\trimless: this.rimless\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(param, \"parammmmmmmmmmm\");\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/api/cart/add',\r\n\t\t\t\t\tdata: param,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '加入购物车成功'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (this.callback) this.callback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$refs.skuPopup.close();\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.$refs.skuPopup.close();\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostBuyNow() {\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tnum: this.number,\r\n\t\t\t\t\tball_mirror: this.ball_mirrorIndex != null ? this.ball_mirrorArray[this\r\n\t\t\t\t\t\t.ball_mirrorIndex] : 0,\r\n\t\t\t\t\tcylinder_mirror: this.cylinder_mirrorIndex != null ? this.cylinder_mirrorArray[this\r\n\t\t\t\t\t\t.cylinder_mirrorIndex] : 0,\r\n\t\t\t\t\taxis: this.axisIndex != null ? this.axisArray[this.axisIndex] : 0,\r\n\t\t\t\t\t// add和通道数据\r\n\t\t\t\t\t// a_dd_data:this.AarrySum != null ? this.AarrySum[this.AarrySum] : 0,\r\n\t\t\t\t\t// passage_data:this.AarryObj != null ? this.AarryObj[this.AarryObj] : 0,\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'orderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/pages/order/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostSeckill() {\r\n\r\n\t\t\t\t// 秒杀\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tseckill_id: this.goodsDetail.seckill_id,\r\n\t\t\t\t\tnum: this.number,\r\n\t\t\t\t\tsku_id: this.skuId\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'seckillOrderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/seckill/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostPintuan() {\r\n\r\n\t\t\t\t// 拼团\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tpintuan_goods_id: this.goodsDetail.id,\r\n\t\t\t\t\tgroup_id: this.goodsDetail.group_id,\r\n\t\t\t\t\tnum: this.number\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'pintuanOrderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/pintuan/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostTopic() {\r\n\t\t\t\t// 专题\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\ttopic_goods_id: this.goodsDetail.id,\r\n\t\t\t\t\tnum: this.number\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'topicOrderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/topics/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostGroupBuy() {\r\n\t\t\t\t// 团购\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tgroupbuy_id: this.goodsDetail.groupbuy_id,\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tnum: this.number\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'groupbuyOrderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/groupbuy/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostPresale() {\r\n\t\t\t\t// 预售\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tpresale_id: this.goodsDetail.presale_id,\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tnum: this.number\r\n\t\t\t\t};\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'presaleOrderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/presale/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostBargain() {\r\n\t\t\t\t// 砍价\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/bargain/api/bargain/launch',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: this.goodsDetail.id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tthis.$util.redirectTo(\r\n\t\t\t\t\t\t\t\t'/promotionpages/bargain/launch/launch', {\r\n\t\t\t\t\t\t\t\t\tid: res.data\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t'redirectTo'\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.message\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostPoint() {\r\n\r\n\t\t\t\t// 积分兑换\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tid: this.goodsDetail.exchange_id,\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tnum: this.number\r\n\t\t\t\t};\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'exchangeOrderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/point/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostPfJoin() {\r\n\t\t\t\t// 批发·加入进货单\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/wholesale/api/cart/add',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsite_id: this.goodsDetail.site_id,\r\n\t\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\t\tnum: this.number\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tif (data > 0) {\r\n\t\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '加入进货单成功'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (this.callback) this.callback();\r\n\t\t\t\t\t\t\tthis.$store.dispatch('getWholeSaleNumber');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$refs.skuPopup.close();\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.$refs.skuPopup.close();\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpostPfBuy() {\r\n\t\t\t\t// 批发·立即购买\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\tsku_id: this.skuId,\r\n\t\t\t\t\tnum: this.number\r\n\t\t\t\t};\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'wholesaleOrderCreateData',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$util.redirectTo('/promotionpages/wholesale/payment/payment');\r\n\t\t\t\t\t\tthis.btnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcloseSkuPopup() {\r\n\t\t\t\tthis.$refs.skuPopup.close();\r\n\t\t\t},\r\n\t\t\timgError() {\r\n\t\t\t\tthis.goodsDetail.sku_image = this.$util.getDefaultImage().default_goods_img;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t},\r\n\t\t\tvalueImgError(index, index_value) {\r\n\t\t\t\tthis.goodsDetail.goods_spec_format[index].value[index_value].image = this.$util.getDefaultImage()\r\n\t\t\t\t\t.default_goods_img;\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t},\r\n\t\t\t// 获取购物车数据\r\n\t\t\tgetCartData() {\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/api/cart/goodslists',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\t\t\tif (data[i].sku_id == this.goodsDetail.sku_id) {\r\n\t\t\t\t\t\t\t\t\tthis.cartNumber = data[i].num;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\">\r\n\t.remove-sku {\r\n\t\t// text-align: center;\r\n\t\tfont-weight: bold;\r\n\t\tborder: 1px solid;\r\n\t\tdisplay: inline-block;\r\n\t\theight: 30rpx;\r\n\t\twidth: 30rpx;\r\n\t\tmargin: 10rpx;\r\n\t\tline-height: 30rpx;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 100rpx;\r\n\t\talign-self: flex-end;\r\n\t\tcolor: #ff0000;\r\n\t}\r\n\r\n\t.remarkBox {\r\n\t\tborder: 1rpx solid #DBDBDB;\r\n\t\twidth: calc(100% - 20rpx);\r\n\t\theight: 150rpx;\r\n\t\tmargin-top: 20rpx;\r\n\t\tpadding: 10rpx 10rpx;\r\n\t}\r\n\r\n\t.wrap-transverse {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.sku-layer .sku-info {\r\n\t\theight: 100vh;\r\n\t\tposition: relative;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.sku-layer .sku-info .header {\r\n\t\tpadding: 30rpx 30rpx 20rpx 210rpx;\r\n\t\tposition: relative;\r\n\t\tborder-bottom: 1px solid $color-line;\r\n\t\tmin-height: 170rpx;\r\n\t}\r\n\r\n\t.sku-layer .sku-info .header .img-wrap {\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t\tposition: absolute;\r\n\t\tleft: 20rpx;\r\n\t\tborder-radius: $border-radius;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 2rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tline-height: 208rpx;\r\n\t}\r\n\r\n\t.sku-layer .sku-info .header .img-wrap image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.sku-layer .sku-info .main {\r\n\t\tfont-size: 12px;\r\n\t\tline-height: 40rpx;\r\n\t\tpadding-right: 40rpx;\r\n\r\n\t\t.price-wrap {\r\n\t\t\tfont-weight: bold;\r\n\r\n\t\t\t.unit {\r\n\t\t\t\tmargin-right: 4rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.stock {\r\n\t\t\tfont-size: $font-size-tag;\r\n\t\t\tcolor: $color-tip;\r\n\t\t\tdisplay: -webkit-box;\r\n\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t-webkit-box-orient: vertical;\r\n\t\t\theight: 70rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\r\n\t\t.wholesale-item {\r\n\t\t\t.price-wrap {\r\n\t\t\t\tline-height: 1.4;\r\n\t\t\t}\r\n\r\n\t\t\t.stock {\r\n\t\t\t\theight: 40rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.start-number {\r\n\t\t\t\tfont-weight: normal;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.sku-layer .sku-info .main .price {\r\n\t\tword-wrap: break-word;\r\n\t}\r\n\r\n\t.sku-layer .sku-info .main .sku-name {\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 1;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\toverflow: hidden;\r\n\t\theight: 42rpx;\r\n\r\n\t\t.spec-value {\r\n\t\t\t&::after {\r\n\t\t\t\tcontent: '/';\r\n\t\t\t}\r\n\r\n\t\t\t&:last-child {\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tcontent: '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.sku-layer .sku-info .sku-close {\r\n\t\tposition: absolute;\r\n\t\ttop: 20rpx;\r\n\t\tright: 40rpx;\r\n\t\twidth: 40rpx;\r\n\t\theight: 80rpx;\r\n\t\tfont-size: 40rpx;\r\n\t}\r\n\r\n\t.sku-layer .body-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 30rpx;\r\n\t\theight: calc(100% - 450rpx);\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.sku-layer .body-item .wrap {\r\n\t\theight: calc(100% - 116rpx);\r\n\t}\r\n\r\n\t.sku-layer .body-item .sku-list-wrap {\r\n\r\n\t\t// display: flex;\r\n\t\t// flex-direction: column;\r\n\t\t// justify-content: center;\r\n\t\t.item {\r\n\t\t\t// flex-grow: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t.sku-layer .body-item .sku-list-wre {\r\n\t\tbackground: #FFE4B5;\r\n\t\ttext-align: center;\r\n\t\t/* line-height: inherit; */\r\n\t\theight: 50rpx;\r\n\t\tline-height: 50rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 25rpx;\r\n\t\tcolor: #999999;\r\n\t\tborder: 1px dashed #999999;\r\n\t}\r\n\r\n\t.sku-layer .body-item .sku-list-wrap-cz {\r\n\t\tcolor: #1786f8 !important;\r\n\t}\r\n\r\n\t.sku-layer .body-item .sku-list-wrap .title {\r\n\t\tpadding: 20rpx 0;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.sku-layer .body-item .sku-list-wrap .items {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline-block;\r\n\t\tborder: 1px solid $color-line;\r\n\t\tpadding: 4rpx 30rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tmargin: 0 20rpx 20rpx 0;\r\n\t\tbackground-color: #fff;\r\n\t\tfont-size: $font-size-tag;\r\n\t}\r\n\r\n\t.sku-layer .body-item .sku-list-wrap .items.disabled {\r\n\t\tborder: 1px dashed;\r\n\t}\r\n\r\n\t.sku-layer .body-item .sku-list-wrap .items image {\r\n\t\theight: 44rpx;\r\n\t\twidth: 44rpx;\r\n\t\tborder-radius: $border-radius;\r\n\t\tmargin-right: 10rpx;\r\n\t\tdisplay: inline-block;\r\n\t\tvertical-align: middle;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .number-line {\r\n\t\tpadding: 20rpx 0;\r\n\t\tline-height: 72rpx;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .title {\r\n\t\tfont-weight: 400;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .limit-txt {}\r\n\r\n\t.sku-layer .body-item .number-wrap .number {\r\n\t\tdisplay: flex;\r\n\t\theight: 72rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\tfloat: right;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .number button {\r\n\t\tdisplay: inline-block;\r\n\t\tline-height: 64rpx;\r\n\t\theight: 68rpx;\r\n\t\twidth: 60rpx;\r\n\t\tfont-size: 48rpx;\r\n\t\tbox-sizing: content-box;\r\n\t\tborder: 1px solid $color-line;\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t\tborder-radius: 0;\r\n\t\tbackground-color: #fff !important;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .number button.decrease {\r\n\t\tborder-right-width: 0 !important;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .number button.increase {\r\n\t\tborder-left: 0 !important;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .number button:after {\r\n\t\tborder-radius: 0;\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.sku-layer .body-item .number-wrap .number input {\r\n\t\tdisplay: inline-block;\r\n\t\tline-height: 64rpx;\r\n\t\theight: 68rpx;\r\n\t\twidth: 72rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-weight: 700;\r\n\t\tborder: 1px solid;\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\tvertical-align: top;\r\n\t\tbackground-color: $color-bg !important;\r\n\t}\r\n\r\n\t.sku-layer .footer {\r\n\t\theight: 100rpx;\r\n\t\twidth: 100%;\r\n\t\tposition: absolute;\r\n\t\tbottom: 80rpx;\r\n\t\tcolor: #fff;\r\n\t\tz-index: 1;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: flex-start;\r\n\r\n\t\tbutton {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 80rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.wrap-sph {\r\n\t\tpadding-bottom: 20rpx;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\tfont-size: 14rpx;\r\n\t}\r\n\r\n\t.picker-item {\r\n\t\tborder: 2rpx solid #007aff;\r\n\t\tpadding: 0 6rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\ttext-align: center;\r\n\t\twidth: 65rpx;\r\n\t\theight: 45rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 45rpx;\r\n\t}\r\n\r\n\t.add-sku {\r\n\t\twidth: 200rpx;\r\n\t\theight: 48rpx;\r\n\t\tline-height: 48rpx;\r\n\t\tbackground-color: #007aff;\r\n\t\tborder-radius: 50rpx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #FFFFFF;\r\n\t\tmargin: 3% auto;\r\n\r\n\t}\r\n</style>\r\n<style scoped>\r\n\t/deep/ .reward-popup .uni-popup__wrapper-box {\r\n\t\tbackground: none !important;\r\n\t\tmax-width: unset !important;\r\n\t\tmax-height: unset !important;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ns-goods-sku.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ns-goods-sku.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1666844730773\n      var cssReload = require(\"/Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ns-goods-sku.vue?vue&type=style&index=1&id=407fe378&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ns-goods-sku.vue?vue&type=style&index=1&id=407fe378&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1666844718791\n      var cssReload = require(\"/Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}