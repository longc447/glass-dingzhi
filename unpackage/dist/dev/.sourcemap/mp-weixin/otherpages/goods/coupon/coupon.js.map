{"version":3,"sources":["uni-app:///main.js","webpack:////Users/longchu/Documents/接单/改客服源码/otherpages/goods/coupon/coupon.vue?5137","webpack:////Users/longchu/Documents/接单/改客服源码/otherpages/goods/coupon/coupon.vue?82ef","webpack:////Users/longchu/Documents/接单/改客服源码/otherpages/goods/coupon/coupon.vue?6655","webpack:////Users/longchu/Documents/接单/改客服源码/otherpages/goods/coupon/coupon.vue?3bc6","uni-app:///otherpages/goods/coupon/coupon.vue","webpack:////Users/longchu/Documents/接单/改客服源码/otherpages/goods/coupon/coupon.vue?3cc7","webpack:////Users/longchu/Documents/接单/改客服源码/otherpages/goods/coupon/coupon.vue?3027"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","couponTab","list","back","onShow","title","mask","setTimeout","mixins","computed","addonIsExit","methods","liClick","item","index","couponTabOn","receiveCoupon","site_id","get_type","url","success","msg","fail","bindgetuserinfo","redirect_url","location","getMemberCounponList","mescroll","page","page_size","newArr","v","toGoodsList","couponId","platformcouponTypeId","onShareAppMessage","res","path"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,4G,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACyN;AACzN,gBAAgB,uNAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,yLAEN;AACP,KAAK;AACL;AACA,aAAa,uNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5EA;AAAA;AAAA;AAAA;AAAi3B,CAAgB,k0BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgFr4B;AACA,wG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACAC,IADA,kBACA,CACA,SACAC,YADA,EACA;MACAC,QAFA,EAGAC,uCAHA,GAKA,CAPA,EAQAC,MARA,oBAQA,mBACA;IACA,2BACA,+BACA,uBACAC,eADA,EAEAC,UAFA,IAIAC,wBACA,qEACA,CAFA,EAEA,IAFA,EAGA,CACA,CApBA,EAqBAC,gDArBA,EAsBAC,YACAC,WADA,yBACA,CACA,qCACA,CAHA,EAtBA,EA2BAC,WACAC,OADA,mBACAC,IADA,EACAC,KADA,EACA,CACA,6DACA,8BACA,CAJA,EAKA;IACAC,WANA,uBAMAD,KANA,EAMA,CACA,uBACA,eACA,mCACA,CAVA,EAWA;IACAE,aAZA,yBAYAH,IAZA,EAYAC,KAZA,EAYA,mBACA,iCACA,4BACA,wCACA,kBACA,QACAd,SACAiB,qBADA,EAEAC,WAFA,CAEA;QAFA,CADA,CAKA,0BACAC,mCACAnB,0CACA,CAHA,MAGA,CACAmB,mDACAnB,0DACA,CACA,wBACAmB,QADA,EAEAnB,UAFA,EAGAoB,gCACA,oBACA,sBACA,oBACAC,aACA,CACA,uBACA,4BACA,6BACA,uCACA,oDACAnB,qBACA,CACA,CACA,CANA,MAMA,CACA,0CACA,qDACAA,sBACA,CACA,CACA,CACA,CAdA,MAcA,CACA,6BACA,6CACA;oBACAA;kBACA;gBACA;cACA,CANA,MAMA;gBACA;kBACA;oBACAA;kBACA;gBACA;cACA;YACA;YACA;cACAG,UADA;;YAGA;UACA,CA3CA;UA4CAiB;YACA;UACA,CA9CA;;MAgDA,CA7DA,MA6DA;QACA;MACA;IACA,CAhFA;IAiFAC,eAjFA,6BAiFA;MACA;QACA;QACA;QACAC;;QAEA;UACAL,kCADA;UAEAnB;YACAwB,0BADA,EAFA;;UAKAJ;YACA;cACAK;YACA;UACA,CATA;;MAWA,CAhBA,MAgBA;QACA;QACA;UACAtB,eADA,IADA;;QAIA;MACA;MACA;IACA,CA1GA;IA2GAuB,oBA3GA,gCA2GAC,QA3GA,EA2GA;MACA;MACA;QACAR;MACA,CAFA,MAEA;QACAA;MACA;MACA;QACAA,QADA;QAEAnB;UACA4B,kBADA;UAEAC,wBAFA,EAFA;;QAMAT;UACA;UACA;UACA;YACAU;UACA,CAFA,MAEA;YACA;cACAzB,UADA;;UAGA;UACA;YACAyB;cACAC;YACA,CAFA;UAGA;UACAJ;UACA;YACAG;cACA;cACAC;YACA,CAHA;UAIA;UACA;UACA,wCAvBA,CAuBA;UACA,yCAxBA,CAwBA;UACA;QACA,CAhCA;QAiCAT,IAjCA,kBAiCA;UACAK;UACA;QACA,CApCA;;IAsCA,CAxJA;IAyJA;IACAK,WA1JA,uBA0JAnB,IA1JA,EA0JA;MACA;QACA;UACA;YACAoB,6BADA;YAEAhB,qBAFA;;QAIA,CALA,MAKA;UACA;YACAA,qBADA;;QAGA;MACA,CAXA,MAWA;QACA;UACA;YACAiB,iDADA;;QAGA,CAJA,MAIA;UACA;QACA;MACA;IACA,CA/KA,EA3BA;;EA4MA;AACA;AACA;AACA;EACAC,iBAhNA,6BAgNAC,GAhNA,EAgNA;IACA;IACA;IACA;MACA/B,YADA;MAEAgC,UAFA;MAGAjB,iCAHA;MAIAE,2BAJA;;EAMA,CAzNA,E;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAonD,CAAgB,y9CAAG,EAAC,C;;;;;;;;;;;ACAxoD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"otherpages/goods/coupon/coupon.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './otherpages/goods/coupon/coupon.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./coupon.vue?vue&type=template&id=a148f22e&\"\nvar renderjs\nimport script from \"./coupon.vue?vue&type=script&lang=js&\"\nexport * from \"./coupon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./coupon.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"otherpages/goods/coupon/coupon.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon.vue?vue&type=template&id=a148f22e&\"","var components\ntry {\n  components = {\n    nsEmpty: function () {\n      return import(\n        /* webpackChunkName: \"components/ns-empty/ns-empty\" */ \"@/components/ns-empty/ns-empty.vue\"\n      )\n    },\n    loadingCover: function () {\n      return import(\n        /* webpackChunkName: \"components/loading-cover/loading-cover\" */ \"@/components/loading-cover/loading-cover.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.addonIsExit.coupon\n    ? _vm.__map(_vm.list, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n\n        var g0 = _vm.$util.img(\n          item.useState == 2\n            ? \"/upload/uniapp/coupon/bg_lingqu_gary.png\"\n            : \"/upload/uniapp/coupon/bg_lingqu.png\"\n        )\n        var m0 =\n          !item.discount || item.discount == \"0.00\"\n            ? parseInt(item.money)\n            : null\n        var m1 =\n          !(!item.discount || item.discount == \"0.00\") &&\n          item.type == \"discount\"\n            ? parseFloat(item.discount)\n            : null\n        var g1 = !item.validity_type\n          ? _vm.$util.timeStampTurnTime(item.end_time)\n          : null\n        return {\n          $orig: $orig,\n          g0: g0,\n          m0: m0,\n          m1: m1,\n          g1: g1,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :data-theme=\"themeStyle\">\r\n\t\t<view class=\"cf-container color-line-border\">\r\n\t\t\t<view class=\"tab\">\r\n\t\t\t\t<view @click=\"couponTabOn(0)\"><text :class=\"couponTab == 0 ? 'color-base-text active color-base-border-bottom' : ''\">店铺优惠劵</text></view>\r\n\t\t\t\t<view @click=\"couponTabOn(1)\"><text :class=\"couponTab == 1 ? 'color-base-text active color-base-border-bottom' : ''\">平台优惠劵</text></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view>\r\n\t\t\t<view>\r\n\t\t\t\t<mescroll-uni ref=\"mescroll\" :top=\"80\" @getData=\"getMemberCounponList\" v-if=\"addonIsExit.coupon\">\r\n\t\t\t\t\t<block slot=\"list\">\r\n\t\t\t\t\t\t<view class=\"coupon-listone\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tclass=\"item\"\r\n\t\t\t\t\t\t\t\tv-for=\"(item, index) in list\"\r\n\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t@click=\"liClick(item, index)\"\r\n\t\t\t\t\t\t\t\t:style=\"{ backgroundColor: item.useState == 2 ? '#F2F2F2' : '#FFF2F0' }\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\tclass=\"item-base\"\r\n\t\t\t\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\t\t\t\tbackgroundImage:\r\n\t\t\t\t\t\t\t\t\t\t\t'url(' + $util.img(item.useState == 2 ? '/upload/uniapp/coupon/bg_lingqu_gary.png' : '/upload/uniapp/coupon/bg_lingqu.png') + ')'\r\n\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"use_price\" v-if=\"!item.discount || item.discount == '0.00'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text>￥</text>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ parseInt(item.money) }}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"use_price\" v-else-if=\"item.type == 'discount'\" :class=\"{ disabled: item.useState == 2 }\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ parseFloat(item.discount) }}\r\n\t\t\t\t\t\t\t\t\t\t\t<text>折</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"use_condition font-size-tag\" v-if=\"item.at_least > 0\" :class=\"{ disabled: item.useState == 2 }\">\r\n\t\t\t\t\t\t\t\t\t\t\t满{{ item.at_least }}元可用\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"use_condition font-size-tag\" v-else :class=\"{ disabled: item.useState == 2 }\">无门槛优惠券</view>\r\n\t\t\t\t\t\t\t\t\t\t<block v-if=\"couponTab == 0\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"use_condition font-size-tag margin_top_none\" v-if=\"item.goods_type == 1\" :class=\"{ disabled: item.useState == 2 }\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t全场商品\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"use_condition font-size-tag margin_top_none\" v-else :class=\"{ disabled: item.useState == 2 }\">指定商品</view>\r\n\t\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t\t<block v-if=\"couponTab == 1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"use_condition font-size-tag margin_top_none\" v-if=\"item.use_scenario == 1\" :class=\"{ disabled: item.useState == 2 }\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t全场店铺\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"use_condition font-size-tag margin_top_none\" v-else :class=\"{ disabled: item.useState == 2 }\">指定店铺</view>\r\n\t\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item-info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"use_title\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"title\">{{ couponTab == 0 ? item.coupon_name : item.platformcoupon_name }}</view>\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"couponTab == 0 && item.site_name\" class=\"max_price\">{{ item.site_name }}</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"max_price\" v-if=\"item.discount_limit && item.discount_limit != '0.00'\">(最大优惠{{ item.discount_limit }}元)</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"use_time\" v-if=\"item.validity_type\">有效期：领取之日起{{ item.fixed_term }}日内有效</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"use_time\" v-else>有效期：{{ $util.timeStampTurnTime(item.end_time) }}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item-btn\">\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"item.useState == 0\" @click.stop=\"receiveCoupon(item, index)\">领取</view>\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"item.useState == 1\" @click.stop=\"toGoodsList(item, index)\">去使用</view>\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"item.useState == 2\" :class=\"{ disabled: item.useState == 2 }\">已抢光</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"list.length == 0\"><ns-empty text=\"暂无可领取的优惠券\" :isIndex=\"!1\" :fixed=\"!1\"></ns-empty></view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</mescroll-uni>\r\n\t\t\t\t<loading-cover ref=\"loadingCover\"></loading-cover>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport Config from 'common/js/config.js';\r\nimport globalConfig from '@/common/js/golbalConfig.js';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcouponTab: 0, //优惠券类型\r\n\t\t\tlist: [],\r\n\t\t\tback: '/otherpages/goods/coupon/coupon'\r\n\t\t};\r\n\t},\r\n\tonShow() {\r\n\t\t// 刷新多语言\r\n\t\tthis.$langConfig.refresh();\r\n\t\tif (!this.addonIsExit.coupon) {\r\n\t\t\tthis.$util.showToast({\r\n\t\t\t\ttitle: '优惠券未启用',\r\n\t\t\t\tmask: true\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.$util.redirectTo('/pages/index/index/index', {}, 'redirectTo');\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t},\r\n\tmixins: [globalConfig, Config],\r\n\tcomputed: {\r\n\t\taddonIsExit() {\r\n\t\t\treturn this.$store.state.addonIsExit;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tliClick(item, index) {\r\n\t\t\tif (item.useState == 0) this.receiveCoupon(item, index);\r\n\t\t\telse this.toGoodsList(item, index);\r\n\t\t},\r\n\t\t//优惠券类型\r\n\t\tcouponTabOn(index) {\r\n\t\t\tthis.couponTab = index;\r\n\t\t\tthis.list = [];\r\n\t\t\tthis.$refs.mescroll.refresh(false);\r\n\t\t},\r\n\t\t//领取优惠券\r\n\t\treceiveCoupon(item, index) {\r\n\t\t\tif (this.couponBtnSwitch) return;\r\n\t\t\tthis.couponBtnSwitch = true;\r\n\t\t\tlet token = uni.getStorageSync('token');\r\n\t\t\tif (token != '') {\r\n\t\t\t\tvar url,\r\n\t\t\t\t\tdata = {\r\n\t\t\t\t\t\tsite_id: item.site_id,\r\n\t\t\t\t\t\tget_type: 2 //获取方式:1订单2.直接领取3.活动领取\r\n\t\t\t\t\t};\r\n\t\t\t\tif (this.couponTab == 0) {\r\n\t\t\t\t\turl = '/coupon/api/coupon/receive';\r\n\t\t\t\t\tdata.coupon_type_id = item.coupon_type_id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\turl = '/platformcoupon/api/platformcoupon/receive';\r\n\t\t\t\t\tdata.platformcoupon_type_id = item.platformcoupon_type_id;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tvar data = res.data;\r\n\t\t\t\t\t\tlet msg = res.message;\r\n\t\t\t\t\t\tif (res.code == 0) {\r\n\t\t\t\t\t\t\tmsg = '领取成功';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet list = this.list;\r\n\t\t\t\t\t\tif (this.couponTab == 0) {\r\n\t\t\t\t\t\t\tif (res.data.is_exist == 1) {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (list[i].coupon_type_id == item.coupon_type_id) {\r\n\t\t\t\t\t\t\t\t\t\tlist[i].useState = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (list[i].coupon_type_id == item.coupon_type_id) {\r\n\t\t\t\t\t\t\t\t\t\tlist[i].useState = 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (res.data.is_exist == 1) {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (list[i].platformcoupon_type_id == item.platformcoupon_type_id) {\r\n\t\t\t\t\t\t\t\t\t\tlist[i].useState = 1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (list[i].platformcoupon_type_id == item.platformcoupon_type_id) {\r\n\t\t\t\t\t\t\t\t\t\tlist[i].useState = 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.couponBtnSwitch = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: res => {\r\n\t\t\t\t\t\tthis.couponBtnSwitch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.bindgetuserinfo();\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindgetuserinfo() {\r\n\t\t\tif (this.$util.isWeiXin()) {\r\n\t\t\t\tlet redirect_url = '';\r\n\t\t\t\tif (this.back) redirect_url = Config.h5Domain + '/pages/login/login/login?back=' + encodeURIComponent(this.back);\r\n\t\t\t\telse redirect_url = Config.h5Domain + '/pages/login/login/login';\r\n\r\n\t\t\t\tthis.$api.sendRequest({\r\n\t\t\t\t\turl: '/wechat/api/wechat/authcode',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tredirect_url\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.code >= 0) {\r\n\t\t\t\t\t\t\tlocation.href = res.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (this.back)\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/login/login/login', {\r\n\t\t\t\t\t\tback: this.back\r\n\t\t\t\t\t});\r\n\t\t\t\telse this.$util.redirectTo('/pages/login/login/login');\r\n\t\t\t}\r\n\t\t\tthis.couponBtnSwitch = false;\r\n\t\t},\r\n\t\tgetMemberCounponList(mescroll) {\r\n\t\t\tvar url;\r\n\t\t\tif (this.couponTab == 0) {\r\n\t\t\t\turl = '/coupon/api/coupon/typepagelists';\r\n\t\t\t} else {\r\n\t\t\t\turl = '/platformcoupon/api/platformcoupon/typepagelists';\r\n\t\t\t}\r\n\t\t\tthis.$api.sendRequest({\r\n\t\t\t\turl: url,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage: mescroll.num,\r\n\t\t\t\t\tpage_size: mescroll.size\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tlet newArr = [];\r\n\t\t\t\t\tlet msg = res.message;\r\n\t\t\t\t\tif (res.code == 0 && res.data) {\r\n\t\t\t\t\t\tnewArr = res.data.list;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$util.showToast({\r\n\t\t\t\t\t\t\ttitle: msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (newArr.length) {\r\n\t\t\t\t\t\tnewArr.forEach(v => {\r\n\t\t\t\t\t\t\tv.useState = 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmescroll.endSuccess(newArr.length);\r\n\t\t\t\t\tif (newArr.length) {\r\n\t\t\t\t\t\tnewArr.forEach(v => {\r\n\t\t\t\t\t\t\tif (v.count == v.lead_count) v.useState = 2;\r\n\t\t\t\t\t\t\telse v.useState = 0;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//设置列表数据\r\n\t\t\t\t\tif (mescroll.num == 1) this.list = []; //如果是第一页需手动制空列表\r\n\t\t\t\t\tthis.list = this.list.concat(newArr); //追加新数据\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t},\r\n\t\t\t\tfail() {\r\n\t\t\t\t\tmescroll.endErr();\r\n\t\t\t\t\tif (this.$refs.loadingCover) this.$refs.loadingCover.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//去使用优惠券\r\n\t\ttoGoodsList(item) {\r\n\t\t\tif (this.couponTab == 0) {\r\n\t\t\t\tif (item.goods_type != 1) {\r\n\t\t\t\t\tthis.$util.redirectTo('/otherpages/shop/list/list', {\r\n\t\t\t\t\t\tcouponId: item.coupon_type_id,\r\n\t\t\t\t\t\tsite_id: item.site_id\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.redirectTo('/otherpages/shop/list/list', {\r\n\t\t\t\t\t\tsite_id: item.site_id\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (item.use_scenario != 1) {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/goods/list/list', {\r\n\t\t\t\t\t\tplatformcouponTypeId: item.platformcoupon_type_id\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$util.redirectTo('/pages/goods/list/list', {});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * 自定义分享内容\r\n\t * @param {Object} res\r\n\t */\r\n\tonShareAppMessage(res) {\r\n\t\tvar title = '送您一张优惠券,快来领取吧';\r\n\t\tvar path = '/otherpages/goods/coupon/coupon';\r\n\t\treturn {\r\n\t\t\ttitle: title,\r\n\t\t\tpath: path,\r\n\t\t\tsuccess: res => {},\r\n\t\t\tfail: res => {}\r\n\t\t};\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.coupon-listone {\r\n\tmargin: 0 30rpx;\r\n\r\n\t.item {\r\n\t\tdisplay: flex;\r\n\t\tbackground-color: #fff2f0;\r\n\t\tbackground-size: 100% 100%;\r\n\t\tborder-radius: 20rpx;\r\n\t\talign-items: stretch;\r\n\t\tmargin-top: $padding;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.item-base {\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 197rpx;\r\n\t\t\tmin-width: 197rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\tbackground-image: linear-gradient(to right top, #fc6831, #ff4544);\r\n\t\t\tbackground-repeat: no-repeat;\r\n\t\t\tbackground-size: 100% 100%;\r\n\t\t\tpadding: 38rpx 10rpx 38rpx 18rpx;\r\n\r\n\t\t\t> view {\r\n\t\t\t\theight: auto;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\ttransform: translate(0, -50%);\r\n\t\t\t}\r\n\r\n\t\t\t.use_price {\r\n\t\t\t\tfont-size: 60rpx;\r\n\t\t\t\tline-height: 1;\r\n\t\t\t\tcolor: #fff;\r\n\r\n\t\t\t\ttext {\r\n\t\t\t\t\tfont-size: $font-size-toolbar;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.disabled {\r\n\t\t\t\t\tcolor: $color-tip;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.use_condition {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tmargin-top: $padding;\r\n\r\n\t\t\t\t&.margin_top_none {\r\n\t\t\t\t\tmargin-top: 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.disabled {\r\n\t\t\t\t\tcolor: $color-tip;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&::after {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\ttransform: translate(0, -50%);\r\n\t\t\t\theight: 30rpx;\r\n\t\t\t\twidth: 15rpx;\r\n\t\t\t\tborder-radius: 0 15px 15px 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.item-btn {\r\n\t\t\twidth: 160rpx;\r\n\t\t\tmin-width: 160rpx;\r\n\t\t\talign-self: center;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\tview {\r\n\t\t\t\twidth: 100rpx;\r\n\t\t\t\theight: 50rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\tline-height: 50rpx;\r\n\t\t\t\tmargin: auto;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tbackground-image: linear-gradient(to right, #fc6831, #ff4544);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: $font-size-tag;\r\n\r\n\t\t\t\t&.disabled {\r\n\t\t\t\t\tbackground: #dedede !important;\r\n\t\t\t\t\tcolor: #909399 !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&::after {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t\tright: 0;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\ttransform: translate(0, -50%);\r\n\t\t\t\theight: 30rpx;\r\n\t\t\t\twidth: 15rpx;\r\n\t\t\t\tborder-radius: 15px 0 0 15px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.item-info {\r\n\t\t\tflex: 1;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-left: 20rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\tbackground-repeat-x: no-repeat;\r\n\t\t\tbackground-repeat-y: repeat;\r\n\r\n\t\t\t.use_time {\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tborder-top: 1px dashed #cccccc;\r\n\t\t\t\tfont-size: $font-size-activity-tag;\r\n\t\t\t\tcolor: #909399;\r\n\t\t\t}\r\n\r\n\t\t\t.use_title {\r\n\t\t\t\tfont-size: $font-size-base;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.max_price {\r\n\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t\tfont-size: $font-size-tag;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.cf-container {\r\n\tbackground: #fff;\r\n\toverflow: hidden;\r\n\tborder-bottom: 2rpx solid;\r\n\tpadding: 10rpx 0;\r\n}\r\n\r\n.tab {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\r\n\t> view {\r\n\t\ttext-align: center;\r\n\t\twidth: 40%;\r\n\r\n\t\ttext {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tline-height: 66rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.active {\r\n\t\tborder-bottom: 4rpx solid;\r\n\t}\r\n}\r\n\r\n.tabs-box {\r\n\toverflow: hidden;\r\n}\r\n\r\n.coupon-tab {\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tpadding-top: 10rpx;\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\r\n\t.tab-item {\r\n\t\theight: 70rpx;\r\n\t\t// color: $color-base-text-black;\r\n\t\tline-height: 70rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.tab-item.active {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.tab-item.active::after {\r\n\t\tcontent: '';\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 100%;\r\n\t\theight: 6rpx;\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 3rpx;\r\n\t}\r\n\r\n\t.tab-item:nth-child(1) {\r\n\t\tmargin-right: 25%;\r\n\t}\r\n}\r\n\r\n.empty {\r\n\tmargin-top: 200rpx;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1666844729388\n      var cssReload = require(\"/Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}