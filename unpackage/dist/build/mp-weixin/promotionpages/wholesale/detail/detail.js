require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["promotionpages/wholesale/detail/detail","components/ns-goods-sku/ns-goods-sku"],{"02e4":function(t,i,e){"use strict";var o=e("c6e7"),n=e.n(o);n.a},"04ca":function(t,i,e){},"0933":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;n(e("67eb"));var o=n(e("04b1"));function n(t){return t&&t.__esModule?t:{default:t}}function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return t};var t={},i=Object.prototype,e=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(t,i,e){return Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{u({},"")}catch($){u=function(t,i,e){return t[i]=e}}function l(t,i,e,o){var n=i&&i.prototype instanceof h?i:h,s=Object.create(n.prototype),r=new S(o||[]);return s._invoke=function(t,i,e){var o="suspendedStart";return function(n,s){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===n)throw s;return I()}for(e.method=n,e.arg=s;;){var r=e.delegate;if(r){var a=v(r,e);if(a){if(a===c)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===o)throw o="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);o="executing";var u=d(t,i,e);if("normal"===u.type){if(o=e.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(o="completed",e.method="throw",e.arg=u.arg)}}}(t,e,r),s}function d(t,i,e){try{return{type:"normal",arg:t.call(i,e)}}catch($){return{type:"throw",arg:$}}}t.wrap=l;var c={};function h(){}function m(){}function g(){}var p={};u(p,n,(function(){return this}));var f=Object.getPrototypeOf,_=f&&f(f(w([])));_&&_!==i&&e.call(_,n)&&(p=_);var y=g.prototype=h.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(i){u(t,i,(function(t){return this._invoke(i,t)}))}))}function k(t,i){var o;this._invoke=function(n,s){function r(){return new i((function(o,r){(function o(n,s,r,a){var u=d(t[n],t,s);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&e.call(c,"__await")?i.resolve(c.__await).then((function(t){o("next",t,r,a)}),(function(t){o("throw",t,r,a)})):i.resolve(c).then((function(t){l.value=t,r(l)}),(function(t){return o("throw",t,r,a)}))}a(u.arg)})(n,s,o,r)}))}return o=o?o.then(r,r):r()}}function v(t,i){var e=t.iterator[i.method];if(void 0===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=void 0,v(t,i),"throw"===i.method))return c;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var o=d(e,t.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,c;var n=o.arg;return n?n.done?(i[t.resultName]=n.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=void 0),i.delegate=null,c):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,c)}function D(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function x(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function w(t){if(t){var i=t[n];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function i(){for(;++o<t.length;)if(e.call(t,o))return i.value=t[o],i.done=!1,i;return i.value=void 0,i.done=!0,i};return s.next=s}}return{next:I}}function I(){return{value:void 0,done:!0}}return m.prototype=g,u(y,"constructor",g),u(g,"constructor",m),m.displayName=u(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var i="function"==typeof t&&t.constructor;return!!i&&(i===m||"GeneratorFunction"===(i.displayName||i.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(k.prototype),u(k.prototype,r,(function(){return this})),t.AsyncIterator=k,t.async=function(i,e,o,n,s){void 0===s&&(s=Promise);var r=new k(l(i,e,o,n),s);return t.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},b(y),u(y,a,"Generator"),u(y,n,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var i=[];for(var e in t)i.push(e);return i.reverse(),function e(){for(;i.length;){var o=i.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=w,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var i in this)"t"===i.charAt(0)&&e.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function o(e,o){return r.type="throw",r.arg=t,i.next=e,o&&(i.method="next",i.arg=void 0),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],r=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var a=e.call(s,"catchLoc"),u=e.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,i){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&e.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=i&&i<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=t,r.arg=i,s?(this.method="next",this.next=s.finallyLoc,c):this.complete(r)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),c},finish:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),x(e),c}},catch:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc===t){var o=e.completion;if("throw"===o.type){var n=o.arg;x(e)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,e){return this.delegate={iterator:w(t),resultName:i,nextLoc:e},"next"===this.method&&(this.arg=void 0),c}},t}function r(t,i,e,o,n,s,r){try{var a=t[s](r),u=a.value}catch(l){return void e(l)}a.done?i(u):Promise.resolve(u).then(o,n)}var a={name:"ns-goods-sku",components:{uniPopup:function(){e.e("components/uni-popup/uni-popup-sku").then(function(){return resolve(e("f110"))}.bind(null,e)).catch(e.oe)}},props:{goodsDetail:{type:Object,default:null},disabled:{type:Boolean,default:!1},pointLimit:{type:[Number,String]},maxBuy:{type:Number,default:0},minBuy:{type:Number,default:0}},data:function(){return{rimless:"",scrollto:"addbtn0",isIphoneX:!1,systemInfo:{},number:1,btnSwitch:!1,type:"",callback:null,skuId:0,pintuanId:0,limitNumber:0,minNumber:0,preview:0,cartNumber:0,leftIndex:0,ball_mirrorIndex:0,cylinder_mirrorIndex:0,axisIndex:0,sumIndex:0,objIndex:0,leftArray:["R","L"],ball_mirrorArray:[],cylinder_mirrorArray:[],ball_mirrorArray_bk:[],cylinder_mirrorArray_bk:[],axisArray:[],sumArray:[],objArray:[],photometric:0,is_wholesaler:o.default.is_wholesaler,myValue:[],nowIndex:0,lastIndex:0,quantity:0,mirrolist:[],sumPrice:0,newballlist:[],buyer_message:""}},mounted:function(){console.log(this.goodsDetail.sku_spec_format,"多规格"),this.isIphoneX=this.$util.uniappIsIPhoneX(),this.systemInfo=t.getSystemInfoSync(),this.getWholesale(this.goodsDetail),0==this.goodsDetail.goods_id&&this.$emit("error")},watch:{pointLimit:function(t,i){this.limitNumber=Number(t)},goodsDetail:function(t,i){this.goodsDetailChange(t),console.error(this.goodsDetail,"更新了一次"),1==this.goodsDetail.rimless&&(this.rimless=this.goodsDetail.rimless,this.getClickGoodsAdd({},1))},minBuy:function(t,i){this.minBuy>1&&(this.number=Number(this.minBuy))}},methods:{goodsDetailChange:function(t,i){if(this.skuId=t.sku_id,console.error(this.goodsDetail.luminosity_status,"luminosity_status"),1!=this.goodsDetail.luminosity_status&&this.setBalllist(),0!=t.photometric||1==t.luminosity_status){for(var e=[],o=.25,n=t.ball_min;n<=t.ball_max;n+=o)o=n<this.goodsDetail.step&&0!=this.goodsDetail.step?.5:.25,e.push((n.toFixed(2)>0?"+":"")+n.toFixed(2));for(var s=[],r=.25,a=t.cylinder_min;a<=t.cylinder_max;a+=r)r=a<this.goodsDetail.step&&0!=this.goodsDetail.step?.5:.25,s.push((a.toFixed(2)>0?"+":"")+a.toFixed(2));for(var u=[],l=0;l<=180;l+=1)u.push(l);var d=[];if(1==this.goodsDetail.a_dd)d=this.goodsDetail.a_dd_data;else for(var c=0;c<=180;c+=1)d.push(c);var h=[];if(1==this.goodsDetail.passage)h=this.goodsDetail.passage_data;else for(var m=0;m<=180;m+=1)h.push(m);this.photometric=t.photometric,this.ball_mirrorArray=e,this.cylinder_mirrorArray=s,this.ball_mirrorArray_bk=e,this.cylinder_mirrorArray_bk=s,this.myValue=[],this.getClickGoodsAdd(),this.axisArray=u,this.sumArray=d,this.objArray=h}},setBalllist:function(){var t=this,i=0,e=0,o=[],n=this.goodsDetail,s=n.ball_min,r=n.ball_max;0==this.mirrolist.length&&(o=this.getList(s,r)),this.mirrolist.forEach((function(n){e=n.ball_min,i=n.ball_max;var s=t.getList(e,i);o=o.concat(s)})),o=Array.from(new Set(o)),o.sort((function(t,i){return t-i})),this.newballlist=o},getSumPrice:function(){var t=0;this.myValue.forEach((function(i){t+=parseFloat(i.discount_price||0)*i.product_num})),this.sumPrice=t},nomove:function(t){},getList:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=[],o=.25,n=t;n<=i;n+=o){o=n<this.goodsDetail.step&&0!=this.goodsDetail.step?.5:.25;var s=n>0?"+"+n:n;s=parseFloat(s).toFixed(2),s>0&&(s="+".concat(s)),e.push(s)}return 0==e.length&&e.push(0),e},setMyPopup:function(t,i,e){var o=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.doIndex(t),n=this.myValue[this.nowIndex];var s=n;if(1==this.goodsDetail.luminosity_status){if(!(s.ball_mirrorIndex>=0)&&"cylinder"===i)return this.$util.showToast({title:"先选球镜"});if("ball"==i&&(e=this.newballlist),"cylinder"==i&&null!=n){var r=n.ball_mirrorArray[n.ball_mirrorIndex],a=0,u=0,l=[];return this.mirrolist.forEach((function(t){if(u=t.cylinder_min,a=t.cylinder_max,parseFloat(r)>=parseFloat(t.ball_min)&&parseFloat(r)<=parseFloat(t.ball_max)){s.sku_id=t.sku_id;var i=o.getList(u,a);l=l.concat(i)}})),l=Array.from(new Set(l)),l.sort((function(t,i){return t-i})),n.cylinder_mirrorArray=l,console.log(l,i,"0----------"),this.$refs[i].list=l,void this.$refs[i].open()}}console.log(e,i,"1----------"),this.$refs[i].list=e,"ball"==i&&0===this.$refs[i].list.length&&(this.$refs[i].list=this.ball_mirrorArray_bk),"cylinder"==i&&0===this.$refs[i].list.length&&(this.$refs[i].list=this.cylinder_mirrorArray_bk),this.$refs[i].open()},doIndex:function(t){this.nowIndex=t},getWholesale:function(t){var i=this;return function(t){return function(){var i=this,e=arguments;return new Promise((function(o,n){var s=t.apply(i,e);function a(t){r(s,o,n,a,u,"next",t)}function u(t){r(s,o,n,a,u,"throw",t)}a(void 0)}))}}(s().mark((function t(){var e,o;return s().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.$api.sendRequest({url:"/api/member/detail",async:!1});case 2:return e=t.sent,0==e.code&&(i.is_wholesaler=e.is_wholesaler),t.next=6,i.$api.sendRequest({url:"/api/goodssku/luminosity_sku",data:{goods_id:i.goodsDetail.goods_id},async:!1});case 6:o=t.sent,delete o.timestamp,i.mirrolist=Object.values(o),i.setBalllist();case 10:case"end":return t.stop()}}),t)})))()},reset:function(){this.ball_mirrorIndex=null,this.cylinder_mirrorIndex=null,this.ball_mirrorArray=this.ball_mirrorArray_bk,this.cylinder_mirrorArray=this.cylinder_mirrorArray_bk},bindPickerChangeF:function(t){this.myValue[this.nowIndex].leftIndex=t.target.value},bindPickerChangeA:function(t){var i=this,e=this.myValue[this.nowIndex];if(e.ball_mirrorIndex=t.target.value,1==this.goodsDetail.luminosity_status)return e.ball_mirrorArray=this.newballlist,e.cylinder_mirrorIndex=null,void this.getSumPrice();var o=e.ball_mirrorArray[e.ball_mirrorIndex],n=[];if(this.cylinder_mirrorArray_bk.forEach((function(t){parseFloat(t)+parseFloat(o)>=parseFloat(i.photometric)&&n.push(t)})),null!=e.cylinder_mirrorIndex){var s=e.cylinder_mirrorArray[e.cylinder_mirrorIndex],r=n.indexOf(s);e.cylinder_mirrorIndex=-1==r?0:r}e.cylinder_mirrorArray=n},bindPickerChangeB:function(t){var i=this,e=this.myValue[this.nowIndex],o=e.cylinder_mirrorArray[t.target.value],n=this.myValue[this.nowIndex].ball_mirrorArray[this.myValue[this.nowIndex].ball_mirrorIndex];if(1==this.goodsDetail.luminosity_status)return this.mirrolist.forEach((function(t,i){t.cylinder_max>=o&&o>=t.cylinder_min&&n>=t.ball_min&&n<=t.ball_max&&(e.discount_price=t.discount_price,e.sku_id=t.sku_id)})),this.myValue[this.nowIndex].cylinder_mirrorIndex=t.target.value,e.cylinder_mirrorIndex=t.target.value,void this.getSumPrice();this.myValue[this.nowIndex].cylinder_mirrorIndex=t.target.value,e.cylinder_mirrorIndex=t.target.value;var s=e.cylinder_mirrorArray[e.cylinder_mirrorIndex],r=[];if(this.ball_mirrorArray_bk.forEach((function(t){parseFloat(t)+parseFloat(s)>=parseFloat(i.photometric)&&r.push(t)})),e.ball_mirrorIndex){var a=e.ball_mirrorArray[e.ball_mirrorIndex],u=r.indexOf(a);e.ball_mirrorIndex=-1==u?0:u}e.ball_mirrorArray=r},bindPickerChangeC:function(t){this.myValue[this.nowIndex].axisIndex=t.target.value,this.axisIndex=t.target.value},bindPickerChangeD:function(t){this.myValue[this.nowIndex].sumIndex=t.target.value,this.sumIndex=t.target.value},bindPickerChangeE:function(t){this.myValue[this.nowIndex].objIndex=t.target.value,this.objIndex=t.target.value},show:function(t,i){this.callback=i,this.$refs.skuPopup.open(i),this.type=t,this.skuId=this.goodsDetail.sku_id,this.preview=this.goodsDetail.preview||0,"pintuan"==this.type&&this.goodsDetail.pintuan_id?this.limitNumber=this.goodsDetail.buy_num:"groupbuy"==this.type&&this.goodsDetail.groupbuy_id?(this.number=this.goodsDetail.buy_num,this.minNumber=this.goodsDetail.buy_num):"bargain"==this.type&&this.goodsDetail.bargain_id?(this.number=1,this.minNumber=1):"wholesale_join_cart"!=this.type&&"wholesale_buy_now"!=this.type||!this.goodsDetail.wholesale_sku_id||(this.number=this.goodsDetail.min_num,this.minNumber=this.goodsDetail.min_num),"join_cart"==this.type&&(this.getCartData(),this.$forceUpdate())},hide:function(){this.$refs.skuPopup.close()},change:function(t,i){if(!this.disabled){this.btnSwitch=!1,this.skuId=t;for(var e=0;e<this.goodsDetail.goods_spec_format.length;e++)for(var o=this.goodsDetail.goods_spec_format[e],n=0;n<o.value.length;n++)i==this.goodsDetail.goods_spec_format[e].value[n].spec_id&&(this.goodsDetail.goods_spec_format[e].value[n].selected=!1);this.goodsDetail.pintuan_id?this.getPintuanGoodsSkuInfo():this.goodsDetail.groupbuy_id?this.getGroupbuyGoodsSkuInfo():this.goodsDetail.bargain_id?this.getBargainGoodsSkuInfo():this.goodsDetail.seckill_id?this.getSeckillGoodsSkuInfo():this.goodsDetail.topic_id?this.getTopicsGoodsSkuInfo():this.goodsDetail.exchange_id?this.getPointGoodsSkuInfo():this.goodsDetail.wholesale_sku_id?this.getWholeSaleGoodsSkuInfo():this.getGoodsSkuInfo()}},getGoodsSkuInfo:function(){var t=this,i=this;this.$api.sendRequest({url:"/api/goodssku/info",data:{sku_id:this.skuId},success:function(e){console.log(e.sku_images,"goodsSkuDetail.sku_images图片");var o=e.data;if(null!=o){o.unit=o.unit||"件";var n=o;n.sku_spec_format&&(n.sku_spec_format=JSON.parse(o.sku_spec_format)),1==n.promotion_type&&(n.discountTimeMachine=i.$util.countDown(n.end_time-e.timestamp)),1==n.promotion_type&&n.discountTimeMachine?n.show_price=n.discount_price:n.show_price=n.price,n.goods_spec_format&&(n.goods_spec_format=JSON.parse(n.goods_spec_format)),i.btnSwitch=!1,i.$emit("refresh",n)}else t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getPintuanGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/pintuan/api/goods/info",data:{sku_id:this.skuId,pintuan_id:this.goodsDetail.pintuan_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getPintuanGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.goodsSkuDetail.show_price=0==t.goodsDetail.group_id?t.goodsSkuDetail.promotion_price:t.goodsSkuDetail.pintuan_price,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail/detail",{sku_id:t.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getBargainGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/bargain/api/goods/info",data:{sku_id:this.skuId,bargain_id:this.goodsDetail.bargain_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getBargainGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.goodsSkuDetail.show_price=t.goodsDetail.bargain_id>0?t.goodsSkuDetail.floor_price:t.goodsSkuDetail.price,t.goodsSkuDetail.stock=t.goodsSkuDetail.bargain_stock,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail/detail",{sku_id:t.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getTopicsGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/topic/api/topicgoods/info",data:{sku_id:this.skuId,topic_id:this.goodsDetail.topic_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getTopicsGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e.goods_sku_detail,t.dealData(),t.goodsSkuDetail.show_price=t.goodsDetail.topic_id>0?t.goodsSkuDetail.topic_price:t.goodsSkuDetail.price,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail/detail",{sku_id:t.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getGroupbuyGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/groupbuy/api/goods/info",data:{sku_id:this.skuId,groupbuy_id:this.goodsDetail.groupbuy_id},success:function(i){var e=i.data;null!=e?(e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.goodsSkuDetail.show_price=t.goodsDetail.groupbuy_price,t.goodsSkuDetail.save_price=t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0?(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2):0,t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail/detail",{sku_id:t.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)):t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getSeckillGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/seckill/api/seckillgoods/info",data:{sku_id:this.skuId,seckill_id:this.goodsDetail.seckill_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getSeckillGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e.goods_sku_detail,t.dealData(),t.goodsSkuDetail.show_price=t.goodsSkuDetail.seckill_price,t.goodsSkuDetail.price-t.goodsSkuDetail.show_price>0&&(t.goodsSkuDetail.price-t.goodsSkuDetail.show_price).toFixed(2),t.goodsSkuDetail.end_time-i.timestamp>0?t.goodsSkuDetail.timeMachine=t.$util.countDown(t.goodsSkuDetail.end_time-i.timestamp):(t.$util.showToast({title:"活动已结束"}),setTimeout((function(){t.$util.redirectTo("/pages/goods/detail/detail",{sku_id:t.goodsSkuDetail.sku_id},"redirectTo")}),1e3)),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getPointGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/pointexchange/api/goods/info",data:{sku_id:this.skuId,exchange_id:this.goodsDetail.exchange_id},success:function(i){var e=i.data;if(null!=e){if("again"==e.type)return t.skuId=e.sku_id,void t.getPointGoodsSkuInfo();e.unit=e.unit||"件",t.goodsSkuDetail=e,t.dealData(),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)}else t.$util.redirectTo("/promotionpages/point/list/list",{},"redirectTo")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getWholeSaleGoodsSkuInfo:function(){var t=this;this.$api.sendRequest({url:"/wholesale/api/goods/info",data:{sku_id:this.skuId},success:function(i){var e=i.data;null!=e?(e.unit=e.unit||"件",t.goodsSkuDetail=e,t.number=t.goodsSkuDetail.min_num,t.minNumber=t.goodsSkuDetail.min_num,t.dealData(),t.btnSwitch=!1,t.$emit("refresh",t.goodsSkuDetail)):t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")},fail:function(i){t.btnSwitch=!1,t.$util.redirectTo("/pages/index/index/index",{},"reLaunch")}})},getClickGoodsAdd:function(t,i){this.myValue.push({objIndex:void 0,product_num:1,sumIndex:void 0,axisIndex:void 0,cylinder_mirrorIndex:void 0,ball_mirrorIndex:void 0,leftIndex:i||0,axisValue:0,cylinder_mirrorArray:this.cylinder_mirrorArray_bk,ball_mirrorArray:this.ball_mirrorArray_bk}),this.scrollto="addbtn".concat(this.myValue.length)},removeTap:function(t){this.myValue.splice(t,1)},dealData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goodsSkuDetail;if(t.sku_images?t.sku_images=t.sku_images.split(","):t.sku_images=[],t.goods_spec_format&&t.goods_image&&(t.goods_image=t.goods_image.split(","),t.sku_images=t.sku_images.concat(t.goods_image)),t.sku_spec_format&&(t.sku_spec_format=JSON.parse(t.sku_spec_format)),t.goods_attr_format){var i=JSON.parse(t.goods_attr_format);t.goods_attr_format=this.$util.unique(i,"attr_id");for(var e=0;e<t.goods_attr_format.length;e++)for(var o=0;o<i.length;o++)t.goods_attr_format[e].attr_id==i[o].attr_id&&t.goods_attr_format[e].attr_value_id!=i[o].attr_value_id&&(t.goods_attr_format[e].attr_value_name+="、"+i[o].attr_value_name)}t.goods_spec_format&&(t.goods_spec_format=JSON.parse(t.goods_spec_format)),this.goodsDetail.unit=this.goodsDetail.unit||"件",this.keyInput(!0),this.$langConfig.title(t.goods_name)},changeNum:function(t){if(0!=this.goodsDetail.stock){var i=this.goodsDetail.stock,e=1;if(this.maxBuy>0&&this.maxBuy<i&&(i=this.maxBuy),this.maxBuy>0&&this.goodsDetail.purchased_num>0&&(i=this.maxBuy-this.goodsDetail.purchased_num),this.minBuy>1&&(e=this.minBuy),"pintuan"==this.type&&this.goodsDetail.pintuan_id?i=this.goodsDetail.buy_num>this.goodsDetail.stock?this.goodsDetail.stock:this.goodsDetail.buy_num:"groupbuy"==this.type&&this.goodsDetail.groupbuy_id?(i=(this.goodsDetail.buy_num,this.goodsDetail.stock,this.goodsDetail.stock),e=this.goodsDetail.buy_num):"seckill"==this.type&&this.goodsDetail.seckill_id&&this.goodsDetail.num>0&&this.goodsDetail.num<this.goodsDetail.stock?i=this.goodsDetail.num:"bargain"==this.type&&this.goodsDetail.bargain_id&&(i=1),"+"==t)if(this.number<i)this.number++;else{if(this.maxBuy>0&&this.goodsDetail.purchased_num>0)return void this.$util.showToast({title:"该商品每人限购"+this.maxBuy+this.goodsDetail.unit+"，您已购买了"+this.goodsDetail.purchased_num+this.goodsDetail.unit});if(this.maxBuy>0&&this.cartNumber>0&&this.cartNumber+this.number>this.maxBuy){var o=this.maxBuy-this.cartNumber;return void(o>0?this.$util.showToast({title:"该商品每人限购"+this.maxBuy+this.goodsDetail.unit+"，购物车已加入了"+this.cartNumber+this.goodsDetail.unit+"，还能购买"+o+this.goodsDetail.unit}):this.$util.showToast({title:"该商品每人限购"+this.maxBuy+this.goodsDetail.unit}))}if("seckill"==this.type&&this.goodsDetail.seckill_id&&this.goodsDetail.num>0)return void this.$util.showToast({title:"该商品每人限购"+this.goodsDetail.num+this.goodsDetail.unit})}else if("-"==t){if(!(this.number>e))return void(this.minBuy>1&&this.$util.showToast({title:"该商品"+this.minBuy+this.goodsDetail.unit+"起售"}));this.number-=1}this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber)}},blur:function(){var t=this;if(this.number||(this.number=0),this.number>this.limitNumber&&this.limitNumber&&(this.number=this.limitNumber),this.number<this.minNumber&&this.minNumber&&(this.number=this.minNumber),this.maxBuy>0&&this.number>this.maxBuy&&(this.number=this.maxBuy),this.maxBuy>0&&this.goodsDetail.purchased_num>0){var i=this.maxBuy-this.goodsDetail.purchased_num;this.number>i&&(this.number=i)}this.number<this.minBuy&&this.minBuy>0&&(this.number=this.minBuy);var e=parseInt(this.number);this.number=0,setTimeout((function(){t.number=e}),0)},keyInput:function(t,i){var e=this;setTimeout((function(){var o=e.goodsDetail.stock;0!=e.goodsDetail.stock?(t&&0==e.number.length&&(e.number=1),t&&(e.number<=0||isNaN(e.number))&&(e.number=1),"pintuan"==e.type&&e.goodsDetail.pintuan_id&&e.number>e.goodsDetail.buy_num||"groupbuy"==e.type&&e.goodsDetail.groupbuy_id&&e.number<e.goodsDetail.buy_num?e.number=e.goodsDetail.buy_num:"seckill"==e.type&&e.goodsDetail.seckill_id&&e.goodsDetail.max_buy>0&&e.number>e.goodsDetail.max_buy?e.number=e.goodsDetail.max_buy:"bargain"==e.type&&e.goodsDetail.bargain_id?e.number=1:e.number>o&&(e.number=o),e.minBuy>1&&e.number<e.minBuy&&(e.number=e.minBuy),t&&(e.number=parseInt(e.number)),i&&i()):e.number=0}),0)},confirm:function(){var i=this;t.removeStorageSync("delivery"),this.preview?this.$util.showToast({title:"预览商品无法购买"}):this.checkParam()&&(t.getStorageSync("token")?this.keyInput(!0,(function(){if(0!=i.goodsDetail.stock)if(0!=i.number.length&&0!=i.number){if(i.number>i.goodsDetail.stock)i.$util.showToast({title:"库存不足"});else if(i.maxBuy>0&&i.goodsDetail.purchased_num>0&&i.number>i.maxBuy-i.goodsDetail.purchased_num)i.$util.showToast({title:"该商品每人限购"+i.maxBuy+i.goodsDetail.unit+"，您已购买了"+i.goodsDetail.purchased_num+i.goodsDetail.unit});else if(i.maxBuy>0&&i.cartNumber>0&&i.cartNumber+i.number>i.maxBuy){var t=i.maxBuy-i.cartNumber;t>0?i.$util.showToast({title:"该商品每人限购"+i.maxBuy+i.goodsDetail.unit+"，购物车已加入了"+i.cartNumber+i.goodsDetail.unit+"，还能购买"+t+i.goodsDetail.unit}):i.$util.showToast({title:"该商品每人限购"+i.maxBuy+i.goodsDetail.unit})}else if(!i.btnSwitch){i.btnSwitch=!0;i.myValue.forEach((function(t){t.leftIndex,t.cylinder_mirrorIndex,t.ball_mirrorIndex,t.axisIndex,t.objIndex,t.sumIndex,t.product_num,t.sku_id}));var e=[];i.myValue.map((function(t){e.push({eye:0==t.leftIndex?"右眼":"左眼",passage:i.objArray[t.objIndex],a_dd:i.sumArray[t.sumIndex],num:t.product_num,ball_mirror:t.ball_mirrorArray[t.ball_mirrorIndex],cylinder_mirror:t.cylinder_mirrorArray[t.cylinder_mirrorIndex],axis:t.axisValue,sku_id:t.sku_id})})),"join_cart"==i.type&&i.postJoinCart(e),"buy_now"==i.type&&i.postBuyNow(),"seckill"==i.type&&i.postSeckill(),"pintuan"==i.type&&i.postPintuan(),"topic"==i.type&&i.postTopic(),"groupbuy"==i.type&&i.postGroupBuy(),"presale"==i.type&&i.postPresale(),"bargain"==i.type&&i.postBargain(),"point"==i.type&&i.postPoint(),"wholesale_join_cart"==i.type&&i.postPfJoin(),"wholesale_buy_now"==i.type&&i.postPfBuy(),i.myValue=[],i.getClickGoodsAdd(),console.error(i.goodsDetail.rimless,"rimless"),1==i.goodsDetail.rimless&&(i.rimless=i.goodsDetail.rimless,i.getClickGoodsAdd({},1))}}else i.$util.showToast({title:"购买数量不能为0"});else i.$util.showToast({title:"商品已售罄"})})):this.$refs.login.open())},checkParam:function(){var t=this,i=!0;return 0==this.goodsDetail.photometric&&1!=this.goodsDetail.luminosity_status||this.myValue.forEach((function(e){return void 0==e.ball_mirrorArray[e.ball_mirrorIndex]?(t.$util.showToast({title:"请选择球镜"}),void(i=!1)):void 0==e.cylinder_mirrorArray[e.cylinder_mirrorIndex]?(t.$util.showToast({title:"请选择柱镜"}),void(i=!1)):void 0==e.sumIndex&&1==t.goodsDetail.a_dd?(t.$util.showToast({title:"请选择ADD"}),void(i=!1)):void 0==e.objIndex&&1==t.goodsDetail.passage?(t.$util.showToast({title:"请选择通道"}),void(i=!1)):(t.quantity+=e.product_num,t.goodsDetail.stock<=e.product_num?(t.$util.showToast({title:"请不要大于库存数量"}),void(i=!1)):void 0)})),i},postJoinCart:function(t){var i=this,e=this.number,o=0!=this.goodsDetail.photometric||1==this.goodsDetail.luminosity_status?{sku_id:this.skuId,site_id:this.goodsDetail.site_id,list:JSON.stringify(t),buyer_message:this.buyer_message,rimless:this.rimless}:{site_id:this.goodsDetail.site_id,sku_id:this.skuId,ball_mirror:null!=this.ball_mirrorIndex?this.ball_mirrorArray[this.ball_mirrorIndex]:0,cylinder_mirror:null!=this.cylinder_mirrorIndex?this.cylinder_mirrorArray[this.cylinder_mirrorIndex]:0,axis:this.axisValue,a_dd_data:null!=this.sumIndex?this.sumIndex[this.sumIndex]:0,passage_data:null!=this.objIndex?this.objIndex[this.objIndex]:0,num:e,buyer_message:this.buyer_message,rimless:this.rimless};this.$api.sendRequest({url:"/api/cart/add",data:o,success:function(t){var e=t.data;e>0&&(i.$util.showToast({title:"加入购物车成功"}),i.callback&&i.callback()),i.$refs.skuPopup.close(),i.btnSwitch=!1},fail:function(t){i.$refs.skuPopup.close(),i.btnSwitch=!1}})},postBuyNow:function(){var i=this,e={sku_id:this.skuId,num:this.number,ball_mirror:null!=this.ball_mirrorIndex?this.ball_mirrorArray[this.ball_mirrorIndex]:0,cylinder_mirror:null!=this.cylinder_mirrorIndex?this.cylinder_mirrorArray[this.cylinder_mirrorIndex]:0,axis:null!=this.axisIndex?this.axisArray[this.axisIndex]:0};t.setStorage({key:"orderCreateData",data:e,success:function(){i.$util.redirectTo("/pages/order/payment/payment"),i.btnSwitch=!1}})},postSeckill:function(){var i=this,e={seckill_id:this.goodsDetail.seckill_id,num:this.number,sku_id:this.skuId};t.setStorage({key:"seckillOrderCreateData",data:e,success:function(){i.$util.redirectTo("/promotionpages/seckill/payment/payment"),i.btnSwitch=!1}})},postPintuan:function(){var i=this,e={pintuan_goods_id:this.goodsDetail.id,group_id:this.goodsDetail.group_id,num:this.number};t.setStorage({key:"pintuanOrderCreateData",data:e,success:function(){i.$util.redirectTo("/promotionpages/pintuan/payment/payment"),i.btnSwitch=!1}})},postTopic:function(){var i=this,e={topic_goods_id:this.goodsDetail.id,num:this.number};t.setStorage({key:"topicOrderCreateData",data:e,success:function(){i.$util.redirectTo("/promotionpages/topics/payment/payment"),i.btnSwitch=!1}})},postGroupBuy:function(){var i=this,e={groupbuy_id:this.goodsDetail.groupbuy_id,sku_id:this.skuId,num:this.number};t.setStorage({key:"groupbuyOrderCreateData",data:e,success:function(){i.$util.redirectTo("/promotionpages/groupbuy/payment/payment"),i.btnSwitch=!1}})},postPresale:function(){var i=this,e={presale_id:this.goodsDetail.presale_id,sku_id:this.skuId,num:this.number};t.setStorage({key:"presaleOrderCreateData",data:e,success:function(){i.$util.redirectTo("/promotionpages/presale/payment/payment"),i.btnSwitch=!1}})},postBargain:function(){var t=this;this.$api.sendRequest({url:"/bargain/api/bargain/launch",data:{id:this.goodsDetail.id},success:function(i){t.btnSwitch=!1,0==i.code?t.$util.redirectTo("/promotionpages/bargain/launch/launch",{id:i.data},"redirectTo"):t.$util.showToast({title:i.message})}})},postPoint:function(){var i=this,e={id:this.goodsDetail.exchange_id,sku_id:this.skuId,num:this.number};t.setStorage({key:"exchangeOrderCreateData",data:e,success:function(){i.$util.redirectTo("/promotionpages/point/payment/payment"),i.btnSwitch=!1}})},postPfJoin:function(){var t=this;this.$api.sendRequest({url:"/wholesale/api/cart/add",data:{site_id:this.goodsDetail.site_id,sku_id:this.skuId,num:this.number},success:function(i){var e=i.data;e>0&&(t.$util.showToast({title:"加入进货单成功"}),t.callback&&t.callback(),t.$store.dispatch("getWholeSaleNumber")),t.$refs.skuPopup.close(),t.btnSwitch=!1},fail:function(i){t.$refs.skuPopup.close(),t.btnSwitch=!1}})},postPfBuy:function(){var i=this,e={sku_id:this.skuId,num:this.number};t.setStorage({key:"wholesaleOrderCreateData",data:e,success:function(){i.$util.redirectTo("/promotionpages/wholesale/payment/payment"),i.btnSwitch=!1}})},closeSkuPopup:function(){this.$refs.skuPopup.close()},imgError:function(){this.goodsDetail.sku_image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},valueImgError:function(t,i){this.goodsDetail.goods_spec_format[t].value[i].image=this.$util.getDefaultImage().default_goods_img,this.$forceUpdate()},getCartData:function(){var t=this;this.$api.sendRequest({url:"/api/cart/goodslists",success:function(i){if(i.code>=0)for(var e=i.data,o=0;o<e.length;o++)if(e[o].sku_id==t.goodsDetail.sku_id){t.cartNumber=e[o].num;break}}})}}};i.default=a}).call(this,e("543d")["default"])},"10f7":function(t,i,e){"use strict";var o=e("04ca"),n=e.n(o);n.a},3689:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var o={uniPopup:function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"fbc8"))},nsLogin:function(){return Promise.all([e.e("common/vendor"),e.e("components/ns-login/ns-login")]).then(e.bind(null,"8689"))},myPopupSelect:function(){return e.e("components/my-popup-select/my-popup-select").then(e.bind(null,"b582"))}},n=function(){var t=this,i=t.$createElement,e=(t._self._c,"point"==t.type&&t.goodsDetail.type&&1!=t.goodsDetail.type&&2==t.goodsDetail.type&&t.goodsDetail.image?t.$util.img(t.goodsDetail.image):null),o="point"==t.type&&t.goodsDetail.type&&1!=t.goodsDetail.type&&2==t.goodsDetail.type&&!t.goodsDetail.image?t.$util.img("upload/uniapp/point/coupon.png"):null,n="point"==t.type&&t.goodsDetail.type&&1!=t.goodsDetail.type&&3==t.goodsDetail.type&&t.goodsDetail.image?t.$util.img(t.goodsDetail.image):null,s="point"==t.type&&t.goodsDetail.type&&1!=t.goodsDetail.type&&3==t.goodsDetail.type&&!t.goodsDetail.image?t.$util.img("upload/uniapp/point/hongbao.png"):null,r="point"==t.type&&t.goodsDetail.type&&1!=t.goodsDetail.type?null:t.$util.img(t.goodsDetail.sku_image,{size:"mid"}),a="point"==t.type&&1==t.goodsDetail.type&&"0.00"!=t.goodsDetail.exchange_price&&t.goodsDetail.pay_type>0?t.$lang("common.currencySymbol"):null,u=t.__map(t.goodsDetail.goods_spec_format,(function(i,e){var o=t.__get_orig(i),n=1!=t.goodsDetail.luminosity_status?t.__map(i.value,(function(i,e){var o=t.__get_orig(i),n=i.image?t.$util.img(i.image,{size:"small"}):null;return{$orig:o,g5:n}})):null;return{$orig:o,l0:n}}));t.$mp.data=Object.assign({},{$root:{g0:e,g1:o,g2:n,g3:s,g4:r,m0:a,l1:u}})},s=[]},"3f49":function(t,i,e){"use strict";e.r(i);var o=e("4c4b"),n=e("90e1");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("10f7"),e("02e4");var r=e("f0c5"),a=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"4101a4e6",null,!1,o["a"],void 0);i["default"]=a.exports},"410f":function(t,i,e){"use strict";(function(t){e("d947");o(e("66fd"));var i=o(e("3f49"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=e,t(i.default)}).call(this,e("543d")["createPage"])},"46ea":function(t,i,e){"use strict";e.r(i);var o=e("0933"),n=e.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a},"4c4b":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o}));var o={uniPopup:function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"fbc8"))},uParse:function(){return Promise.all([e.e("common/vendor"),e.e("components/u-parse/u-parse")]).then(e.bind(null,"1b9d"))},nsGoodsSku:function(){return Promise.resolve().then(e.bind(null,"727a"))},loadingCover:function(){return e.e("components/loading-cover/loading-cover").then(e.bind(null,"9257"))},nsLogin:function(){return Promise.all([e.e("common/vendor"),e.e("components/ns-login/ns-login")]).then(e.bind(null,"8689"))},nsGoodsAction:function(){return e.e("components/ns-goods-action/ns-goods-action").then(e.bind(null,"207e"))},nsGoodsActionIcon:function(){return e.e("components/ns-goods-action-icon/ns-goods-action-icon").then(e.bind(null,"e362"))},nsGoodsActionButton:function(){return e.e("components/ns-goods-action-button/ns-goods-action-button").then(e.bind(null,"c1e3"))}},n=function(){var t=this,i=t.$createElement,e=(t._self._c,t.__map(t.goodsSkuDetail.sku_images,(function(i,e){var o=t.__get_orig(i),n=t.$util.img(i,{size:"big"});return{$orig:o,g0:n}}))),o=t.$util.img(t.goodsSkuDetail.video_url),n=t.$util.img(t.goodsSkuDetail.sku_image,{size:"big"}),s=""!=t.goodsSkuDetail.video_url?t.$lang("video"):null,r=""!=t.goodsSkuDetail.video_url?t.$lang("image"):null,a=t.$util.img(t.goodsSkuDetail.video_url),u=t.$util.img(t.goodsSkuDetail.sku_image,{size:"big"}),l=t.$lang("common.currencySymbol"),d=t.goodsSkuDetail.price>0?t.$lang("common.currencySymbol"):null,c=t.$lang("common.currencySymbol"),h=t.$lang("service"),m=t.Development&&t.shopInfo.avatar?t.$util.img(t.shopInfo.avatar):null,g=t.Development&&!t.shopInfo.avatar?t.$util.getDefaultImage():null,p=1==t.evaluateConfig.evaluate_show&&t.goodsEvaluate.content&&t.goodsEvaluate.member_headimg?t.$util.img(t.goodsEvaluate.member_headimg):null,f=1==t.evaluateConfig.evaluate_show&&t.goodsEvaluate.content&&!t.goodsEvaluate.member_headimg?t.$util.getDefaultImage():null,_=1==t.evaluateConfig.evaluate_show&&t.goodsEvaluate.content?t.$util.timeStampTurnTime(t.goodsEvaluate.create_time):null,y=1==t.evaluateConfig.evaluate_show&&t.goodsEvaluate.content&&t.goodsEvaluate.images?t.__map(t.goodsEvaluate.images,(function(i,e){var o=t.__get_orig(i),n=t.$util.img(i);return{$orig:o,g10:n}})):null,b="-1"!=t.poster?t.$util.img(t.poster):null;t._isMounted||(t.e0=function(i){t.switchMedia="video"},t.e1=function(i){t.switchMedia="img"},t.e2=function(i){t.shopInfo.avatar=t.$util.getDefaultImage().default_shop_img},t.e3=function(i){t.goodsEvaluate.member_headimg=t.$util.getDefaultImage().default_headimg},t.e4=function(i){t.detailTab=0}),t.$mp.data=Object.assign({},{$root:{l0:e,g1:o,g2:n,m0:s,m1:r,g3:a,g4:u,m2:l,m3:d,m4:c,m5:h,g5:m,g6:g,g7:p,g8:f,g9:_,l1:y,g11:b}})},s=[]},"5e4b":function(t,i,e){"use strict";var o=e("c8cb"),n=e.n(o);n.a},"71b8":function(t,i,e){},"727a":function(t,i,e){"use strict";e.r(i);var o=e("3689"),n=e("46ea");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("5e4b"),e("c906");var r=e("f0c5"),a=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"5a0bb758",null,!1,o["a"],void 0);i["default"]=a.exports},"90e1":function(t,i,e){"use strict";e.r(i);var o=e("9dbd"),n=e.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(s);i["default"]=n.a},"9dbd":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;r(e("727a"));var o=r(e("aaa7")),n=r(e("6476")),s=r(e("a88e"));function r(t){return t&&t.__esModule?t:{default:t}}var a={components:{nsGoodsAction:function(){e.e("components/ns-goods-action/ns-goods-action").then(function(){return resolve(e("207e"))}.bind(null,e)).catch(e.oe)},nsGoodsActionIcon:function(){e.e("components/ns-goods-action-icon/ns-goods-action-icon").then(function(){return resolve(e("e362"))}.bind(null,e)).catch(e.oe)},nsGoodsActionButton:function(){e.e("components/ns-goods-action-button/ns-goods-action-button").then(function(){return resolve(e("c1e3"))}.bind(null,e)).catch(e.oe)},uniPopup:function(){e.e("components/uni-popup/uni-popup").then(function(){return resolve(e("fbc8"))}.bind(null,e)).catch(e.oe)},nsGoodsRecommend:function(){Promise.all([e.e("common/vendor"),e.e("components/ns-goods-recommend/ns-goods-recommend")]).then(function(){return resolve(e("f54a"))}.bind(null,e)).catch(e.oe)},uniCountDown:function(){e.e("components/uni-count-down/uni-count-down").then(function(){return resolve(e("04c1"))}.bind(null,e)).catch(e.oe)},toTop:function(){e.e("components/toTop/toTop").then(function(){return resolve(e("dcd2"))}.bind(null,e)).catch(e.oe)},uParse:function(){Promise.all([e.e("common/vendor"),e.e("components/u-parse/u-parse")]).then(function(){return resolve(e("1b9d"))}.bind(null,e)).catch(e.oe)}},data:function(){return{kefuConfig:{weapp:"",system:"",open:"",open_url:""}}},mixins:[o.default,n.default,s.default],onShareAppMessage:function(t){var i="/promotionpages/wholesale/detail/detail?goods_id="+this.goodsId;return this.memberId&&(i+="&source_member="+this.memberId),{title:this.goodsSkuDetail.sku_name,imageUrl:this.$util.img(this.goodsSkuDetail.sku_image,{size:"big"}),path:i,success:function(t){},fail:function(t){}}},onShareTimeline:function(){var t="goods_id="+this.goodsId;return this.memberId&&(t+="&source_member="+this.memberId),{title:this.goodsSkuDetail.sku_name,query:t,imageUrl:this.$util.img(this.goodsSkuDetail.sku_image,{size:"big"})}}};i.default=a},c6e7:function(t,i,e){},c8cb:function(t,i,e){},c906:function(t,i,e){"use strict";var o=e("71b8"),n=e.n(o);n.a}},[["410f","common/runtime","common/vendor","promotionpages/common/vendor"]]]);