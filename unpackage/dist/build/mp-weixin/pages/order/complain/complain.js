(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/complain/complain"],{"19fb":function(i,o,n){"use strict";var t=n("710e"),e=n.n(t);e.a},"1c66":function(i,o,n){"use strict";(function(i){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t=function(i){return i&&i.__esModule?i:{default:i}}(n("a88e"));var e={components:{uniPopup:function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("fbc8"))}.bind(null,n)).catch(n.oe)}},data:function(){return{complainData:{order_goods_info:{sku_image:"",sku_name:""}},detail:{sku_image:""},complain_reason:"",complain_remark:"",action:"",showText:!1}},mixins:[t.default],onLoad:function(i){i.order_goods_id&&(this.order_goods_id=i.order_goods_id)},onShow:function(){this.$langConfig.refresh(),i.getStorageSync("token")?this.getComplainData():this.$util.redirectTo("/pages/login/login/login",{back:"/pages/order/complain/complain?order_goods_id="+this.order_goods_id})},computed:{good_image:function(){return this.complainData.order_goods_info.sku_image?this.$util.img(this.complainData.order_goods_info.sku_image,{size:"mid"}):this.$util.getDefaultImage().default_goods_img}},methods:{goConnect:function(){if(i.getStorageSync("token")){var o={site_id:this.shopInfo.site_id,sku_id:this.goodsSkuDetail.sku_id};this.$util.redirectTo("/otherpages/chat/room/room",o)}else this.$util.redirectTo("/pages/login/login/login")},openPopup:function(i){this.$refs[i].open()},closePopup:function(i){this.$refs[i].close()},textBlur:function(){i.pageScrollTo({scrollTop:0,duration:0})},getComplainData:function(){var i=this;this.$api.sendRequest({url:"/api/ordercomplain/detail",data:{order_goods_id:this.order_goods_id},success:function(o){o.code>=0?(i.complainData=o.data,i.detail=i.complainData.complain_info,i.$refs.loadingCover&&i.$refs.loadingCover.hide()):(i.$util.showToast({title:"未获取到该订单项退款信息"}),setTimeout((function(){i.$util.redirectTo("/pages/order/list/list")}),1e3))},fail:function(o){i.$refs.loadingCover&&i.$refs.loadingCover.hide()}})},submit:function(){var i=this;if(this.verify()){if(this.isSub)return;this.isSub=!0,this.$api.sendRequest({url:"/api/ordercomplain/complain",data:{order_goods_id:this.order_goods_id,complain_reason:this.complain_reason,complain_remark:this.complain_remark},success:function(o){i.$util.showToast({title:o.message}),o.code>=0?(i.getComplainData(),i.$forceUpdate()):i.isSub=!1},fail:function(o){i.isSub=!1}})}},verify:function(){return""!=this.complain_reason||(this.$util.showToast({title:"请选择退款原因"}),!1)},changeReason:function(i){this.complain_reason=i},switchAction:function(i){this.action=i},refundAction:function(o){var n=this;switch(o){case"complainCancel":i.showModal({content:"是否撤销本次维权?",cancelText:"暂不撤销",cancelColor:"#898989",success:function(i){i.confirm&&n.$api.sendRequest({url:"/api/ordercomplain/cancel",data:{order_goods_id:n.order_goods_id},success:function(i){i.code>=0&&(n.$util.showToast({title:"撤销成功"}),setTimeout((function(){n.$util.redirectTo("/pages/order/list/list")}),1e3))}})}});break;case"complainApply":this.action="apply";break}},change:function(i){i&&(this.showText=i.show)},refundDetail:function(i){this.$util.redirectTo("/pages/goods/detail/detail",{sku_id:i})}}};o.default=e}).call(this,n("543d")["default"])},"266b":function(i,o,n){"use strict";n.r(o);var t=n("8f79"),e=n("ccdc");for(var a in e)["default"].indexOf(a)<0&&function(i){n.d(o,i,(function(){return e[i]}))}(a);n("9414"),n("19fb");var c=n("f0c5"),l=Object(c["a"])(e["default"],t["b"],t["c"],!1,null,"a09fbcc0",null,!1,t["a"],void 0);o["default"]=l.exports},"4cdd":function(i,o,n){"use strict";(function(i){n("d947");t(n("66fd"));var o=t(n("266b"));function t(i){return i&&i.__esModule?i:{default:i}}wx.__webpack_require_UNI_MP_PLUGIN__=n,i(o.default)}).call(this,n("543d")["createPage"])},"710e":function(i,o,n){},"8f79":function(i,o,n){"use strict";n.d(o,"b",(function(){return e})),n.d(o,"c",(function(){return a})),n.d(o,"a",(function(){return t}));var t={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"fbc8"))},loadingCover:function(){return n.e("components/loading-cover/loading-cover").then(n.bind(null,"9257"))}},e=function(){var i=this,o=i.$createElement,n=(i._self._c,i.complainData.complain_info&&"apply"!=i.action?null:i.$util.img(i.complainData.order_goods_info.sku_image,{size:"mid"})),t=i.complainData.complain_info&&"apply"!=i.action?null:i.$lang("common.currencySymbol"),e=i.complainData.complain_info&&"apply"!=i.action?null:i.$lang("common.submit"),a=i.complainData.complain_info&&"apply"!=i.action?i.$util.img(i.detail.sku_image,{size:"mid"}):null,c=i.complainData.complain_info&&"apply"!=i.action?i.$lang("common.currencySymbol"):null,l=i.complainData.complain_info&&"apply"!=i.action?i.$lang("common.currencySymbol"):null,u=i.complainData.complain_info&&"apply"!=i.action?i.$util.timeStampTurnTime(i.detail.complain_apply_time):null,r=i.complainData.complain_info&&"apply"!=i.action&&i.detail.complain_time?i.$util.timeStampTurnTime(i.detail.complain_time):null,s=i.complainData.complain_info&&"apply"!=i.action?i.__map(i.detail.refund_log_list,(function(o,n){var t=i.__get_orig(o),e=i.$util.timeStampTurnTime(o.action_time);return{$orig:t,g4:e}})):null;i._isMounted||(i.e0=function(o){i.complainData.order_goods_info.sku_image=i.$util.getDefaultImage().default_goods_img},i.e1=function(o){i.detail.sku_image=i.$util.getDefaultImage().default_goods_img}),i.$mp.data=Object.assign({},{$root:{g0:n,m0:t,m1:e,g1:a,m2:c,m3:l,g2:u,g3:r,l0:s}})},a=[]},9414:function(i,o,n){"use strict";var t=n("da2f"),e=n.n(t);e.a},ccdc:function(i,o,n){"use strict";n.r(o);var t=n("1c66"),e=n.n(t);for(var a in t)["default"].indexOf(a)<0&&function(i){n.d(o,i,(function(){return t[i]}))}(a);o["default"]=e.a},da2f:function(i,o,n){}},[["4cdd","common/runtime","common/vendor"]]]);