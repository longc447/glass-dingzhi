require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["otherpages/member/account_edit/account_edit"],{"3c5c":function(a,t,e){},"42a8":function(a,t,e){"use strict";var n=e("3c5c"),r=e.n(n);r.a},"52f1":function(a,t,e){"use strict";e.r(t);var n=e("58d7"),r=e("d6c4");for(var i in r)["default"].indexOf(i)<0&&function(a){e.d(t,a,(function(){return r[a]}))}(i);e("42a8");var o=e("f0c5"),c=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=c.exports},"58d7":function(a,t,e){"use strict";e.d(t,"b",(function(){return r})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return n}));var n={loadingCover:function(){return e.e("components/loading-cover/loading-cover").then(e.bind(null,"9257"))}},r=function(){var a=this.$createElement,t=(this._self._c,this.$lang("name")),e=this.$lang("mobilePhone"),n=this.$lang("accountType"),r="wechatpay"!=this.formData.withdraw_type?this.$lang("withdrawalAccount"):null,i=this.$lang("save");this.$mp.data=Object.assign({},{$root:{m0:t,m1:e,m2:n,m3:r,m4:i}})},i=[]},"7a54":function(a,t,e){"use strict";(function(a){e("d947");n(e("66fd"));var t=n(e("52f1"));function n(a){return a&&a.__esModule?a:{default:a}}wx.__webpack_require_UNI_MP_PLUGIN__=e,a(t.default)}).call(this,e("543d")["createPage"])},d6c4:function(a,t,e){"use strict";e.r(t);var n=e("dd1d"),r=e.n(n);for(var i in n)["default"].indexOf(i)<0&&function(a){e.d(t,a,(function(){return n[a]}))}(i);t["default"]=r.a},dd1d:function(a,t,e){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(e("d743")),r=i(e("a88e"));function i(a){return a&&a.__esModule?a:{default:a}}var o={data:function(){return{formData:{realname:"",mobile:"",withdraw_type:"",bank_account:"",branch_bank_name:""},payList:[],index:0,flag:!1,transferType:[],accountInfo:null,back:""}},onLoad:function(a){a.id&&(this.formData.id=a.id),a.back&&(this.back=a.back)},mixins:[r.default],onShow:function(){this.$langConfig.refresh(),this.formData.id?this.getAccountDetail(this.formData.id):this.getTransferType(),this.formData.id?a.setNavigationBarTitle({title:"编辑账户"}):a.setNavigationBarTitle({title:"新增账户"})},methods:{getAccountDetail:function(a){var t=this;this.$api.sendRequest({url:"/api/memberbankaccount/info",data:{id:this.formData.id},success:function(a){0==a.code&&a.data&&(t.accountInfo=a.data,t.formData.realname=a.data.realname,t.formData.mobile=a.data.mobile,t.formData.bank_account=a.data.bank_account,t.formData.branch_bank_name=a.data.branch_bank_name,t.formData.withdraw_type=a.data.withdraw_type),t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()},fail:function(a){t.getTransferType(),t.$refs.loadingCover&&t.$refs.loadingCover.hide()}})},getTransferType:function(){var a=this;this.payList=[],this.$api.sendRequest({url:"/api/memberwithdraw/transferType",success:function(t){if(t.code>=0&&t.data){for(var e in a.transferType=t.data,a.transferType)a.formData.withdraw_type||"wechatpay"!=e||(a.formData.withdraw_type=e),a.payList.push(a.transferType[e]);if(a.payList.reverse(),!a.formData.id&&a.$refs.loadingCover&&a.$refs.loadingCover.hide(),a.accountInfo&&-1==a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList)&&a.payList.push(a.accountInfo.withdraw_type_name),a.payList.length&&a.accountInfo)a.index=a.$util.inArray(a.accountInfo.withdraw_type_name,a.payList);else{var n="";for(var r in a.transferType)if(a.transferType[r]==a.payList[a.index]){n=r;break}""!=n&&(a.formData.withdraw_type=n)}}}})},bindPickerChange:function(a){this.index=a.detail.value;var t="";for(var e in this.transferType)this.transferType[e]==this.payList[this.index]&&(t=e);""!=t&&(this.formData.withdraw_type=t)},vertify:function(){this.formData.realname=this.formData.realname.trim(),this.formData.branch_bank_name=this.formData.branch_bank_name.trim(),this.formData.bank_account=this.formData.bank_account.trim(),this.formData.mobile=this.formData.mobile.trim();var a=[{name:"realname",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"withdraw_type",checkType:"required",errorMsg:"请选择账户类型"}];"bank"==this.formData.withdraw_type&&a.push({name:"branch_bank_name",checkType:"required",errorMsg:"请输入银行名称"}),"wechatpay"!=this.formData.withdraw_type&&a.push({name:"bank_account",checkType:"required",errorMsg:"请输入提现账号"});var t=n.default.check(this.formData,a);return!!t||(this.$util.showToast({title:n.default.error}),this.flag=!1,!1)},saveAccount:function(){var a=this;if(!this.flag&&(this.flag=!0,this.vertify())){var t=this.formData.id?"edit":"add";this.$api.sendRequest({url:"/api/memberbankaccount/"+t,data:{id:this.formData.id,realname:this.formData.realname,mobile:this.formData.mobile,withdraw_type:this.formData.withdraw_type,bank_account:this.formData.bank_account,branch_bank_name:this.formData.branch_bank_name},success:function(t){0==t.code?(a.formData.id?a.$util.showToast({title:"修改成功"}):a.$util.showToast({title:"添加成功"}),""!=a.back?a.$util.redirectTo(a.back,{},a.redirect):a.$util.redirectTo("/otherpages/member/account/account")):(a.flag=!1,a.$util.showToast({title:t.message}))},fail:function(t){a.flag=!1}})}}}};t.default=o}).call(this,e("543d")["default"])}},[["7a54","common/runtime","common/vendor"]]]);